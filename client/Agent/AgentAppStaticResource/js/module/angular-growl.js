angular.module("angular-growl",[]),angular.module("angular-growl").directive("growl",["$rootScope","$sce",function($rootScope,$sce){"use strict";return{restrict:"A",templateUrl:"templates/growl/growl.html",replace:!1,scope:{reference:"@",inline:"@"},controller:["$scope","$timeout","growl",function($scope,$timeout,growl){function addMessage(message){$timeout(function(){message.text=$sce.trustAsHtml(String(message.text)),$scope.messages.push(message),message.ttl&&-1!==message.ttl&&$timeout(function(){$scope.deleteMessage(message)},message.ttl)},!0)}var onlyUnique=growl.onlyUnique();$scope.messages=[];var referenceId=$scope.reference||0;$scope.inlineMessage=$scope.inline||growl.inlineMessages(),$rootScope.$on("growlMessage",function(event,message){var found,msgText;parseInt(referenceId,10)===parseInt(message.referenceId,10)&&(onlyUnique?(angular.forEach($scope.messages,function(msg){msgText=$sce.getTrustedHtml(msg.text),message.text===msgText&&message.severity===msg.severity&&msg.title===msg.title&&(found=!0)}),found||addMessage(message)):addMessage(message))}),$rootScope.$on("deleteAllMessages",function(event){$scope.messages=[]}),$scope.deleteMessage=function(message){var index=$scope.messages.indexOf(message);index>-1&&$scope.messages.splice(index,1)},$scope.alertClasses=function(message){return{"alert-success":"success"===message.severity,"alert-error":"error"===message.severity,"alert-danger":"error"===message.severity,"alert-info":"info"===message.severity,"alert-warning":"warning"===message.severity,icon:message.disableIcons===!1,"alert-dismissable":!message.disableCloseButton}},$scope.wrapperClasses=function(){var classes={};return classes["growl-fixed"]=!$scope.inlineMessage,classes[growl.position()]=!0,classes},$scope.computeTitle=function(message){var ret={success:"Success",error:"Error",info:"Information",warn:"Warning"};return ret[message.severity]}}]}}]),angular.module("angular-growl").run(["$templateCache",function($templateCache){"use strict";$templateCache.put("templates/growl/growl.html",'<div class="growl-container"> <div class="growl-item membership_bar col-xs-12" ng-repeat="message in messages" ng-class="alertClasses(message)" > <div class="col-xs-11 portrait_width"><h3 class="inlineblock marginLeft10 marginRight10"> <div class="icon" > </div> <span ng-bind-html="message.text"> </span>  </h3></div>  <div class="pull-right close_section"><a data-dismiss="alert" aria-hidden="true" ng-click="deleteMessage(message)" style="color:#fff;">X</a></div> </div></div>')}]),angular.module("angular-growl").provider("growl",function(){"use strict";var _ttl={success:null,error:null,warning:null,info:null},_messagesKey="messages",_messageTextKey="text",_messageTitleKey="title",_messageSeverityKey="severity",_onlyUniqueMessages=!0,_messageVariableKey="variables",_referenceId=0,_inline=!1,_position="top-right",_disableCloseButton=!1,_disableIcons=!1;this.globalTimeToLive=function(ttl){if("object"==typeof ttl)for(var k in ttl)ttl.hasOwnProperty(k)&&(_ttl[k]=ttl[k]);else for(var severity in _ttl)_ttl.hasOwnProperty(severity)&&(_ttl[severity]=ttl)},this.globalDisableCloseButton=function(disableCloseButton){_disableCloseButton=disableCloseButton},this.globalDisableIcons=function(disableIcons){_disableIcons=disableIcons},this.messageVariableKey=function(messageVariableKey){_messageVariableKey=messageVariableKey},this.globalInlineMessages=function(inline){_inline=inline},this.globalPosition=function(position){_position=position},this.messagesKey=function(messagesKey){_messagesKey=messagesKey},this.messageTextKey=function(messageTextKey){_messageTextKey=messageTextKey},this.messageTitleKey=function(messageTitleKey){_messageTitleKey=messageTitleKey},this.messageSeverityKey=function(messageSeverityKey){_messageSeverityKey=messageSeverityKey},this.onlyUniqueMessages=function(onlyUniqueMessages){_onlyUniqueMessages=onlyUniqueMessages},this.serverMessagesInterceptor=["$q","growl",function($q,growl){function checkResponse(response){response.data[_messagesKey]&&response.data[_messagesKey].length>0&&growl.addServerMessages(response.data[_messagesKey])}function success(response){return checkResponse(response),response}function error(response){return checkResponse(response),$q.reject(response)}return function(promise){return promise.then(success,error)}}],this.$get=["$rootScope","$interpolate","$filter","$timeout",function($rootScope,$interpolate,$filter,$timeout){function broadcastMessage(message){if(translate)message.text=translate(message.text,message.variables);else{var polation=$interpolate(message.text);message.text=polation(message.variables)}$timeout(function(){$rootScope.$broadcast("growlMessage",message)})}function sendMessage(text,config,severity){var message,_config=config||{};message={text:text,title:_config.title,severity:severity,ttl:_config.ttl||_ttl[severity],variables:_config.variables||{},disableCloseButton:_config.disableCloseButton||_disableCloseButton,disableIcons:void 0===_config.disableIcons?_disableIcons:_config.disableIcons,position:_config.position||_position,referenceId:_config.referenceId||_referenceId},config&&config.clear&&clear(),broadcastMessage(message)}function clear(){$rootScope.$broadcast("deleteAllMessages")}function warning(text,config){sendMessage(text,config,"warning")}function error(text,config){sendMessage(text,config,"error")}function info(text,config){sendMessage(text,config,"info")}function success(text,config){sendMessage(text,config,"success")}function addServerMessages(messages){var i,message,severity,length;for(length=messages.length,i=0;length>i;i++)if(message=messages[i],message[_messageTextKey]){severity=message[_messageSeverityKey]||"error";var config={};config.variables=message[_messageVariableKey]||{},config.title=message[_messageTitleKey],sendMessage(message[_messageTextKey],config,severity)}}function onlyUnique(){return _onlyUniqueMessages}function inlineMessages(){return _inline}function position(){return _position}var translate;try{translate=$filter("translate")}catch(e){}return{warning:warning,error:error,info:info,success:success,addServerMessages:addServerMessages,onlyUnique:onlyUnique,inlineMessages:inlineMessages,position:position,clear:clear}}]});