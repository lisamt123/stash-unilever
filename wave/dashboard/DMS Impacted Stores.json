{
    "label": "DMS Impacted Stores",
    "state": {
        "steps": {
            "all_7": {
                "isFacet": true,
                "isGlobal": false,
                "query": {
                    "measures": [
                        [
                            "count",
                            "*"
                        ]
                    ],
                    "groups": [
                        "Status"
                    ]
                },
                "selectMode": "single",
                "start": [
                    "APROV"
                ],
                "type": "aggregate",
                "useGlobal": true,
                "datasets": [
                    {
                        "name": "DMS_Impacted_Stores"
                    }
                ],
                "visualizationParameters": {
                    "visualizationType": "hbar"
                }
            },
            "all_12": {
                "isFacet": true,
                "isGlobal": false,
                "query": {
                    "measures": [
                        [
                            "count",
                            "*"
                        ]
                    ],
                    "filters": [
                        [
                            "Days_without_invoice",
                            [
                                [
                                    30,
                                    60
                                ]
                            ],
                            ">=<="
                        ]
                    ]
                },
                "selectMode": "single",
                "type": "aggregate",
                "useGlobal": true,
                "start": null,
                "datasets": [
                    {
                        "name": "DMS_Impacted_Stores"
                    }
                ],
                "visualizationParameters": {
                    "visualizationType": "hbar"
                }
            },
            "Account_Owner_16": {
                "isFacet": true,
                "isGlobal": false,
                "query": {
                    "measures": [
                        [
                            "count",
                            "*"
                        ]
                    ],
                    "groups": [
                        "Account_Owner"
                    ],
                    "order": [
                        [
                            -1,
                            {
                                "ascending": false
                            }
                        ]
                    ]
                },
                "selectMode": "single",
                "type": "aggregate",
                "useGlobal": true,
                "start": null,
                "datasets": [
                    {
                        "name": "DMS_Impacted_Stores"
                    }
                ],
                "visualizationParameters": {
                    "visualizationType": "hbar"
                }
            },
            "Account_Owner_6": {
                "isFacet": true,
                "isGlobal": false,
                "query": {
                    "pigql": "q = load \"DMS_Impacted_Stores\";q = filter q by 'Status' in {{ selection(all_7) }};q = filter q by 'Parent_Account' in {{ selection(Parent_Account_2) }};q = filter q by 'Sales_Channel' in {{ selection(Sales_Channel_3) }};q = group q by 'Account_Owner';q = foreach q generate 'Account_Owner' as 'Account_Owner', count() as 'count';",
                    "measures": [
                        [
                            "count",
                            "*"
                        ]
                    ],
                    "groups": [
                        "Account_Owner"
                    ]
                },
                "selectMode": "single",
                "start": [],
                "type": "aggregate",
                "useGlobal": true,
                "datasets": [
                    {
                        "name": "DMS_Impacted_Stores"
                    }
                ],
                "visualizationParameters": {
                    "visualizationType": "hbar"
                }
            },
            "all_15": {
                "isFacet": true,
                "isGlobal": false,
                "query": {
                    "measures": [
                        [
                            "count",
                            "*"
                        ]
                    ],
                    "filters": [
                        [
                            "Days_without_invoice",
                            [
                                [
                                    120
                                ]
                            ],
                            ">"
                        ]
                    ]
                },
                "selectMode": "single",
                "type": "aggregate",
                "useGlobal": true,
                "start": null,
                "datasets": [
                    {
                        "name": "DMS_Impacted_Stores"
                    }
                ],
                "visualizationParameters": {
                    "visualizationType": "hbar"
                }
            },
            "all_13": {
                "isFacet": true,
                "isGlobal": false,
                "query": {
                    "measures": [
                        [
                            "count",
                            "*"
                        ]
                    ],
                    "filters": [
                        [
                            "Days_without_invoice",
                            [
                                [
                                    60,
                                    90
                                ]
                            ],
                            ">=<="
                        ]
                    ]
                },
                "selectMode": "single",
                "type": "aggregate",
                "useGlobal": true,
                "start": null,
                "datasets": [
                    {
                        "name": "DMS_Impacted_Stores"
                    }
                ],
                "visualizationParameters": {
                    "visualizationType": "hbar"
                }
            },
            "Parent_Account_2": {
                "isFacet": true,
                "isGlobal": false,
                "query": {
                    "pigql": "q = load \"DMS_Impacted_Stores\";q = filter q by 'Status' in {{ selection(all_7) }};q = filter q by 'Account_Owner' in {{ selection(Account_Owner_6) }};q = filter q by 'Sales_Channel' in {{ selection(Sales_Channel_3) }};q = group q by 'Parent_Account';q = foreach q generate 'Parent_Account' as 'Parent_Account', count() as 'count';",
                    "measures": [
                        [
                            "count",
                            "*"
                        ]
                    ],
                    "groups": [
                        "Parent_Account"
                    ]
                },
                "selectMode": "single",
                "type": "aggregate",
                "useGlobal": true,
                "start": null,
                "datasets": [
                    {
                        "name": "DMS_Impacted_Stores"
                    }
                ],
                "visualizationParameters": {
                    "visualizationType": "hbar"
                }
            },
            "all_14": {
                "isFacet": true,
                "isGlobal": false,
                "query": {
                    "measures": [
                        [
                            "count",
                            "*"
                        ]
                    ],
                    "filters": [
                        [
                            "Days_without_invoice",
                            [
                                [
                                    90,
                                    120
                                ]
                            ],
                            ">=<="
                        ]
                    ]
                },
                "selectMode": "single",
                "type": "aggregate",
                "useGlobal": true,
                "start": null,
                "datasets": [
                    {
                        "name": "DMS_Impacted_Stores"
                    }
                ],
                "visualizationParameters": {
                    "visualizationType": "hbar"
                }
            },
            "compare_1": {
                "isFacet": true,
                "isGlobal": false,
                "selectMode": "single",
                "type": "multi",
                "useGlobal": true,
                "start": null,
                "datasets": [
                    {
                        "name": "DMS_Impacted_Stores"
                    }
                ],
                "visualizationParameters": {
                    "visualizationType": "comparisontable"
                },
                "columns": [
                    {
                        "header": "Días Sin La Factura",
                        "query": {
                            "pigql": "q = load \"DMS_Impacted_Stores\";q = filter q by 'Status' in {{ selection(all_7) }};q = group q by ('Parent_Account', 'Account_Name', 'Sales_Channel', 'Account_Owner', 'Last_Invoice_Date', 'Last_Invoice_Date_Day', 'Last_Invoice_Date_Month', 'Last_Invoice_Date_Year');q = foreach q generate 'Parent_Account' as 'Parent_Account', 'Account_Name' as 'Account_Name', 'Sales_Channel' as 'Sales_Channel', 'Account_Owner' as 'Account_Owner', 'Last_Invoice_Date_Day' + \"/\" + 'Last_Invoice_Date_Month' + \"/\" + 'Last_Invoice_Date_Year' as 'Last_Invoice_Date', daysBetween(toDate(Last_Invoice_Date, \"dd/MM/yyyy\"),now()) as 'sum_days', count() as 'avg_test';",
                            "measures": [
                                [
                                    "sum",
                                    "days"
                                ]
                            ],
                            "groups": [
                                "Parent_Account",
                                "Account_Name",
                                "Sales_Channel",
                                "Account_Owner",
                                "Last_Invoice_Date"
                            ]
                        }
                    }
                ],
                "globalQuery": {}
            },
            "Sales_Channel_3": {
                "isFacet": true,
                "isGlobal": false,
                "query": {
                    "pigql": "q = load \"DMS_Impacted_Stores\";q = filter q by 'Status' in {{ selection(all_7) }};q = filter q by 'Account_Owner' in {{ selection(Account_Owner_6) }};q = filter q by 'Parent_Account' in {{ selection(Parent_Account_2) }};q = group q by 'Sales_Channel';q = foreach q generate 'Sales_Channel' as 'Sales_Channel', count() as 'count';",
                    "measures": [
                        [
                            "count",
                            "*"
                        ]
                    ],
                    "groups": [
                        "Sales_Channel"
                    ]
                },
                "selectMode": "single",
                "start": [],
                "type": "aggregate",
                "useGlobal": true,
                "datasets": [
                    {
                        "name": "DMS_Impacted_Stores"
                    }
                ],
                "visualizationParameters": {
                    "visualizationType": "hbar"
                }
            },
            "Parent_Account_11": {
                "isFacet": true,
                "isGlobal": false,
                "query": {
                    "measures": [
                        [
                            "count",
                            "*"
                        ]
                    ],
                    "groups": [
                        "Parent_Account"
                    ],
                    "order": [
                        [
                            -1,
                            {
                                "ascending": false
                            }
                        ]
                    ]
                },
                "selectMode": "single",
                "type": "aggregate",
                "useGlobal": true,
                "start": null,
                "datasets": [
                    {
                        "name": "DMS_Impacted_Stores"
                    }
                ],
                "visualizationParameters": {
                    "visualizationType": "hbar"
                }
            },
            "all_5": {
                "isFacet": true,
                "isGlobal": false,
                "query": {
                    "pigql": "q = load \"DMS_Impacted_Stores\";q = filter q by 'Parent_Account' in {{ selection(Parent_Account_11) }};q = filter q by 'Account_Owner' in {{ selection(Account_Owner_16) }};q = filter q by 'Status' in {{ selection(all_7) }};q = filter q by 'Account_Owner' in {{ selection(Account_Owner_6) }};q = filter q by 'Parent_Account' in {{ selection(Parent_Account_2) }};q = filter q by 'Sales_Channel' in {{ selection(Sales_Channel_3) }};q = group q by all;q = foreach q generate count() as 'count';",
                    "measures": [
                        [
                            "count",
                            "*"
                        ]
                    ]
                },
                "selectMode": "single",
                "type": "aggregate",
                "useGlobal": true,
                "start": null,
                "datasets": [
                    {
                        "name": "DMS_Impacted_Stores"
                    }
                ],
                "visualizationParameters": {
                    "visualizationType": "hbar"
                }
            }
        },
        "widgets": {
            "comparetable_1": {
                "type": "comparetable",
                "position": {
                    "zIndex": 3,
                    "x": 300,
                    "y": 750,
                    "w": 1060,
                    "h": 500
                },
                "parameters": {
                    "step": "compare_1",
                    "selectModeOverride": "single"
                }
            },
            "box_1": {
                "type": "box",
                "position": {
                    "zIndex": 4,
                    "x": 20,
                    "y": 90,
                    "w": 230,
                    "h": 430
                },
                "parameters": {
                    "backgroundColor": "rgba(0, 140, 201, 0)"
                }
            },
            "text_1": {
                "type": "text",
                "position": {
                    "zIndex": 4,
                    "x": 20,
                    "y": 100
                },
                "parameters": {
                    "text": "Filtros",
                    "textAlignment": "left",
                    "fontSize": 24
                }
            },
            "box_3": {
                "type": "box",
                "position": {
                    "zIndex": 0,
                    "x": 280,
                    "y": 90,
                    "w": 1100,
                    "h": 1220
                },
                "parameters": {
                    "backgroundColor": "rgba(0, 0, 0, 0)",
                    "borderColor": "rgba(0, 0, 0, 0.25)"
                }
            },
            "box_2": {
                "type": "box",
                "position": {
                    "zIndex": 5,
                    "x": 30,
                    "y": 30,
                    "w": 180,
                    "h": 40
                },
                "parameters": {
                    "backgroundColor": "rgba(0, 140, 201, 0)",
                    "borderColor": "rgba(0, 0, 0, 0)",
                    "imageUrl": "01518000000F5pB"
                }
            },
            "dimfilter_3": {
                "type": "listselector",
                "position": {
                    "zIndex": 100002,
                    "x": 40,
                    "y": 380,
                    "w": 190,
                    "h": 50
                },
                "parameters": {
                    "step": "Account_Owner_6",
                    "expanded": false,
                    "measureField": "count"
                }
            },
            "dimfilter_1": {
                "type": "listselector",
                "position": {
                    "zIndex": 100000,
                    "x": 40,
                    "y": 160,
                    "w": 190,
                    "h": 50
                },
                "parameters": {
                    "step": "Parent_Account_2",
                    "expanded": false,
                    "measureField": "count"
                }
            },
            "number_7": {
                "type": "number",
                "position": {
                    "zIndex": 14,
                    "x": 520,
                    "y": 140,
                    "w": 200
                },
                "parameters": {
                    "step": "all_12",
                    "measureField": "count",
                    "title": "30-60 Días ",
                    "fontSize": 42,
                    "textAlignment": "center"
                }
            },
            "dimfilter_2": {
                "type": "listselector",
                "position": {
                    "zIndex": 100001,
                    "x": 40,
                    "y": 270,
                    "w": 190,
                    "h": 50
                },
                "parameters": {
                    "step": "Sales_Channel_3",
                    "expanded": false,
                    "measureField": "count"
                }
            },
            "number_5": {
                "type": "number",
                "position": {
                    "zIndex": 3,
                    "x": 1150,
                    "y": 140,
                    "w": 200
                },
                "parameters": {
                    "step": "all_15",
                    "measureField": "count",
                    "title": ">120 Días ",
                    "textColor": "rgb(0, 0, 0)",
                    "fontSize": 42,
                    "textAlignment": "center"
                }
            },
            "number_3": {
                "type": "number",
                "position": {
                    "zIndex": 10,
                    "x": 730,
                    "y": 140,
                    "w": 200
                },
                "parameters": {
                    "step": "all_13",
                    "measureField": "count",
                    "title": "60-90 Días",
                    "fontSize": 42,
                    "textAlignment": "center"
                }
            },
            "number_2": {
                "type": "number",
                "position": {
                    "zIndex": 2,
                    "x": 940,
                    "y": 140,
                    "w": 200
                },
                "parameters": {
                    "step": "all_14",
                    "measureField": "count",
                    "title": "90-120 Días ",
                    "textColor": "rgb(0, 0, 0)",
                    "fontSize": 42,
                    "textAlignment": "center"
                }
            },
            "number_1": {
                "type": "number",
                "position": {
                    "zIndex": 4,
                    "x": 290,
                    "y": 140,
                    "w": 230
                },
                "parameters": {
                    "step": "all_5",
                    "measureField": "count",
                    "title": "Tiendas Impactadas",
                    "fontSize": 42,
                    "textAlignment": "center",
                    "exploreLink": false
                }
            },
            "box_4": {
                "type": "box",
                "position": {
                    "zIndex": 1,
                    "x": 280,
                    "y": 90,
                    "w": 1100,
                    "h": 160
                },
                "parameters": {
                    "backgroundColor": "rgba(0, 0, 0, 0)"
                }
            },
            "text_2": {
                "type": "text",
                "position": {
                    "zIndex": 4,
                    "x": 300,
                    "y": 280
                },
                "parameters": {
                    "text": "Tiendas Impactadas por Vendedor",
                    "fontSize": 24
                }
            },
            "text_7": {
                "type": "text",
                "position": {
                    "zIndex": 13,
                    "x": 300,
                    "y": 710
                },
                "parameters": {
                    "text": "Tiendas Impactadas",
                    "fontSize": 24
                }
            },
            "chart_2": {
                "type": "chart",
                "position": {
                    "zIndex": 2,
                    "x": 300,
                    "y": 320,
                    "w": 510,
                    "h": 360
                },
                "parameters": {
                    "step": "Account_Owner_16",
                    "visualizationType": "hbar"
                }
            },
            "chart_1": {
                "type": "chart",
                "position": {
                    "zIndex": 2,
                    "x": 850,
                    "y": 320,
                    "w": 510,
                    "h": 360
                },
                "parameters": {
                    "step": "Parent_Account_11",
                    "visualizationType": "hbar"
                }
            },
            "text_6": {
                "type": "text",
                "position": {
                    "zIndex": 12,
                    "x": 850,
                    "y": 280
                },
                "parameters": {
                    "text": "Tiendas Impactadas por Distribuidor",
                    "fontSize": 24
                }
            }
        },
        "layouts": []
    },
    "datasets": [
        {
            "id": "0Fb180000005QWNCA2",
            "name": "DMS_Impacted_Stores"
        }
    ]
}