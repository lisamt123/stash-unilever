<!--  
*************************************************************************
*@Author: Cognizant
*@Created Date: 17/06/2015
*@Description:Â This page is used for creating project related tasks by user
*@Copyright Â© 2015  Unilever  
*************************************************************************
-->

<apex:page standardController="IPM_Task__c" extensions="IPM_NewTask,IPM_GetHelpDoc"  sidebar="false" standardStylesheets="true" showHeader="false">
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/bootstrap.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_Buttons.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'assets/font-awesome/css/font-awesome.min.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_AddTaskProSetup.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_HomePage.css')}"/> 
    <div class="">
         <div class="" id="EditTask">
               <apex:form id="form">
                    <div class="">
                    <div class="col-xs-12">
                        <div class="">
                        
                            <!-- To place the help symbol in the top right hand corner of page -->
                            <apex:outputPanel layout="block" styleClass="SecButtonSet delete pull-right" >
                                <apex:outputLink value="{!URL}" id="theLink" styleClass="icoButton question" target="_blank" title="{!$Label.IPM_Help}">?</apex:outputLink>
                            </apex:outputPanel>                        
                        
                            <apex:outputLabel value="To-do" styleClass="fieldLabel fieldFont" id="todoLabel"/>
                        </div>
                        <div class="inputField">
                            <apex:inputField value="{!tasks.IPM_Task_Name__c}"
                                styleClass="fieldFont" required="true" id="taskName"/>
                        </div>
                    </div>
                    <div class="col-xs-12 middlePanel">
                        <div class="">
                            <apex:outputLabel value="Gate document & Phase"
                                styleClass="fieldLabel fieldFont" id="documentPhase"/>
                        </div>
                        <div class="gatedocModal">
                            <div class="inputField">
                                <apex:inputText value="{!tasks.IPM_Type_of_Gate__c}"
                                    styleClass="fieldFont" disabled="true" id="typeOfGate">
                                    <apex:actionSupport event="onchange"
                                        rerender="blockToRerender, scriptToRerender"
                                        action="{!getSections}" id="onchangeGetSectionsGate" />
                                </apex:inputText>
                            </div>
                        </div>
                        <div class="phaseModal">
                            <div class="inputField">
                                <apex:inputText value="{!tasks.IPM_Phase__c}"
                                    styleClass="fieldFont" disabled="true" id="taskPhase">
                                    <apex:actionSupport event="onchange" rerender="blockToRerender"
                                        action="{!getSections}" id="onchangeGetSectionsPhase"/>
                                </apex:inputText>
                            </div>
                        </div>

                    </div>

                    <apex:outputPanel id="blockToRerender">
                        <div class="col-xs-12" style="display:{!if(displayDueDate,'block','none')};">
                        <div class=""><apex:outputLabel value="Functional role" styleClass="fieldLabel fieldFont" id="functionalRole"/></div>
                        <apex:outputPanel >
                        <div class="inputField">
                                <apex:selectList size="1" value="{!tasks.IPM_Function__c}">
                                    <apex:selectOptions value="{!FuntionalRolelist}" /> 
                                    <apex:actionSupport event="onchange" rerender="blockToRerender" action="{!getSections}"/>
                                </apex:selectList>
                            </div>
                        </apex:outputPanel>
                         <div class=""><apex:outputLabel value="Section" styleClass="fieldLabel fieldFont" id="sectionLabel"/></div>
                        <div class="inputField">
                            <apex:selectList size="1" value="{!docSecList}" >
                                <apex:selectOptions value="{!Sectionlist}"  /> 
                            </apex:selectList>
                         </div>
                        
                        
                        <div class=""><apex:outputLabel value="Assignee" styleClass="fieldLabel fieldFont" id="taskAssignee"/></div>
                        <apex:outputText value="{!userIdName[tasks.IPM_Assignee__c]}" rendered="{!if(tasks.IPM_Assignee__c != null,true,false)}" id="userTasksAssignee"/>                    
                        <div class=""><apex:outputLabel value="Due Date" styleClass="fieldLabel fieldFont" id="dueDate"/> <i>{!$Label.IPM_OptionalLabel}</i></div>
                        <div class="inputField">
                            <apex:inputField value="{!tasks.IPM_Due_Date1__c}" styleClass="dateInputBox calendar" id="dueDate1">
                            </apex:inputField>   
                            <apex:outputPanel id="errMassage" styleClass="errorBlock" layout="block" rendered="{!displayError}">
                                <div><span ><apex:pagemessages id="thePagemessages"></apex:pagemessages></span></div>
                            </apex:outputPanel>            
                        </div>
                    </div>
                    </apex:outputPanel>
                    </div>
                    
                    <div class="buttonmarRight ipmButtonGroup pull-right">                
                        <apex:commandLink id="addLink" action="{!doSaveTasks}" value="Add" styleClass="ipmButton green" rendered="{!if(taskId == null,true,false)}" reRender="form, scriptToRerender" onComplete="{!if(AND(validate,!displayError),'pageclose()','')};"/>
                         <apex:commandLink id="saveLink" action="{!doSaveTasks}" value="Save" styleClass="ipmButton green" rendered="{!if(taskId != null,true,false)}" onComplete="pageclose();"/></div>
            
                <apex:outputPanel id="popup">
                    <apex:outputPanel styleClass="popupBg" layout="block"
                        rendered="{!displayPopUp}" id="popupBg"/>
                    <apex:outputPanel styleClass="popup" layout="block"
                        rendered="{!displayPopUp}" id="popup1">
                        <div class="popupContent">{!$Label.IPM_NoResource}</div>
                        <div class="ipmButtonGroup pull-center"></div>
                    </apex:outputPanel>
                </apex:outputPanel>
            </apex:form>
        </div>
    </div>    
    <script src="{!URLFOR($Resource.IPM_Resource, 'js/jquery.js')}" type="text/javascript"></script>
    <script src="{!URLFOR($Resource.IPM_Resource, 'js/bootstrap.min.js')}" type="text/javascript"></script>     
    <apex:outputPanel id="scriptToRerender">
        <script type="text/javascript">
        var IPMAppComp = { projectId:'{!projectId}', pageRefProSetupView:'{!$Label.IPM_ProjectSetUpViewPageRef}' };   
        </script>
    <script src="{!URLFOR($Resource.IPM_Resource, 'js/IPM_AddTaskWizard.js')}" type="text/javascript"></script> 
    </apex:outputPanel>
</apex:page>