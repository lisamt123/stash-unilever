<apex:page standardController="VPM_PurchasingRequests__c">  
    <apex:includeScript value="/soap/ajax/15.0/connection.js"/>
    <!--apex:stylesheet value="{!URLFOR($Resource.VPMstyle)}"/-->
    <apex:stylesheet value="{!URLFOR($Resource.vpmstyles, 'vpmstyles.css')}" />
    <style>
    
    </style>
    <script type = "text/javascript">
    window.onload=function() {
        var criteria1 = "{!VPM_PurchasingRequests__c.VPM_Status__c}"; 
        // alert({!$ObjectType.VPM_PurchasingRequests__c.accessible})
        
        if(criteria1=="FLS Review") {
            alert("Please Approve / Reject the Request before completing the Advanced Form");
            //return false;
        }
    };
    function showValuesFunc(){
        var pur = new sforce.SObject("VPM_PurchasingRequests__c");
        
        //alert("Function Called!");
        console.log(JSON.stringify(pur));
        var vendorName = document.getElementById('j_id0:j_id4:i:f:pb:d:VPM_SearchVendorName.input').value;
        var street = document.getElementById('j_id0:j_id4:i:f:pb:d:VPM_SearchStreet1.input').value;
        var zipCode = document.getElementById('j_id0:j_id4:i:f:pb:d:VPM_SearchZIPPostcode.input').value;
        var taxCode = document.getElementById('j_id0:j_id4:i:f:pb:d:VPM_SearchTaxCode.input').value;
        if(vendorName && street && zipCode && taxCode!="")
    		alert("Input Values:\n "+ vendorName +"\n"+ street +"\n"+ zipCode +"\n"+ taxCode);
        else
            alert("Input non-empty values in the fields");
    }
    </script>
   
 
    <flow:interview name="VPM_PurchasingRequestAdvancedForm" finishLocation="/{!VPM_PurchasingRequests__c.Id}" rendered="{!VPM_PurchasingRequests__c.VPM_Status__c != 'FLS Review'}" >    
        <apex:param name="VPM_PurchasingRequestID" value="{!VPM_PurchasingRequests__c.Id}"/>    
    </flow:interview>
    
    <apex:detail subject="{!VPM_PurchasingRequests__c.Id}" rendered="{!VPM_PurchasingRequests__c.VPM_Status__c == 'FLS Review'}" showChatter="true"/>
    <apex:pageBlock >
        <apex:form > 
            <apex:commandButton value="Show values" onclick="showValuesFunc()"/>   
        </apex:form>  
    </apex:pageBlock> 
    <apex:pageBlock rendered="{!$ObjectType.VPM_PurchasingRequests__c.accessible}">
        <p>
            This text will display if you can see the Purchasing Request object.
        </p>
    </apex:pageBlock>
    <apex:pageBlock rendered="NOT({!$ObjectType.VPM_PurchasingRequests__c.accessible})">
        <p>
            Sorry, but you cannot see the data because you do not have access to the Purchasing Request object.
        </p>
    </apex:pageBlock>
</apex:page>