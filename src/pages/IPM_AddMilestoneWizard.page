<!--  
*************************************************************************
*@Description:This page is used to provide add milestone wizard
*@Author: Cognizant
*@Created Date: 12/03/2015 
*@Copyright @ 2015  Unilever  
*************************************************************************
-->
<apex:page standardController="IPM_Milestone__c" extensions="IPM_Milestone,IPM_GetHelpDoc"  sidebar="false" standardStylesheets="true" showHeader="false">      
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/bootstrap.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_Buttons.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'assets/font-awesome/css/font-awesome.min.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_Table.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_Checkbox.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_PageHeader.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_AddTaskWizard.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/datepicker.css')}"/> 
    <div class="container-fluid" id="ipmAddMilestoneTab">
        <!-- To place the help symbol in the top right hand corner of page -->
        <apex:outputPanel layout="block" styleClass="SecButtonSet delete pull-right" >
            <apex:outputLink value="{!URL}" id="theLink" styleClass="icoButton question" target="_blank" title="{!$Label.IPM_Help}">?</apex:outputLink>
        </apex:outputPanel> 
    
        <ul class="ipmMilestoneTabs">
            <li class="selectList tabOdd"><span>{!$Label.IPM_SELECT_FROM_LIST}</span></li>
            <li class="newMstone tabEven"><span>{!$Label.IPM_CREATE_NEW}</span></li>
        </ul> 
                
        <div class="ipmMilestoneContent" id="selectList">
            <apex:form >
                <apex:dataTable value="{!milestones}" var="p" id="tskPanel" styleClass="ipmTable table table-bordered table-fixed-header addMilestoneList">
                    <apex:column styleClass="col-xs-1">
                        <div class="additionalMstone">
                            <apex:inputCheckbox value="{!p.checked}"/>
                        </div>
                    </apex:column>
                    <apex:column headerValue="{!$Label.IPM_ADDIIONAL_MILESTONES}" styleClass="col-xs-5">
                        <apex:outputfield value="{!p.mile.IPM_Name__c}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.IPM_PhaseLabel}" styleClass="col-xs-3">
                        <apex:outputfield value="{!p.mile.IPM_Phase__c}" />
                    </apex:column>
                    <apex:column headerValue="{!$Label.IPM_DUE_DATE}" styleClass="col-xs-3">
                        <apex:inputField value="{!p.mile.IPM_Due_Date__c}" styleClass="dateInputBox calendar">
                        <apex:pageMessage summary="{!$Label.IPM_Milestone_Due_Date_Error}" severity="error" id="messages" strength="0" rendered="{!p.errorRecord}"/> 
                        </apex:inputField>
                    </apex:column>                         
                </apex:dataTable>
                <div class="ipmButtonGroup pull-right">
                    <apex:commandLink action="{!createMileStones}" value="{!$Label.IPM_ADD}" styleClass="ipmButton green" rerender="tskPanel" onComplete="{!if(validateSuccess,'pagecloseProSetUp()','')};" />   
                </div>
            </apex:form>
        </div>
        
        <div class="ipmMilestoneContent" id="newMstone"> 
            <div class="row" id="EditTask">
                <apex:form id="form">
                    <apex:actionStatus id="stat">
                        <apex:facet name="start"> 
                            <apex:outputPanel layout="block">
                                <apex:panelGrid columns="2">
                                    <apex:panelGroup >
                                        <apex:image value="/img/loading.gif" title="{!$Label.IPM_Processing_Msg}" />
                                    </apex:panelGroup>
                                    <apex:panelGroup >
                                        <div class="messageText">{!$Label.IPM_Loading_Msg}</div>
                                    </apex:panelGroup> 
                                </apex:panelGrid>
                            </apex:outputPanel>
                        </apex:facet>
                        <apex:facet name="stop"> 
                            <apex:outputPanel styleClass="tableContainer" layout="block">   
                                <div class="col-xs-12 marginTop">
                                    <div class=""><apex:outputLabel value="{!$Label.IPM_MILESTONE}" styleClass="fieldLabel fieldFont" /></div>
                                    <div class="inputField"><apex:inputField value="{!milestoneObj.IPM_Name__c}" styleClass="fieldFont" required="true" /></div>
                                </div>
                                <div class="col-xs-12">
                                    <div class=""><apex:outputLabel value="{!$Label.IPM_PhaseLabel}" styleClass="fieldLabel fieldFont"/></div>
                                    <div class="inputField">
                                        <apex:inputField value="{!milestoneObj.IPM_Phase__c}" styleClass="fieldFont" required="true">
                                        </apex:inputField>    
                                    </div>
                                </div>
                                <apex:outputPanel id="blockToRerender">
                                    <div class="col-xs-12 addMilestoneDueDate">
                                        <div class=""><apex:outputLabel value="{!$Label.IPM_DUE_DATE}" styleClass="fieldLabel fieldFont"/></div>
                                        <div class="inputField">
                                            <apex:inputField value="{!milestoneObj.IPM_Due_Date__c}" id="dueDate" styleClass="dateInputBox dateInputBoxAdd calendar" required="true">              
                                            </apex:inputField>
                                        </div>
                                    </div>
                                </apex:outputPanel>
                                <div class="marginTop buttonmarRight ipmButtonGroup pull-right">
                                    <apex:commandLink action="{!saveMilestones}" value="{!$Label.IPM_ADD}" styleClass="ipmButton green" rendered="{!if(milestoneId == null,true,false)}" reRender="form" onComplete="{!if(validateSuccess,'pagecloseProSetUp()','')};"/>                      
                                    <apex:commandLink action="{!saveMilestones}" value="{!$Label.IPM_Save_button}" styleClass="ipmButton green" rendered="{!if(milestoneId != null,true,false)}" onComplete="pagecloseProSetUp();"/>
                                </div>
                            </apex:outputPanel>
                        </apex:facet>
                    </apex:actionStatus>    
                </apex:form> 
                <apex:form >
                    <apex:outputPanel id="popup">
                        <apex:outputPanel styleClass="popupBg" layout="block" rendered="{!displayPopUp}"/>
                        <apex:outputPanel styleClass="popup" layout="block" rendered="{!displayPopUp}">
                            <div class="popupContent">{!$Label.IPM_DO_YOU_WANT_TO_CRT_PRO_RESOURCE}</div>
                            <div class="ipmButtonGroup pull-center">    
                            </div>
                        </apex:outputPanel>
                    </apex:outputPanel>
                </apex:form>
            </div>
        </div>
    </div>    
    <script src="{!URLFOR($Resource.IPM_Resource, 'js/jquery.js')}" type="text/javascript"></script>
    <script src="{!URLFOR($Resource.IPM_Resource, 'js/bootstrap.js')}" type="text/javascript"></script>
    <script src="{!URLFOR($Resource.IPM_Resource, 'js/bootstrap-datepicker.js')}" type="text/javascript"></script>
        <script type="text/javascript">
          var IPMAppComp = { projectId:'{!projectId}', ProjectWizard:'{!JSINHTMLENCODE(ProjectWizard)}', pageRefProSetupView:'{!$Label.IPM_ProjectSetUpViewPageRef}', pageRefTask:'{!$Label.IPM_TasklistPageRef}' };    
        </script>    
    <script src="{!URLFOR($Resource.IPM_Resource, 'js/IPM_AddMilestone.js')}" type="text/javascript"></script>
</apex:page>