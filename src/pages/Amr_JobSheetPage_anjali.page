<apex:page controller="Amr_JobSheetPageController_anjali">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script>
        
        $(document).ready(function(){
        // $("[id$=prodtype]").prop("disabled",false);
        
        });
        
        function Edit(id) {
          //alert(id);
          EditSaving(id);
        } 
        
        function save(id,Production){
         
          
          SaveData(id,Production);
        }
        
        function Delete(id) {
          alert(id);
          DeleteSaving(id);
        } 
       
        
    </script> 
    <apex:form >
        <apex:actionFunction name="EditSaving" action="{!SaveUpdatedData}" ReRender="submittedData">
                <apex:param name="one" value="" assignTo="{!IdValue}"/>    
        </apex:actionFunction>
        
        <apex:actionFunction name="DeleteSaving" action="{!deleteQuote}" ReRender="submittedData">
                <apex:param name="one" value="" assignTo="{!IdDeleted}"/>    
        </apex:actionFunction>
        
       <apex:actionFunction name="SaveData" action="{!SaveNewData}" ReRender="submittedData">
                <apex:param name="one" value="" assignTo="{!IdNeedToUpdate}"/>   
                <apex:param name="two" value="" assignTo="{!productionType}"/>  
                
        </apex:actionFunction>
        
    </apex:form>
    
    
    <apex:form >
    
        <apex:pageBlock >
            <apex:pageMessages id="msgs" />

            <b><apex:outputLabel >Job Sheet</apex:outputLabel></b>
            <br />
            <br />
          
            <br />
            <br />

            <apex:pageBlockSection title="New Saving line" columns="1"
                collapsible="false">

                <apex:dataTable value="{!lstQuoteToaddRow}" var="QuoteObj"
                    styleClass="tableClass" rowClasses="odd,even" border="1"
                    cellspacing="5" cellpadding="5" id="newSavingLine">
                    <apex:column >
                        <apex:facet name="header">AdManager No</apex:facet>
                        <apex:outputText value="{!adManagerNumber}" />
                    </apex:column>
                    
                    <!-- <apex:column >
                        <apex:facet name="header">Production Type:</apex:facet>
                        <apex:inputField value="{!QuoteObj.Production_Type__c}" />
                    </apex:column> -->
                    <apex:column >
                        <apex:facet name="header">No Of Masters</apex:facet>
                        <apex:inputField value="{!QuoteObj.No_of_Masters__c}" />
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">Duration of Masters</apex:facet>
                        <apex:inputField value="{!QuoteObj.Duration_of_Masters__c}" />
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">No of Additional Films</apex:facet>
                        <apex:inputField value="{!QuoteObj.No_of_Additional_Films__c}" />
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">Duration Of Additional Films</apex:facet>
                        <apex:inputField value="{!QuoteObj.Duration_of_Additional_Films__c}" />
                    </apex:column>
                   
                    <apex:column >
                        <apex:facet name="header">No of Shoot Days</apex:facet>
                        <apex:inputField value="{!QuoteObj.No_of_shoot_days__c}" />
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">Stage RAP engaged</apex:facet>
                        <apex:inputField value="{!QuoteObj.Stage_RAP_engaged__c}" />
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">Shoot Location </apex:facet>
                      
                        <apex:selectList value="{!selectedCountry}" multiselect="true" size="5">
                         <apex:selectOptions value="{!shootLocation}"/>
                      </apex:selectList>

                    </apex:column>
                    
                    <apex:column >
                        <apex:facet name="header">Script Title</apex:facet>
                        <apex:inputField value="{!QuoteObj.Script_Title__c}" />
                    </apex:column>
                    <apex:column >
                        <apex:facet name="header">Has there been a scope re-brief?</apex:facet>
                        <apex:inputField value="{!QuoteObj.Scope_re_brief__c}" />
                    </apex:column>
                
                   <apex:column >
                        <apex:facet name="header">Folder</apex:facet>
                        <apex:inputField value="{!QuoteObj.Folder_Name__c}" />
                    </apex:column>
                  <apex:column > 
              
               <apex:facet name="header"></apex:facet>
               
                     <apex:inputFile value="{!document.body}"
                            filename="{!document.name}" />   
                 </apex:column> 
                    

                    <apex:column >
                        <apex:commandLink value="+" action="{!addRowSavingLine}" />
                    </apex:column>


                </apex:dataTable>
                
                
            </apex:pageBlockSection>
        </apex:pageBlock>
        
         
       <apex:actionRegion > 
            <apex:pageBlock >
                <apex:pageBlockSection title="Submitted Savings" columns="1"
                    collapsible="true">
              
                    <apex:pageblockTable value="{!quoteList}" var="quoteObj"
                        cellpadding="20" border="1" id="submittedData">
                         
                        <!-- <apex:column > 
                           {!quoteObj.id}
                           <apex:facet name="header"></apex:facet>
                            <apex:inputhidden value="{!quoteObj.id}" id="theField1"/>
                            <apex:inputFile value="{!document.body}" filename="{!document.name}"  onclick="test()"/>
                            
                            
                        <apex:commandButton action="{!uploadDocument}" value="Upload" >
                           
                        </apex:commandButton>
                       </apex:column>  --> 
                    
                     <apex:column >
                            <apex:facet name="header">Enter Quote</apex:facet>
                            <apex:outputLink target="_blank" value="Amr_SavingQuote?id={!quoteObj.id}">Quote</apex:outputLink>
                        </apex:column>
                        
                        <apex:column >
                            <apex:facet name="header">Upload Files</apex:facet>
                            <apex:outputLink target="_blank" value="Amr_Multiple_Document_Upload?id={!quoteObj.id}">Upload More File</apex:outputLink>
                        </apex:column>
                        
                        
                        <apex:column >
                            
                            
                            <apex:commandLink rendered="{!if(IdValue == quoteObj.id ,false,true) ||(  isEdit  == true && isSave  == false)}" onclick="Edit('{!quoteObj.id}');return Null;">Edit</apex:commandLink>&nbsp;&nbsp;
                          
                            <apex:commandLink rendered="{!if(IdValue == quoteObj.id ,true,false) && ( isSave  == true && isEdit  == false)}" action="{!SaveNewData}"  >Save</apex:commandLink>&nbsp;&nbsp;
                            <apex:commandLink onclick="Delete('{!quoteObj.id}');return Null;" rendered="{!if(IdValue == quoteObj.id ,false,true) ||(  isEdit  == true && isSave  == false)}">Delete</apex:commandLink>
                            
                        </apex:column>
                        
                        <apex:column >
                            <apex:facet name="header">Download Files</apex:facet>
                            <apex:outputLink target="_blank" value="Amr_DownloadFiles?id={!quoteObj.id}">Download</apex:outputLink>
                        </apex:column>
                         
                       
                        <apex:column headervalue="ADManager No:">
                     
                            <apex:outputText value="{!quoteObj.Job_Details__r.AdManagerText__c}" />
                        </apex:column>
                        
                       
                      <!--  <apex:column rendered="{!if(IdValue == quoteObj.id,true,false)&& ( isSave  == true && isEdit  == false && display == false)}" headerValue="Production Type:">
                            <apex:inputField value="{!quoteObj.Production_Type__c}" />
                       </apex:column>
                        <apex:column headervalue="Production Type:"
                            value="{!quoteObj.Production_Type__c}" rendered="{!if(IdValue == quoteObj.id,false,true)||(  isEdit  == true && isSave  == false) || (display == true)}" id="prodtype"/>
                          --> 
                         
                          <apex:outputText value="{!isSave}">{!isSave}</apex:outputText>
                        <apex:column rendered="{!if(IdValue == quoteObj.id,true,false) && ( isSave  == true && isEdit  == false && display == false)}" headerValue="No Of Masters:">
                             <apex:inputField value="{!quoteObj.No_of_Masters__c}" />
                       </apex:column>
                        <apex:column headervalue="No Of Masters"
                            value="{!quoteObj.No_of_Masters__c}" rendered="{!if(IdValue == quoteObj.id,false,true)||(  isEdit  == true && isSave  == false) || (display == true)}" />
                            
                            
                         
                      <apex:column rendered="{!if(IdValue == quoteObj.id,true,false)&& ( isSave  == true && isEdit  == false && display == false) }" headerValue="Duration of Masters:">
                            
                            <apex:inputField value="{!quoteObj.Duration_of_Masters__c}" />
                       </apex:column>
                        <apex:column headervalue="Duration of Masters"
                            value="{!quoteObj.Duration_of_Masters__c}" rendered="{!if(IdValue == quoteObj.id,false,true)||(  isEdit  == true && isSave  == false) || (display == true)}"/>
                            
                          
                        <apex:column rendered="{!if(IdValue == quoteObj.id,true,false)&& ( isSave  == true && isEdit  == false && display == false)}" headerValue="No of Additional Films:">
                            
                            <apex:inputField value="{!quoteObj.No_of_Additional_Films__c}" />
                       </apex:column>   
                        <apex:column headervalue="No of Additional Films"
                            value="{!quoteObj.No_of_Additional_Films__c}" rendered="{!if(IdValue == quoteObj.id,false,true)||(  isEdit  == true && isSave  == false) || (display == true)}"/>
                            
                        
                       <apex:column rendered="{!if(IdValue == quoteObj.id,true,false)&& ( isSave  == true && isEdit  == false && display == false)}" headerValue="Duration Of Additional Films:">  
                            <apex:inputField value="{!quoteObj.Duration_of_Additional_Films__c}" />
                       </apex:column>   
                        <apex:column headervalue="Duration Of Additional Films"
                            value="{!quoteObj.Duration_of_Additional_Films__c}" rendered="{!if(IdValue == quoteObj.id,false,true)||(  isEdit  == true && isSave  == false) || (display == true)}"/>
                            
                       
                        <apex:column rendered="{!if(IdValue == quoteObj.id,true,false)&& ( isSave  == true && isEdit  == false && display == false)}" headerValue="Total No of Films:">
                            
                            <apex:inputField value="{!quoteObj.Total_no_of_films__c}" />
                       </apex:column>     
                        <apex:column headervalue="Total No of Films"
                            value="{!quoteObj.Total_no_of_films__c}" rendered="{!if(IdValue == quoteObj.id,false,true)||(  isEdit  == true && isSave  == false) || (display == true)}"/>
                            
                          
                            <apex:column rendered="{!if(IdValue == quoteObj.id,true,false)&& ( isSave  == true && isEdit  == false && display == false)}" headerValue="No of Shoot Days:">
                            
                            <apex:inputField value="{!quoteObj.No_of_shoot_days__c}" />
                       </apex:column>    
                        <apex:column headervalue="No of Shoot Days"
                            value="{!quoteObj.No_of_shoot_days__c}" rendered="{!if(IdValue == quoteObj.id,false,true)||(  isEdit  == true && isSave  == false) || (display == true)}"/>
                            
                            
                         
                       <apex:column rendered="{!if(IdValue == quoteObj.id,true,false)&& ( isSave  == true && isEdit  == false && display == false)}" headerValue="Stage RAP engaged:">
                            
                            <apex:inputField value="{!quoteObj.Stage_RAP_engaged__c}" />
                       </apex:column>     
                        <apex:column headervalue="Stage RAP engaged"
                            value="{!quoteObj.Stage_RAP_engaged__c}"  rendered="{!if(IdValue == quoteObj.id,false,true)||(  isEdit  == true && isSave  == false) || (display == true)}"/>
                            
                            
                           
                        <apex:column rendered="{!if(IdValue == quoteObj.id,true,false)&& ( isSave  == true && isEdit  == false && display == false)}" headerValue="Shoot Location">
                            
                          
                            
                             <apex:selectList value="{!selectedCountry}" multiselect="true" size="5">
                               <apex:selectOptions value="{!shootLocation}"/>
                             </apex:selectList>
                      </apex:column>         
                        <apex:column headervalue="Shoot Location"
                            value="{!quoteObj.Shoot_Location__c}" rendered="{!if(IdValue == quoteObj.id,false,true)||(  isEdit  == true && isSave  == false) || (display == true)}"/>
                          
                         
                       <apex:column rendered="{!if(IdValue == quoteObj.id,true,false)&& ( isSave  == true && isEdit  == false && display == false)}" headerValue="Script Title">
                            
                            <apex:inputField value="{!quoteObj.Script_Title__c}" />
                       </apex:column>     
                        <apex:column headervalue="Script Title"
                            value="{!quoteObj.Script_Title__c}" rendered="{!if(IdValue == quoteObj.id,false,true)||(  isEdit  == true && isSave  == false) || (display == true)}"/>
                          
                         <apex:column rendered="{!if(IdValue == quoteObj.id,true,false)&& ( isSave  == true && isEdit  == false && display == false)}" headerValue="Has there been a scope re-brief?">
                            
                            <apex:inputField value="{!quoteObj.Scope_re_brief__c}" />
                       </apex:column>     
                        <apex:column headervalue="Has there been a scope re-brief?"
                            value="{!quoteObj.Scope_re_brief__c}"  rendered="{!if(IdValue == quoteObj.id,false,true)||(  isEdit  == true && isSave  == false) || (display == true)}"/>
                            
                          <apex:column headervalue="No Of Quotes" value="{!quoteObj.Number_Of_Quotes__c}" />
                          <apex:column headervalue="Average of all total opening quotes" value="{!quoteObj.Average_Total_Opening_Quotes__c}" />
                          <!--<apex:column headervalue="€ Saving - Average of Quotes" value="{!quoteObj.Saving_Average_of_Quotes__c}" />   --> 
                        <apex:column headervalue="€ Saving - Average of Quotes" value="{!quoteObj.Euro_Saving_Average_of_Quotes__c}" />
                         <!-- <apex:column headervalue="% Saving - Average of Quotes" value="{!quoteObj.Percentage_Saving_Average_of_Quotes__c}" />    -->
                         <apex:column headervalue="% Saving - Average of Quotes" value="{!quoteObj.Percentage_Saving_Average_of_Quote__c}" />  
                          <apex:column headervalue="Cost Per Master" value="{!quoteObj.Cost_Per_Master__c}" /> 
                          <apex:column headervalue="Cost per master per shoot day" value="{!quoteObj.Cost_per_master_per_shoot_day__c}" />   
                          <apex:column headervalue="€ Saving - Accepted Quote" value="{!quoteObj.Saving_Accepted_Quote_Euro__c }" />  
                          <apex:column headervalue="% Saving - Accepted Quote" value="{!quoteObj.Percentage_Saving_Accepted_Quote__c}" />  
                    </apex:pageblockTable>
                    
                </apex:pageBlockSection>
            </apex:pageBlock>
       </apex:actionRegion>

    </apex:form>
</apex:page>