<!-- VF Created By Jamal -->
<apex:page standardController="Oblix_Project_Assets__c" extensions="Oblix_Ctrl02OverrideAssetNew" id="Page" tabstyle="Oblix_Project_Assets__c">
 <apex:form id="myForm"> 
  <script type="text/javascript"> 
  function openLookup(baseURL, width, modified, searchParam){
    var originalbaseURL = baseURL;
    var originalwidth = width;
    var originalmodified = modified;
    var originalsearchParam = searchParam;
 
    var lookupType = baseURL.substr(baseURL.length-3, 3);
    if (modified == '1') baseURL = baseURL + searchParam;
 
    var isCustomLookup = false;
 
    // Following "001" is the lookup type for Account object so change this as per your standard or custom object
    if(lookupType == "a6N"){
 
      var urlArr = baseURL.split("&");
      var txtId = '';
      if(urlArr.length > 2) {
        urlArr = urlArr[1].split('=');
        txtId = urlArr[1];
      }
 		baseURL = "/apex/Oblix_VF03CustomAssetLookup?txt=" + txtId;
      // Following is the url of Custom Lookup page. You need to change that accordingly
      var assetType = '{!asset.Asset_Type__c}';
      var categoryType = '{!asset.Sub_Category__c}'; 
      if( assetType != null && assetType != ''){
      	baseURL += "&assetType="+assetType;
      }
      if(categoryType != null && categoryType != ''){
      	baseURL += "&subCategory="+categoryType;
      	
      }
 	  
      // Following is the id of apex:form control "myForm". You need to change that accordingly
      baseURL = baseURL + "&frm=" + escapeUTF("{!$Component.myForm}");
      if (modified == '1') {
        baseURL = baseURL + "&lksearch=" + searchParam;
      }
      // Following is the ID of inputField that is the lookup to be customized as custom lookup
      if(txtId.indexOf('Asset') > -1 ){
        isCustomLookup = true;
      }
    }
 
    if(isCustomLookup == true){
      openPopup(baseURL, "lookup", 350, 480, "width="+width+",height=480,toolbar=no,status=no,directories=no,menubar=no,resizable=yes,scrollable=no", true);
    }
    else {
      if (modified == '1') originalbaseURL = originalbaseURL + originalsearchParam;
      openPopup(originalbaseURL, "lookup", 350, 480, "width="+originalwidth+",height=480,toolbar=yes,status=yes,directories=no,menubar=yes,resizable=yes,scrollable=no", true);
    } 
  }
</script>
  
<apex:sectionHeader title="Project Asset"  subtitle="{!IF(asset.Id<>null, asset.Name, 'New Asset')}" />
	<apex:actionFunction action="{!NULL}" name="changeType" reRender="myForm"/>
	<!-- ADMIN RT  -->
	<apex:pageBlock title="Admin RT" rendered="{!asset.RecordTypeId == rt_Admin}">
		<apex:pageBlockButtons >
			<apex:commandButton action="{!save}" value="Save"/>
			<apex:commandButton action="{!Cancel}" value="Cancel"/>
		</apex:pageBlockButtons>
		<apex:pageBlockSection >
				<apex:inputField value="{!asset.Name}"></apex:inputField>
				<!-- <apex:inputField id="assetType" value="{!asset.Asset_Type__c}" ></apex:inputField>--><!-- onChange="changeType();"-->
		         
		        <apex:inputField value="{!asset.Agency_Projects__c}"  />
		        <apex:inputField id="SubCategory" value="{!asset.Sub_Category__c}" onChange="changeType();"></apex:inputField>
		        <apex:inputField value="{!asset.Quantity__c}"  /> 
		        <apex:inputField value="{!asset.Channels__c}"  /> 
		        <apex:inputField value="{!asset.Location__c}"  /> 
		        <apex:inputField id="Asset1" value="{!asset.FULL_Description__c}"  />
		        <apex:pageBlockSectionItem ></apex:pageBlockSectionItem>
		        <apex:inputField value="{!asset.Additional_Description__c}"  />		
		</apex:pageBlockSection>
		
	</apex:pageBlock>
    <!-- Audio Visual RT  -->
    <apex:pageBlock id="PageBlockAV" title="Project Asset" rendered="{!asset.RecordTypeId == rt_AudioVisuel}">        
      <apex:pageBlockButtons >
			<apex:commandButton action="{!save}" value="Save"/>
			<apex:commandButton action="{!Cancel}" value="Cancel"/>
		</apex:pageBlockButtons>
		
      <apex:pageBlockSection columns="2" title="Information">
        <apex:inputField value="{!asset.Name}"></apex:inputField>
         <apex:inputField id="Asset2" value="{!asset.FULL_Description__c}"  />
         
        <!--<apex:inputField id="assetType" value="{!asset.Asset_Type__c}" ></apex:inputField> onChange="changeType();"-->
        <apex:inputField value="{!asset.Additional_Description__c}"  />
        
        <apex:inputField id="SubCategory" value="{!asset.Sub_Category__c}" onChange="changeType();"></apex:inputField>
        <apex:inputField value="{!asset.Quantity__c}"  /> 
        
        <apex:inputField value="{!asset.Channels__c}"  />
         <apex:inputField value="{!asset.Agency_Projects__c}"  />
      </apex:pageBlockSection>
    </apex:PageBlock>
    <!-- Static Imagery RT -->
     <apex:pageBlock id="PageBlockIm" title="Project Asset" rendered="{!asset.RecordTypeId == rt_StaticImagery}">        
      <apex:pageBlockButtons >
			<apex:commandButton action="{!save}" value="Save"/>
			<apex:commandButton action="{!Cancel}" value="Cancel"/>
		</apex:pageBlockButtons>
		
      <apex:pageBlockSection columns="2" title="Information">
	    <apex:inputField value="{!asset.Name}"></apex:inputField>
	        <!-- <apex:inputField id="assetType" value="{!asset.Asset_Type__c}" ></apex:inputField> onChange="changeType();"-->
	         
	         <apex:inputField value="{!asset.Additional_Description__c}"  />
	         <apex:inputField id="SubCategory" value="{!asset.Sub_Category__c}" onChange="changeType();"></apex:inputField>
	         <apex:pageBlockSectionItem />
	          <apex:inputField value="{!asset.Channels__c}"  />
	          <apex:pageBlockSectionItem />
	          <apex:inputField id="Asset3" value="{!asset.FULL_Description__c}"  />
	          <apex:pageBlockSectionItem />
	         <apex:inputField value="{!asset.Quantity__c}"  /> 
	         <apex:pageBlockSectionItem />
	       	 <apex:inputField value="{!asset.Agency_Projects__c}"  />
	   </apex:pageBlockSection>
    </apex:PageBlock>
    <!-- Experiential -->
     <apex:pageBlock id="PageBlockExp" title="Project Asset" rendered="{!asset.RecordTypeId == rt_Experiential}">        
      <apex:pageBlockButtons >
			<apex:commandButton action="{!save}" value="Save"/>
			<apex:commandButton action="{!Cancel}" value="Cancel"/>
		</apex:pageBlockButtons>
      <apex:pageBlockSection columns="2" title="Information">
        <apex:inputField value="{!asset.Name}"></apex:inputField>
        <!-- <apex:inputField id="assetType" value="{!asset.Asset_Type__c}" ></apex:inputField> onChange="changeType();"-->
         
         <apex:inputField value="{!asset.Additional_Description__c}"  />
         <apex:inputField id="SubCategory" value="{!asset.Sub_Category__c}" onChange="changeType();"></apex:inputField>
         <apex:pageBlockSectionItem />
          <apex:inputField value="{!asset.Channels__c}"  />
          <apex:pageBlockSectionItem />
          <apex:inputField id="Asset4" value="{!asset.FULL_Description__c}"  />
          <apex:pageBlockSectionItem />
         <apex:inputField value="{!asset.Quantity__c}"  /> 
         <apex:pageBlockSectionItem />
       	 <apex:inputField value="{!asset.Agency_Projects__c}"  />
      </apex:pageBlockSection>
    </apex:PageBlock>
    <!-- Digital -->
     <apex:pageBlock id="PageBlockDigital" title="Project Asset" rendered="{!asset.RecordTypeId == rt_Digital}">        
      <apex:pageBlockButtons >
			<apex:commandButton action="{!save}" value="Save"/>
			<apex:commandButton action="{!Cancel}" value="Cancel"/>
		</apex:pageBlockButtons>
		
      <apex:pageBlockSection columns="2" title="Information">
        <apex:inputField value="{!asset.Name}"></apex:inputField>
        <!-- <apex:inputField id="assetType" value="{!asset.Asset_Type__c}" ></apex:inputField> onChange="changeType();"-->
         
         <apex:inputField value="{!asset.Additional_Description__c}"  />
         <apex:inputField id="SubCategory" value="{!asset.Sub_Category__c}" onChange="changeType();"></apex:inputField>
         <apex:pageBlockSectionItem />
          <apex:inputField value="{!asset.Channels__c}"  />
          <apex:pageBlockSectionItem />
          <apex:inputField id="Asset5" value="{!asset.FULL_Description__c}"  />
          <apex:pageBlockSectionItem />
         <apex:inputField value="{!asset.Quantity__c}"  /> 
         <apex:pageBlockSectionItem />
       	 <apex:inputField value="{!asset.Agency_Projects__c}"  />
      </apex:pageBlockSection>
    </apex:PageBlock>
  </apex:form>
 
</apex:page>