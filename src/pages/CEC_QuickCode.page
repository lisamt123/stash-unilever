<apex:page standardController="Case" extensions="CEC_CaseInlineController" label="Quick Code" cache="true">
<apex:includeScript value="/support/console/30.0/integration.js"/> 

<apex:outputPanel id="JS">  
  <script type="text/javascript">
      function refreshPrimaryTab() {
          if({!isCountryPopulated}){
              sforce.console.getFocusedPrimaryTabId(doRefresh);
          }else{
              alert('{!$Label.CEC_Quick_Code_Change_Error}');
          }
      }
        
      var doRefresh = function doRefresh(result) {
          sforce.console.refreshPrimaryTabById(result.id, true, refreshSuccess);
      };
    
      var refreshSuccess = function refreshSuccess(result) {
          //Report whether refreshing the primary tab was successful
          if (result.success != true) {
               alert('Please save the inline changes to your case record');
          }
      };
  </script> 
 </apex:outputPanel>
  
  <apex:pageMessages ></apex:pageMessages>        
  <apex:form id="frm">
    <apex:inputField value="{!caseRecord.RecordTypeId}">
      <apex:actionSupport event="onchange" 
                          action="{!selectQuickcode}" 
                          oncomplete="refreshPrimaryTab()" rerender="JS,frm"/>
    </apex:inputField>       
  </apex:form>
</apex:page>