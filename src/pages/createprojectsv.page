<apex:page controller="IPM_CreateProject" showHeader="false" standardStylesheets="false" sidebar="false">
    <apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'css/bootstrap.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/ipmButtons.css')}"/>       
    <apex:includeScript value="{!URLFOR($Resource.ipmResource, 'js/jquery.js')}"/>    
    <apex:includeScript value="{!URLFOR($Resource.ipmResource, 'js/jquery-ui.js')}"/>   
    <apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/jquery-ui.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'assets/font-awesome/css/font-awesome.min.css')}"/>
    <style>
        .projDesc{color:#3b516d !important;margin: 20px 10px 25px;display: block;}
        .rlabel{margin-top: 30px;text-align: center;color:#384355;}
        .selectradioButton{width: 20px;margin: 0 auto;margin-top: 20px;}
        .buttonMtop{margin-top:30px;}
        .buttonMbottom{margin-bottom:20px;}
        .noPadleft{padding-left:0px !important;}
        .noPadright{padding-right:0px !important;}
        .rButtonDesc{font-size:12px;display: block;width: 90%;margin: 0 auto;padding-top: 10px;}
        .txtRight{text-align:right;}
        .buttonmarRight{margin-right:15px;}
        .custMarginTop{margin-top:30px;}
        .fontBold{font-weight:bold;}
    /* Radio button styles */
        .radioButton input[type=radio]{visibility: hidden;width: 0px;height: 0px;}
        .radioButton label{position:absolute;float:left;cursor:pointer;width:22px;height:22px;border:1px solid #ccc;border-radius:20px;}
        .radioButton label:after{opacity: 0;content: '';position: absolute;width: 6px;height: 6px;background: #007DBD;top: 6px;left: 6px;border: 1px solid #007DBD;border-radius: 40px;}
        .radioButton input[type=radio]:checked + label:after{opacity:1;}
        .radioButton label.selected{border:2px solid #007dbb;}
        .renderBtnset {position:relative;}
        .renderBtnset .proInit {text-align: center; position:absolute; z-index:100; top:0; left:-18px; width:103%; height:103%; background:#fff url({!URLFOR($Resource.ipmResourceRevamp, 'images/ajax-loader.gif')}) no-repeat 0 0!important;}
        .createCustWidth{width:90px;}   
    /* icon styles */
        .radioIcon{width: 71px;height: 71px;margin: 0 auto;}    
    </style>
    <apex:define name="body">
    <apex:form >
            <div class="container-fluid">
                <div class="row">
                    <div class="col-xs-12 noPadleft noPadright custMarginTop newProjectOption">
                    <apex:outputPanel rendered="{!isBoosEdtable='true'}">
                        <div class="col-xs-6 noPadleft radioButton">
                            <div class="bosscardbutton-grey bosscardbutton-blue radioIcon"></div>
                            <div class="selectradioButton">
                                <input id="bosscardbutton" class="rbutton" type="radio" name="bosscard" value="/apex/ipmBosscard_revamp" checked="checked" ></input>
                                <label class="selected" for="bosscardbutton"></label>
                            </div> 
                            <div class="rlabel fontBold">
                                <span>My Project will start with a BOSSCARD</span>
                                <span class="rButtonDesc">(If you are not sure, select this option. You can skip the BOSSCARD later if you change your mind.)</span>
                            </div>
                        </div>
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!isProEditable='true'}">
                        <div class="col-xs-6 radioButton">
                            <div class="projectbutton-grey radioIcon">
                            </div>
                               
                            <div class="selectradioButton">
                                <input id="projectbutton" class="rbutton" type="radio" onclick="callprojectcreate();" name="bosscard" value="/apex/ipmProjectSetup"></input>
                                 <label for="projectbutton"></label>
                                 <!--<apex:outputText value="/apex/ipmProjectSetup?Pid={!projectid}" id="ipmproject" styleClass="proid"/>-->
                            </div> 
                              
                            
                            <div class="rlabel">
                                <span>My Project will not have a BOSSCARD</span>
                                <span class="rButtonDesc">(If you choose this option, there will be no opportunity to create a BOSSCARD for this project later.)</span>
                            </div>
                            <apex:actionFunction name="callprojectcreate" status="Loading" action="{!CreateProjectId}" reRender="ipmproject, projIdScript"/> 
                        </div>
                        </apex:outputPanel>
                    </div>
                </div>
                <div class="row buttonMtop buttonMbottom">
                    <div class="pull-right txtRight renderBtnset">
                    <apex:actionStatus startText="" id="Loading" startStyleClass="proInit"/>
                            
                        <div class="buttonmarRight pull-right">    
                            <span Class="ipmButton primary" onclick="getvalue()">Confirm</span>
                        </div>
                        <div class="buttonmarRight noPadright pull-right ipmButtonSet cancelButton" onClick="closeModal()">
                            <span Class="ipmButton">Cancel</span> 
                        </div>
                    </div>
                </div>
           </div>
            <apex:outputPanel id="projIdScript">
                <script>
                    var projId = '{!projectid}';
                     var card_type ='';
                    function getvalue(){
                        if(jq("input[type='radio'].rbutton").is(':checked')){
                               card_type  = jq("input[type='radio'].rbutton:checked").val();
                                if(card_type.indexOf('ipmProjectSetup') > 0){
                                    waitForProjectId();
                                }
                                window.parent.top.location.href = card_type;
                        }
                    }
                    function waitForProjectId(){
                        if(projId != undefined && projId != ''){
                           card_type +="?Pid="+projId;
                        }else{
                            setTimeout(function(){
                                waitForProjectId();
                            },500);
                        }
                    }
                </script>       
            </apex:outputPanel>
          </apex:form>
           <script>
                    var jq= jQuery.noConflict();
                    function closeModal(){
                           jq(document).on('click', '.cancelButton', function() { 
                           var frame = parent.document.getElementById("ipmModal");
                           jq(frame).find('.close').trigger('click');
                        });
                       }
                    jq(document).on("click", ".radioButton input[type=radio]", function(){ 
                        var radioId = jq(this).attr('id');
                        jq('.radioIcon').removeClass("projectbutton-blue");
                        jq('.radioIcon').removeClass("bosscardbutton-blue");
                        jq('.radioIcon').css("border-color","#999999");
                        
                        jq('.radioIcon').addClass("bosscardbutton-gray");
                        jq('.radioIcon').addClass("projectbutton-gray");
                        jq('.radioButton').find('.rlabel').css("font-weight","normal");
                        jq('.radioButton').find('label').removeClass('selected');
                        if(jq(this).is(':checked')){
                            jq(this).parent().prev().addClass(radioId +"-blue");
                             jq(this).parent().prev(".radioIcon").css("border-color","#007CBA");
                            jq(this).next("label").addClass("selected");
                            jq(this).parent().next(".rlabel").css("font-weight","bold");
                        }else{ 
                            jq(this).parent().prev().removeClass(radioId +"-blue");
                            jq(this).next("label").removeClass("selected"); 
                            jq(this).next("label").next(".rlabel").css("font-weight","normal");
                        } 
                    });
           </script>
   </apex:define> 
</apex:page>