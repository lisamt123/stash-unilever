<apex:page controller="IPM_ImageUploadController" sidebar="false" showHeader="false">
<apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'css/bootstrap.min.css')}"/>
<!--    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>-->
    <apex:includeScript value="{!URLFOR($Resource.ipmResource, 'js/jquery.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.ipmResource, 'js/bootstrap.js')}"/>
    
    <!-- External Reference -->
    <apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'assets/font-awesome/css/font-awesome.min.css')}"/>
    
    <!-- Custom styles for this template -->
    <apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'css/ipmStyles.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'css/ipmHeader.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'css/ipmSidebar.css')}"/>
    
    <apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'css/ipmStatistic.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'css/ipmTaskWidget.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'css/ipmRightSidebar.css')}"/>
    <!--<apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'css/ipmMessages.css')}"/>-->
    <apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'css/ipmProjectComponent.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'css/progress.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/ipmButtons.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/bootstrap.min.css')}"/>
    <style>
    .clearfx {clear:both;}
    //.teal {margin-top:10px; color:#fff; border:none; padding:7px 15px;}
    .btn.teal {background:#00B389; color:#fff; border:none; font-family: arial;font-weight: normal;font-size: 12px; padding:7px 15px; border-radius:0px; -webkit-border-radius:0px; -moz-border-radius:0px;}
    .bPageBlock.brandSecondaryBrd {background:transparent!important; border:transparent!important;border-radius:1px!important;-webkit-border-radius:1px!important;}
    //.pbBody{margin:0 !important;} 
    #closeBtn{background:url("{!URLFOR($Resource.ipmResource, 'images/ipmCoreParamClose.png')}") no-repeat;text-align: center;font-size:3.5em;color:#003229;cursor:pointer;line-height: 1;padding-left: 10px;}
    .ipmModalTitle{float:left;padding:25px 0;}
    .marginTop{margin-top:12%;}
    .infoMsgDiv{padding:0 !important;}
    .uploadbuttonPadding{padding:10px !important;}
    .uploadField{float:left;margin:0px 10px;}
    .infoM3{background:#F6FFEC !important;border:1px solid #759B5E !important;  margin-bottom: 20px;}
    .infoM3 .messageText{color:#52813D;margin-top: -10px;}
    .infoM3 .msgIcon, .infoMedium{display:none;}
    </style>
  
 <script>
    function redirection(){
        var proid='{!projectId}';
        var isPropage='{!project}';
        var imgids='{!imgid}';
        if(isPropage !=''){
            if(proid =='' && imgids==''){
            parent.location.assign('apex/ipmProjectSetup');
           }
           else if(proid ==''){
                parent.location.assign('apex/ipmProjectSetup?image='+imgids);
            }else{
            parent.location.assign('apex/ipmProjectSetup?image='+imgids+'&Pid='+proid+ '&TeamMemid=projectdetails');
            }
        }else{
            if(proid =='' && imgids==''){
            parent.location.assign('apex/ipmbosscard_revamp');
           }
           else if(proid ==''){
                parent.location.assign('apex/ipmbosscard_revamp?image='+imgids);
            }else{
            parent.location.assign('apex/ipmbosscard_revamp?image='+imgids+'&id='+proid);
            }
        }
      }
      
     function  calluploadimage(){
      uploadimage();
     }
  </script>
    <div class="container-fluid">
        <apex:form >
            <div class="col-xs-12 infoMsgDiv"><apex:pageMessages id="pgsmg" /></div>
            <div class="row marginTop">
                <div class="uploadField">
                    <apex:outputLabel for="file"/>
                        <!--<apex:actionFunction name="uploadimage" action="{!upload}" />-->
                       <apex:actionRegion >
                        <apex:inputFile value="{!document.body}"  filename="{!document.name}" id="file" />
                    </apex:actionRegion>
                </div>        
                <div class="uploadButton">  
                    <apex:actionRegion >   
                        <apex:commandButton action="{!upload}" value="Upload Image" styleClass="uploadbuttonPadding ipmButton primary" /> 
                    </apex:actionRegion>        
                    <!--<input type="button" value="Close" onclick="redirection();" class="teal" />-->
                </div> 
            </div>                
        </apex:form>
    </div>
    <script>
        jq=jQuery.noConflict();
        jq(document).on('click','#closeBtn', function(){redirection();});
    </script>
</apex:page>