<apex:page title="Jobs Portfolio" controller="Amr_RAPJobPortfolioController_CC" sidebar="false" standardStylesheets="true" tabStyle="RAP_Jobs_Portfolio__tab" >
    <apex:include pageName="amr_common" />   
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css"/>
     <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>   
    <script type="text/javascript">
        function setFocusOnLoad() {}
        
        function transferCategoryValue(categoryValue){
            sendCategory(categoryValue);
            $j('.loading').show();
            //alert(categoryValue);
        }
        
         function closeloading() {       
            $j('.loading').hide();
        }
        
        function callActionFunctionStartDate(startDate) {  
            
            callContrlStartDate(startDate);
         }
        
        $j(function(){
            
                        $j( "#datepicker" ).datepicker(); 
            addHeaderTitle();
       
            $j('#projectNameOther').hide();
             var strArr = {!CategoryList};
             ///alert(strArr.length);
                 var none = $j('<option value="none">--None--</option>');
                  $j('#categoryList').append(none);
              for(var j=0;j<strArr.length;j++){
                 console.log(strArr[j]);
                 var newOp = $j('<option value="'+strArr[j]+'">'+strArr[j]+'</option>');
                            // alert(newOp);
                 $j('#categoryList').append(newOp);
              }            
            console.log('options'+newOp); 
           // alert(newOp);
           
           $j('.alert-popup').hide();
           $j('.advance-search-popup').hide();
           
           $j('.advance-popup').click(function(e){
               e.preventDefault();
               $j("body").append('<div class="mask">');
               $j('.advance-search-popup').show();    
           });
           $j('.cancel-advance-popup').click(function(e){
               e.preventDefault();
               $j("div").remove('.mask');
               $j('.advance-search-popup').hide();
           });
            $j('.apply-advance-popup').click(function(e){
               $j("div").remove('.mask');
               $j('.advance-search-popup').hide();
           });
          
           
           
           $j('#showalertPopup').click(function(){
               $j("body").append('<div class="mask">');
               $j('.alert-popup').show();    
           });
           $j('.cancel-alert-popup').click(function(e){
               e.preventDefault();
               $j("div").remove('.mask');
               $j('.alert-popup').hide();
           });
           $j('.hide-alert').click(function(){
               var selectedInput = $j(this).parent().find('input');
               var id =  selectedInput.val();
             //  alert(id);             
               hideAlert(id);
               $j(this).parent().parent().remove();
           });
           
            var stringArray = JSON.parse('{!MethodToPassProjectNames}');
      // alert(stringArray );
                  var otheroptn = $j('<option value="other">Other</option>');
                  var noneoptn = $j('<option value="--None--">--None--</option>');
                      
                     $j('#projectList').append(noneoptn);  
                    for(var i=0;i<stringArray.length;i++){
                    console.log(stringArray);
                         var newOption = $j('<option value="'+stringArray[i]+'">'+stringArray[i]+'</option>');
                         $j('#projectList').append(newOption);
                    }
                    $j('#projectList').append(otheroptn);
                   console.log('options'+newOption );
        });
    </script>   
    
    <script type="text/javascript">
            function transferValue(projName)
        {
          if(projName!=="--None--") {
          
              if(projName == 'other'){    
              $j('#projectNameOther').show();
          }
              else{
                    $j('.projecttextProjDetail').val(projName);
                      // alert('Hi---'+$j('.projecttextProjDetail').val());
                      $j('#projectNameOther').hide();
               //   alert(projName);
              }
          }
          
        }
        function testing(){
        
            alert('HELL');
            var x = $j('.test').val();
            alert(x);
        }
    </script>
    <style type="text/css"> 
        td.rich-tabhdr-side-cell table {
            background:#FFFFFF !important;
        }
        .rich-tab-bottom-line{
            border-bottom: 6px solid #FFFFFF !important;
            background:#FFFFFF !important;
        }
        .job-portfolio-container {
        background: #FFFFFF none repeat scroll 0 0;
        font-family: "dinOffPro",sans-serif;
        margin: 0 auto;
        }
        .job-portfolio-container a {
        color:#3399cc !important;
        }       
        .leftbar {
        float: left;            
        width: 25.6%;         
        }
        .rightbar {
        float: right;           
        width: 73%; 
        }
        .leftbar-container {
        min-height:412px;
        height:100%;
        }
        .leftbar-container1 {
        min-height:438px;
        height:100%;
        }
        #navDormant{    
            background-color:#86CCF2;
        }
        
        #navLive{           
            background-color:#59B577;
        }
        
        #navPriority{           
            background-color:#F3922A;
        }
        
        #navPending{            
            background-color:#E76970;
        }
        .navcommon {
            color: #fff;
            float: left;
            font-size: 14px;
            font-weight: bold;
            height: 100%;
            line-height: 40px;
            width: 50%;
            box-sizing: border-box;
           /* border-right: 2px solid #FFFFFF; */
        }
        .vf-reset .vf-surface {
        background:#FFFFFF;
        }
        .vf-reset {
        background:#FFFFFF;
        }
        .border-right-white {
            border-right: 1px solid #FFFFFF;
        }
        #vfext4-ext-sprite-1034, #vfext4-ext-sprite-1073 {
            display:none;
        }
        .total-jobs-class {         
            color: #333333;
            font-family: "dinOffProBold",sans-serif;
            font-size: 11px;            
            text-transform: uppercase;          
        }
        .total-jobs-class span {            
            font-size:16px;         
        }
        .leftbar-container-content93 {
            margin: 0 auto;
            padding-top: 12px;
            width: 93%;
        }
        .horizontal-list-priority {
            width:25%;
        }        
        .popup-window {
            background-color: white;
            border:1px solid #333333;
            z-index: 10;
            position: fixed;
        }
        .alert-popup{                        
            left: 25%;                                    
            width: 800px;
            top: 20%;
            max-height : 450px;            
        }  
        .advance-search-popup{   
            left: 20%;                                    
            width: 900px;
            height:400px;
            top: 20%;                     
            background-color: white;
            border:1px solid #333333;
            z-index: 10;
            position: fixed;   
            overflow-y: auto;         
        }  
            .mask{
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            background-color: rgba(0,0,0,0.3);            
            }      
                        
            .popup-window tr.headerRow th div {
                max-width:100px !important;     
            }
            
            /*PJ*/
            /*
            .apexp {
                overflow-x:scroll;
            }
            */
            /*
            .outerNoSidebar {
                overflow-x:initial !important;
                table-layout:fixed !important;
                width:100%;
            }
            */
            .rich-tabpanel-content-position {
                table-layout:fixed !important;
            }
            /**/
            
            #phHeader {
                display:none;
            }
            /*
            .scrollbar-table-parent table.list tbody {              
                overflow-y: auto;
            }
            .scrollbar-table-parent table.list thead {              
                display:block;
            }
            */     
            /*      
            .scrollbar-table-parent {
                max-height: 679px;
                overflow-y: auto;
            } 
            */
            /*scrollable table css*/            
            .scrollbar-table-parent table.list tbody {              
                overflow-y: auto;
                max-height: 679px;
                display: -moz-grid;
                display:run-in;
                display:-webkit-box;
                width: 100%;
            }
            .scrollbar-table-parent table.list thead{
                /*display: inline-table; */
                display: inline-flex;               
                width: 100%;
                table-layout:fixed !important; 
            }
            .scrollbar-table-parent table.list tbody td, .scrollbar-table-parent table.list thead th{
                width:6em;
            }
            
            /*table ellipsis */
            /*
            .tabsection tr.headerRow th div {
                max-width:30px;      
            }
            */
            
            /*
            .tabsection tr.headerRow th:nth-last-child(1) div, .tabsection tr.headerRow th:nth-last-child(2) div,.tabsection tr.headerRow th:nth-last-child(3) div {
                max-width:20px;      
            }
            .tabsection tr.headerRow th:nth-child(3) div {
                max-width:20px;
            }
            .tabsection tr.headerRow th:nth-last-child(4) div {
                max-width:30px;
            }            
            .tabsection tr.headerRow th:nth-child(2) div {
                max-width:40px;
            } 
            */
            
            .tabsection tr.headerRow th:nth-last-child(1) div, .tabsection tr.headerRow th:nth-last-child(2) div,.tabsection tr.headerRow th:nth-last-child(3) div {
                max-width:40px;      
            }
            
            .tabsection tr.headerRow th:nth-child(3) div {
                max-width:30px;
            }
            
            @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
               .scrollbar-table-parent table.list {             
                    table-layout:fixed !important;              
                }
            }
            
            /*
            .scrollbar-table-parent table.list,
            .scrollbar-table-parent table.list td,
            .scrollbar-table-parent table.list th {
                -webkit-box-sizing: content-box;
                -moz-box-sizing: content-box;
                box-sizing: content-box;
            } 
            */      
            
            /* Maya's code */
            
            .scrollbar-table-parent {
                overflow-x:auto;
            }
            
            /*end of Maya's code */                 
    </style>
    
    <!--[if IE]>
    <style type='text/css'>
        .scrollbar-table-parent table.list {                
                table-layout:fixed !important;              
            }
    </style>
    <![endif]-->
    
    
    
    <apex:pagemessages id="msgs"></apex:pagemessages>
    <!---Ad Main section---->
    
    <apex:include pageName="amr_common_header" />           
    <div class="job-portfolio-container">    
        <apex:form >
            <div class="absolute padding10-10-0-0 pointer" style="right:25px;top:260px;">                  
                <div class="left bold bell-text-label">
                    {!totalAlertCount}
                </div>
                <div class="left" id="showalertPopup">
                    <img src="{!URLFOR($Resource.Amr_static_resources,'Amr-static-resource/images/Ico_alert.png')}" alt = "Alert Image"/>
                </div>
                <div class="clear">
                </div>
            </div>
            <div class="rapjobportfolio-main-section margin-top30">
            <div class="leftbar">
                <!--  
                <div class="leftbar-container bg-g1 margin-btwn-container">
                    <div class="leftbar-container-header dark-blue-header">
                        Dashboard
                    </div>
                    <div class="leftbar-container-content margin12 bg-w8" style="text-align: center;">                        
                    </div>
                </div>
                -->
                <!--  -->
                
                <div class="leftbar-container bg-w8 margin-btwn-inner-container">
                    <div class="leftbar-container-header dark-blue-header" style="border-radius:6px;">
                        {!$Label.Amr_DashboardSpace}
                    </div>
                    <div class="leftbar-container-content margin12 bg-w8" style="text-align: center;">
                        <div class="leftbar-container-content93">
                        <div style="width:100%;height:40px;overflow: hidden;">
                          <!--  <div style="width:25%;" class="navcommon" id="navDormant" >
                                <div>
                                    <span class="sr-only">{!TotalClosedJob}</span>
                                </div>
                              </div>
                              <div style="width:25%;" class="navcommon" id="navPending" >
                                <div class="border-right-white">
                                    <span class="sr-only">{!TotalJobsAccepted}</span>
                                </div>
                              </div>
                             <div style="width:25%;" class="navcommon" id="navLive" >
                                <div class="border-right-white">
                                    <span class="sr-only">{!TotalOpenJobs}</span>
                                </div>
                              </div>                               
                             <div style="width:25%;" class="navcommon" id="navPriority" >
                                <div class="border-right-white">
                                    <span class="sr-only">{!TotalJobstoAccept}</span>
                                </div>
                              </div> --> 
                                 <div style="width:25%;" class="navcommon" id="navDormant" >
                                <div>
                                     <span class="sr-only">{!pendingJob}</span>
                                </div>
                              </div>
                              <div style="width:25%;" class="navcommon" id="navPending" >
                                <div class="border-right-white">
                                  
                                     <span class="sr-only">{!dormantJob}</span>
                                </div>
                              </div>
                             <div style="width:25%;" class="navcommon" id="navLive" >
                                <div class="border-right-white">
                                    <span class="sr-only">{!liveJob}</span>
                                </div>
                              </div>                               
                             <div style="width:25%;" class="navcommon" id="navPriority" >
                                <div class="border-right-white">
                                    <span class="sr-only">{!priorityJob}</span>
                                </div>
                              </div>                                                              
                              <div class="clear">
                              </div>
                              </div>                        
                        <div class="right total-jobs-class margin-btwn-inner-container">
                            {!$Label.Amr_Total_Jobs} <span>{!TotalJobs}</span>
                        </div>  
                     <div class="clear margin-btwn-inner-container">                            
                            <div class="left margin-right20 margin-bottom10">
                                <div class="left margin-right12" style="background:#86CCF2;width:15px;">
                                    &nbsp;
                                </div>
                                <div class="left width120" style="text-align: left;">
                                    {!$Label.Amr_Pending}
                                </div>
                                <div class="clear"></div>                                
                            </div>
                            <div class="left margin-right20 margin-bottom10">
                                <div class="left margin-right12" style="background:#59B577;width:15px;">
                                    &nbsp;
                                </div>
                                <div class="left width120" style="text-align: left;">
                                    {!$Label.Amr_Live}
                                </div>
                                <div class="clear"></div>                                
                            </div>
                            <div class="clear"></div>
                            <div class="left margin-right20 margin-bottom10">
                                <div class="left margin-right12" style="background:#F3922A;width:15px;">
                                    &nbsp;
                                </div>
                                <div class="left width120" style="text-align: left;">
                                   {!$Label.Amr_Priority}
                                </div>
                                <div class="clear"></div>                                
                            </div>
                            <div class="left margin-right20 margin-bottom10">
                                <div class="left margin-right12" style="background:#E76970;width:15px;">
                                    &nbsp;
                                </div>
                                <div class="left width120" style="text-align: left;">
                                   {!$Label.Amr_Dormant}
                                </div>
                                <div class="clear"></div>                                
                            </div>
                            
                        </div>
                        <div class="clear"></div>
                        <div style="width:100%">
                        You v&apos;s Team Monthly
                         <apex:pageblock > 
                              <apex:chart height="100" width="300" data="{!PieDataSaving}" >  
                               <apex:pieSeries dataField="data"  donut="50"  colorSet="#70309F,#1E4E78"> 
                                        <apex:chartLabel display="none" />                          
                                </apex:pieSeries> 
                               <apex:legend position="right"/>  
                              </apex:chart> 
                           </apex:pageblock>
                        </div>
                        <div class="clear">
                        
                        </div>
                        <div style="width:100%">
                         You v&apos;s Team YTD
                            <apex:pageblock > 
                          <apex:chart height="100" width="300" data="{!PieData}" >  
                               <apex:pieSeries dataField="data" labelField="name" donut="50" colorSet="#70AB46,#4472C3" > 
                                <apex:chartLabel display="none" />  
                               </apex:pieSeries> 
                           <apex:legend position="right" />  
                          </apex:chart> 
                       </apex:pageblock>                                            
     
                        </div>
                        <div class="clear"></div>
                    </div>
                    </div>
                </div>
                <apex:actionRegion >
                <div class="leftbar-container1 bg-g1 margin-btwn-container">
                    <div class="leftbar-container-header dark-blue-header">
                        {!$Label.Amr_Search} &amp; {!$Label.Amr_Filter}
                    </div>
                    <div class="leftbar-container-content margin12 padding12 bg-w8">
                        <div class="inputpanel">
                            <!--<div class="left inputpanel-first">
                                AdManager number
                            </div>  -->
                            <div class="clear  inputclass">
                                <apex:inputField value="{!jobDetails.AdManagerText__c}"  html-placeholder="AdManager No." />
                            </div>
                            <div class="clear">
                            </div>
                        </div>
                        <div class="inputpanel"> <!--
                            <div class="left inputpanel-first">
                                {!$Label.Amr_Category}
                            </div>  -->
                            <div class="clear  inputclass">
                                <!--  
                                <apex:selectList value="{!categoryName}" size="1"  multiselect="false" >
                                    <apex:actionSupport event="onchange" reRender="brandPosPick,brandPick" status="actStatusId"/>
                                    <apex:selectOptions value="{!CategoryList}" />
                                </apex:selectList>
                                <select id="categoryList" size="1" onchange="transferCategoryValue(this.value)" reRender="brandPosPick"  class="categorySelected"></select> -->
                                <apex:inputText value="{!categoryName}" html-placeholder="{!$Label.Amr_Category}"/> 
                            </div>
                            
                             <div style="display:none;width:30px;border:none;margin-bottom:5px;" class="loading">
                        <img src="/img/loading.gif"  alt="loading image"/>  
                       </div>
                            <div class="clear">
                            </div>
                        </div>
                         <div class="inputpanel">    <!--
                            <div class="left inputpanel-first">
                                {!$Label.Amr_Brand_Position_Name}
                            </div>     -->
                            <div class="clear  inputclass">     <!--
                                <apex:selectList id="brandPosPick" value="{!brandPos}" size="1" multiselect="false" >
                                    <apex:actionSupport event="onchange" reRender="brandPick" status="actStatusId1" />
                                    <apex:selectOptions value="{!listOfBrandPosition}" />
                                </apex:selectList>
                                <apex:actionstatus id="actStatusId1">
                            <apex:facet name="start" >
                                <img src="/img/loading.gif" alt="loading image"/>                    
                            </apex:facet>
                        </apex:actionstatus>
                            </div>
                            <div class="clear">
                               -->
                            <apex:inputText value="{!brandPos}" html-placeholder="{!$Label.Amr_Brand_Position_Name}"/>
                        </div>
                       </div> 
                        
                        <div class="inputpanel">    <!--
                            <div class="left inputpanel-first">
                                {!$Label.Amr_Brand_Name}
                            </div>    -->
                            <div class="clear  inputclass">    <!--
                                <apex:selectList id="brandPick" value="{!brandName}" size="1" multiselect="false" >
                                    <apex:selectOptions value="{!BrandList}" />
                                </apex:selectList>    -->
                                <apex:inputText value="{!brandName}" html-placeholder="{!$Label.Amr_Brand_Name}"/>
                            </div>
                            <div class="clear">
                            </div>
                        </div>
                       
                            <div class="inputpanel"> <!--
                            <div class="clear inputclass">
                                Project name
                            </div> -->
                            <div class="clear  inputclass">
                                
                               <!--  <select id="projectList" size="1" onchange="transferValue(this.value)"></select> -->
                               <apex:inputText value="{!projectNameText}" html-placeholder="Project Name"/> 
                            </div>
                            <div class="clear">
                            </div>
                        </div> <!--
                        <div class="inputpanel" id="projectNameOther">
                            <div class="clear inputclass">
                                {!$Label.Amr_Other}
                            </div>
                            <div class="clear  inputclass">
                                <apex:inputField value="{!jobDetails.Project_Name_Other__c}"   />
                            </div>
                            <div class="clear">
                            </div>
                        </div>  -->
                        <div class="inputpanel" >
                            <!-- <div class="clear inputclass">
                                Campaign Name
                            </div> -->
                            <div class="clear  inputclass">
                                <apex:inputField value="{!jobDetails.Campaign_Name__c}"  html-placeholder="{!$Label.Amr_Campaign_Name}" />
                            </div>
                            <div class="clear">
                            </div>
                        </div>
                        <div class="inputpanel">
                            <div class="left bold inputclass padding-top10">
                                <a class = "advance-popup" href="#">{!$Label.Amr_Advanced_Search}</a>
                            </div>
                            <div class="right">
                             
                                <apex:commandButton styleClass="commonbtn-blue" value="Apply" action="{!getJobDetailSearch}" reRender="listRefresh" status="actionStatusSearchFilter"></apex:commandButton>
                                
                                <apex:actionStatus id="actionStatusSearchFilter" >
                                <apex:facet name="start" >
                                    <img src="/img/loading.gif" alt="loading image"/>                    
                                </apex:facet>
                            </apex:actionStatus>
                                
                            </div>   
                            <div class="right margin-right12">
                            <apex:commandButton styleClass="commonbtn" value="Clear" action="{!clearJob}" />
                            </div>                       
                            
                            <div class="clear">
                            </div>
                        </div>
                        
                    </div>     
                </div>
                </apex:actionRegion>
            </div>
              
            <!-- Advance Search Popup Start -->
                <apex:actionRegion >
                <div class = "advance-search-popup" style = "display:none">
                   
                    <div class="inputpanel" >
                            <!-- <div class="clear inputclass">
                                AdManager Number
                            </div> -->
                            <div class="clear  inputclass">
                             <!--   <apex:inputField value="{!advSearchjobDet.AM_Job_Detail__r.AdManagerText__c}" styleClass="test"  /> -->
                             
                                <apex:inputField value="{!jobDetails.AdManagerText__c}"   html-placeholder="AdManager No."/>
                            </div>
                            <div class="clear">
                            </div>
                    </div>
                    <div class="inputpanel" >
                            <div class="clear inputclass">
                               {!$Label.Amr_Date_logged}
                            </div>
                            <div class="clear  inputclass">
                                <input type="text" id="datepicker" placeholder = "{!$Label.Amr_Date_logged}"  onchange="callActionFunctionStartDate(this.value);" /> 
                                 <!--  <apex:input  label="My date :" type="date"/> -->
                            </div>
                            <div class="clear">
                            </div>
                    </div>
                    <div class="inputpanel" >
                            <!--<div class="clear inputclass">
                                Project leader email
                            </div>  -->
                            <div class="clear  inputclass">
                              <!--  <apex:inputField value="{!advSearchjobDet.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}"   />-->
                              <apex:inputField value="{!jobDetails.Unilever_Project_Leader_Email__c}" html-placeholder="Project leader email " />
                            </div>
                            <div class="clear">
                            </div>
                    </div> 
                    <!--<div class="inputpanel" >
                            <div class="clear inputclass">
                                Location
                            </div>
                            <div class="clear  inputclass">
                               <!-- <apex:inputField value="{!advSearchjobDet.AM_Job_Detail__r.Project_Leader_Country__c}"   />-->
                              <!--  <apex:inputField value="{!jobDetails.Project_Leader_Country__c}"   />-->
                           <!--  </div>
                            <div class="clear">
                            </div>
                    </div>  -->
                   <div class="inputpanel" >
                            <div class="clear inputclass">
                                {!$Label.Amr_Stage_of_production_activity}
                            </div>
                            <div class="clear  inputclass">
                              
                                <apex:inputField value="{!jobDetails.Stage_of_Production_Activity__c}"   />
                            </div>
                            <div class="clear">
                            </div>
                    </div>
                  
                
                    <div class="inputpanel" >
                            <div class="clear inputclass">
                                {!$Label.Amr_Lead_agency_name}
                            </div>
                            <div class="clear  inputclass">
                              <!--  <apex:inputField value="{!advSearchjobDet.AM_Job_Detail__r.Lead_Creative_Agency_name__c}"   />-->
                               <apex:inputField value="{!jobDetails.Lead_Creative_Agency_name__c}"   />
                            </div>
                            <div class="clear">
                            </div>
                    </div>
                     <div class="inputpanel" >
                            <!--<div class="clear inputclass">
                                Allocated budget(euro)
                            </div>  -->
                            <div class="clear  inputclass">
                                <!-- <apex:inputField value="{!advSearchjobDet.AM_Job_Detail__r.Allocated_Budget_euro__c}"   />-->
                                 <apex:inputText value="{!allocatedBudget}"  html-placeholder="Allocated budget(euro)" />
                            </div>
                            <div class="clear">
                            </div>
                    </div>
                     <div class="inputpanel" >
                            <div class="clear inputclass">
                                 {!$Label.Amr_Production_Support}
                            </div>
                            <div class="clear  inputclass">
                               <!-- <apex:inputField value="{!advSearchjobDet.AM_Job_Detail__r.Production_Activity_Type__c}"   />-->
                                <apex:inputField value="{!jobDetails.Production_Activity_Type__c}"   />
                            </div>
                            <div class="clear">
                            </div>
                    </div>
                     <div class="inputpanel" >
                            <div class="clear inputclass">
                                 {!$Label.Amr_Job_Status}
                            </div>
                            <div class="clear  inputclass">
                              
                                <apex:inputField value="{!jobAlloc.Job_Status__c}"   />
                            </div>
                            <div class="clear">
                            </div>
                    </div>
                        <div class="inputpanel" >
                            <div class="clear inputclass">
                               {!$Label.Amr_Job_Started}
                            </div>
                            <div class="clear  inputclass">
                              
                                <apex:inputField value="{!jobAlloc.Started__c}"   />
                            </div>
                            <div class="clear">
                            </div>
                    </div>
                      <div class="inputpanel" >
                            <div class="clear inputclass">
                                {!$Label.Amr_Job_Shared}
                            </div>
                            <div class="clear  inputclass">
                              
                                <apex:inputField value="{!jobAlloc.Job_Shared__c}"   />
                            </div>
                            <div class="clear">
                            </div>
                    </div>
                   
                      <div class="inputpanel" >
                            <div class="clear inputclass">
                                {!$Label.Amr_Job_Reported}
                            </div>
                            <div class="clear  inputclass">
                              
                                <apex:inputField value="{!jobAlloc.Reported__c}"   />
                            </div>
                            <div class="clear">
                            </div>
                    </div>
                    <span class="right">
                        <apex:commandButton value="Cancel" styleClass="cancel-advance-popup commonbtn"/>
                    </span>
                   
                    <span class="right">
                        <apex:commandButton value="Apply" action="{!getJobDetailSearch}" styleClass="apply-advance-popup commonbtn-blue"  reRender="listRefresh"/>
                    
                    </span>
                       
                </div>
            </apex:actionRegion>
            <!-- Advance search popup End  -->
            <div class="rightbar bg-g1">
                
                
                <apex:actionFunction action="{!getJobDetailSearch}" name="callContrlStartDate" reRender="listRefresh1">
                            <apex:param name="param" value="" id="y" assignTo="{!startDate}" />
                    </apex:actionFunction>
                    <apex:actionFunction action="{!getJobDetailSearch}" name="callContrlEndDate" reRender="listRefresh1">
                            <apex:param name="param16" value="" id="y16" assignTo="{!endDate}" />
                    </apex:actionFunction>
                    <apex:actionFunction action="{!getSortedPriorityList}" name="callContrlPrioritySort" reRender="listRefresh" status="actionStatusPriSort">
                            <apex:param name="param17" value="" id="y17" assignTo="{!selectedSortPriorityOption}" />
                    </apex:actionFunction>
                    <apex:actionFunction action="{!getSortedPendingList}" name="callContrlPendingSort" reRender="listRefresh" status="actionStatusPenSort">
                            <apex:param name="param18" value="" id="y18" assignTo="{!selectedSortPendingOption}" />
                    </apex:actionFunction>
                    <apex:actionFunction action="{!getSortedDormantList}" name="callContrlDormantSort" reRender="listRefresh" status="actionStatusDorSort">
                            <apex:param name="param19" value="" id="y19" assignTo="{!selectedSortDormantOption}" />
                    </apex:actionFunction>
                    <apex:actionFunction action="{!getSortedLiveList}" name="callContrlLiveSort" reRender="listRefresh" status="actionStatusLiveSort">
                            <apex:param name="param20" value="" id="y20" assignTo="{!selectedSortLiveOption}" />
                    </apex:actionFunction>
                     <apex:actionFunction name="sendCategory" action="{!brandPositionListData}" reRender="brandPosPick" oncomplete="closeloading()">
                     <apex:param id="catname" assignTo="{!categoryName}" name="categoryName" value="{!categoryName}" />
                     </apex:actionFunction>
                    
                  <div class= "alert-popup popup-window" style="display:none">
                  
                        <div class="margin-btwn-container12">
                            <div class="left popup-header">
                                {!$Label.Amr_Alert}
                            </div>
                            <div class="right popup-close cancel-alert-popup pointer">                                                                
                                <img src="{!URLFOR($Resource.Amr_static_resources,'Amr-static-resource/images/Ico_ClosePopup.png')}" alt="close image" />                                
                            </div>
                            <div class="clear">
                            </div>
                        </div>
                            <div class="clear">                           
                        </div>                   
                        <div class="alert_div margin-btwn-container12" style="overflow-y:auto;margin-top:4px;max-height:200px;"><!-- {!if(alert.size = 0, 0,41)} -->
                                       
                                               <apex:pageBlock >                                                   
                                                        <apex:pageBlockTable value="{!alertList}" var="alertVar">
                                                            
                                                            <apex:column value="{!alertVar.New_Alert__c}" >
                                                                 <apex:facet name="header">{!$Label.Amr_Date}</apex:facet>
                                                                 
                                                            </apex:column>
                                                            <apex:column >
                                                            <apex:commandLink value="{!alertVar.job_Id__r.AdManagerText__c}"  action="{!jobSheetPageTransfer}"  >
                                                                      <apex:param name="chosenId" value="{!alertVar.Job_Id__c}" assignTo="{!chosenId}"/>
                                                                 </apex:commandLink>
                                                                <apex:facet name="header">{!$Label.Amr_AD_ID}</apex:facet>
                                                             </apex:column>
                                                            <apex:column value="{!alertVar.Alert_Message__c}">
                                                                <apex:facet name="header">{!$Label.Amr_Alert_Message}</apex:facet>
                                                             </apex:column>
                                                            <apex:column >
                                                                <apex:facet name="header">{!$Label.Amr_Action}</apex:facet>                                                                
                                                                      <a class="hide-alert" href="#">{!$Label.Amr_Remove}</a>
                                                                      <input type = "Hidden" value = "{!alertVar.id}" />                                                                  
                                                            </apex:column>
                                                        </apex:pageBlockTable>
                                                        
                                           </apex:pageBlock>         
                      </div>
                      <div class="clear">                           
                       </div> <!--
                      <div class="right">
                           <apex:commandButton styleClass="cancel-alert-popup commonbtn"  value="Cancel"/>
                       </div>  -->
                       
                       <div class="clear">
                           
                       </div>
                  </div>                  
                                                    
                <div class="bg-w8 joblist-section">
                    <div class="tabsection">
                        <apex:outputPanel id="listRefresh" styleClass="custom1" >
                        
                            <script type="text/javascript">
                                $j('td.empty').remove();
                                addHeaderTitle();
                            </script>
                            <apex:tabPanel selectedTab="pendingdetails" switchType="client">
                                <apex:tab label="Pending" name="PendingDetails" id="pendingdetails">
                                    <div class="sort-by-background" style="display:{!If(AND(NOT(ISBLANK(pendingJobsToShow)),pendingJobsToShow.size>0),'','none')}">                                     
                                            <apex:outputPanel rendered="{!if(pendingJobsToShow.size>0,true,false)}">
                                                <apex:outputLabel value="Sort By"></apex:outputLabel>
                                                &nbsp;&nbsp;
                                                <apex:selectList id="sortPickPending" value="{!selectedSortPendingOption}" size="1" multiselect="false"  onchange="callFuctionForPendingSort(this.value);" >
                                                    <apex:selectOptions value="{!SortOptions}" />
                                                </apex:selectList>
                                                <apex:actionStatus id="actionStatusPenSort" >
                                                    <apex:facet name="start" >
                                                        <img src="/img/loading.gif" alt="loading image"/>                    
                                                    </apex:facet>
                                                </apex:actionStatus>
                                            </apex:outputPanel>                                     
                                    </div>
                                    <div style="max-height: 679px;overflow-y: auto;">
                                    <apex:pageBlock >
                                        <apex:pageBlockSection >
                                            
                                            <apex:pageBlockTable value="{!pendingJobsToShow}" var="job" styleClass="box_content jobalerts"   >
                                                <apex:column headerValue="AdManager Number">
                                                    <apex:commandLink value="{!job.AM_Job_Detail__r.AdManagerText__c}"  action="{!jobSheetPageTransfer}"  >
                                                        <apex:param name="chosenId" value="{!job.AM_Job_Detail__r.id}" assignTo="{!chosenId}"/>
                                                    </apex:commandLink>
                                                </apex:column>
                                                <apex:column headerValue="Date logged">
                                                    <apex:outputText value="{0,date,dd/MM/yy}">
                                                        <apex:param value="{!job.AM_Job_Detail__r.CreatedDate}" />
                                                    </apex:outputText>
                                                </apex:column>
                                                <apex:column styleclass="stage-common-class {!SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(job.AM_Job_Detail__r.Stage_of_Production_Activity__c, ' ', '_'),'(',''),')',''),',',''),'/','')}" headerValue="Stage" title="{!job.AM_Job_Detail__r.Stage_of_Production_Activity__c}"/>
                                                <apex:column title="{!job.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}" headerValue="Project leader email">
                                                 <apex:outputText >
                                                    <div class="td-overflow width80">
                                                        <apex:outputLink value="mailto:{!job.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}">{!job.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}</apex:outputLink>
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                                <apex:column title="{!job.AM_Job_Detail__r.Project_Leader_Country__c}" headerValue="Location">
                                                <apex:outputText >
                                                    <div class="td-overflow width80">
                                                        {!job.AM_Job_Detail__r.Project_Leader_Country__c}
                                                    </div>
                                                </apex:outputText>
                                                
                                            </apex:column>
                                                <!-- Location of Unilever project -->
                                                 <apex:column title="{!job.AM_Job_Detail__r.ProductCategory__r.Name}" headerValue="Category">
                                                 
                                                 <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.ProductCategory__r.name}
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                                    <apex:column title="{!job.AM_Job_Detail__r.Brand_Final__r.Name}" headerValue="Brand name">
                                                     <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Brand_Final__r.name}
                                                    </div>
                                                </apex:outputText>                                              
                                            </apex:column>
                                                    
       
                                               <apex:column headerValue="Project name" title="{!job.AM_Job_Detail__r.Project_Details__r.Name}">
                                                <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Project_Details__r.Name}
                                                    </div>
                                                </apex:outputText>  
                                                
                                                  <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Project_Name_Other__c }
                                                    </div>
                                                </apex:outputText>   
                                                </apex:column>
                                                <apex:column title="{!job.AM_Job_Detail__r.Lead_Creative_Agency_name__c}" headerValue="Lead agency name">
                                                 <apex:outputText >
                                                        <div class="td-overflow width40">
                                                            {!job.AM_Job_Detail__r.Lead_Creative_Agency_name__c}
                                                        </div>
                                                    </apex:outputText>
                                                </apex:column>
                                                <apex:column value="{!job.AM_Job_Detail__r.Allocated_Budget_euro__c}" headerValue="Allocated budget(euro)"/>
                                                 <apex:column title="{!job.AM_Job_Detail__r.Brodcast_Market__c}" headerValue="Broadcast market"> 
                                                <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Brodcast_Market__c}
                                                    </div>
                                                </apex:outputText>                                          
                                            </apex:column> 
                                                <apex:column title="{!job.AM_Job_Detail__r.ProductionActivityTextArea__c}" headerValue="Production activity type">
                                                <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.ProductionActivityTextArea__c}
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                            <apex:column title="{!job.AM_Job_Detail__r.Campaign_Name__c}" headerValue="Campaign Name">
                                                <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Campaign_Name__c}
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                            
                                                <apex:column value="{!job.Job_Shared__c}" headerValue="Job shared"/>
                                                <apex:column value="{!job.Job_Status_Image__c}" headerValue="Accepted and email sent"/>
                                                <apex:column value="{!job.Started_Image__c}" headerValue="Started"/>
                                                <apex:column value="{!job.Reported_Image__c}" headerValue="Reported"/>
                                            </apex:pageBlockTable>
                                             </apex:pageBlockSection>
                                           
                                            <div class="no-data" style="display:{!if(pendingJobsToShow.size==0 , '', 'none')}" >
                                               {!$Label.Amr_There_is_no_data_to_display}
                                            </div>                                       
                                        </apex:pageBlock>                                       
                                   </div>    
                                   <div>&nbsp;</div>
                                            <apex:outputPanel styleClass="pagination">
                                                <apex:actionStatus id="actStatusPending" >
                                                    <apex:facet name="start" >
                                                        <img src="/img/loading.gif" alt="loading image"/>                    
                                                    </apex:facet>
                                                </apex:actionStatus>
                                                <apex:commandButton value="<<" action="{!beginningForPendingJobs}" status="actStatusPending" disabled="{!DisablePreviousForPendingJobs}"  reRender="listRefresh"/>
                                                <apex:commandButton value="<" action="{!previousForPendingJobs}" status="actStatusPending" disabled="{!DisablePreviousForPendingJobs}" reRender="listRefresh"/>
                                                <apex:commandButton value=">" action="{!nextForPendingJobs}" status="actStatusPending" disabled="{!DisableNextForPendingJobs}" reRender="listRefresh"/>
                                                <apex:commandButton value=">>" action="{!lastForPendingJobs}" status="actStatusPending" disabled="{!DisableNextForPendingJobs}" reRender="listRefresh"/>
                                            </apex:outputPanel>                                            
                                      <div>&nbsp;</div>
                                </apex:tab>                                                               
                                <apex:tab label="Live" name="LiveDetails" id="LiveDetails">
                                    <div class="sort-by-background" style="display:{!If(AND(NOT(ISBLANK(liveJobsToShow)),liveJobsToShow.size>0),'','none')}">                                        
                                        <apex:outputPanel rendered="{!If(AND(NOT(ISBLANK(liveJobsToShow)),liveJobsToShow.size>0),true,false)}">
                                            <apex:outputLabel value="Sort By"></apex:outputLabel>
                                            &nbsp;&nbsp;&nbsp;
                                            <apex:selectList id="sortPickLive" value="{!selectedSortLiveOption}" size="1" multiselect="false"  onchange="callFuctionForLiveSort(this.value);">
                                                <apex:selectOptions value="{!SortOptions}" />
                                            </apex:selectList>
                                            <apex:actionStatus id="actionStatusLiveSort" >
                                                <apex:facet name="start" >
                                                    <img src="/img/loading.gif" alt="loading image"/>                    
                                                </apex:facet>
                                            </apex:actionStatus>
                                        </apex:outputPanel>
                                    </div>
                                    <div  class="scrollbar-table-parent">
                                    <apex:pageBlock >
                                        <apex:pageBlockSection >
                                            <apex:pageBlockTable value="{!liveJobsToShow}" var="job" styleClass="box_content jobalerts"   >
                                                <apex:column headerValue="AdManager Number" styleClass="th-overflow">
                                                    <apex:commandLink value="{!job.AM_Job_Detail__r.AdManagerText__c}"  action="{!jobSheetPageTransfer}"  >
                                                        <apex:param name="chosenId" value="{!job.AM_Job_Detail__r.id}" assignTo="{!chosenId}"/>
                                                    </apex:commandLink>
                                                </apex:column>
                                                <apex:column headerValue="Date Logged">
                                                    <apex:outputText value="{0,date,dd/MM/yy}">
                                                        <apex:param value="{!job.AM_Job_Detail__r.CreatedDate}" />
                                                    </apex:outputText>
                                                </apex:column>
                                                <!-- Date logged -->
       
                                                <apex:column styleclass="stage-common-class {!SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(job.AM_Job_Detail__r.Stage_of_Production_Activity__c, ' ', '_'),'(',''),')',''),',',''),'/','')}" headerValue="Stage" title="{!job.AM_Job_Detail__r.Stage_of_Production_Activity__c}">
                                                    <div class="td-overflow width20">&nbsp;</div>
                                                </apex:column>
                                                <!-- Stage -->
         
                                                <apex:column headerValue="Project leader email" title="{!job.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}">
                                                    <apex:outputText >
                                                        <div class="td-overflow width80">
                                                            <apex:outputLink value="mailto:{!job.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}">{!job.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}</apex:outputLink>
                                                        </div>
                                                    </apex:outputText>
                                                </apex:column>
                                                <apex:column headerValue="Location" title="{!job.AM_Job_Detail__r.Project_Leader_Country__c}">
                                                    <apex:outputText >
                                                        <div class="td-overflow width40"><!-- 80 -->
                                                            {!job.AM_Job_Detail__r.Project_Leader_Country__c}
                                                        </div>
                                                    </apex:outputText>
                                                </apex:column>
                                                
         
                                                <apex:column headerValue="Category" title="{!job.AM_Job_Detail__r.ProductCategory__r.name}">
                                                    <apex:outputText >
                                                        <div class="td-overflow width40"><!-- 60 -->                                                                                                                                                                                                                                                          
                                                            {!job.AM_Job_Detail__r.ProductCategory__r.name}
                                                        </div>
                                                    </apex:outputText>
                                                </apex:column>
                                                <apex:column headerValue="Brand name" title="{!job.AM_Job_Detail__r.Brand_Final__r.name}">
                                                    <apex:outputText >
                                                        <div class="td-overflow width60">                                                                                                                                                                                                                                                          
                                                            {!job.AM_Job_Detail__r.Brand_Final__r.name}
                                                        </div>
                                                    </apex:outputText>
                                                </apex:column>
                                                <!-- Brand name -->
              
                                                <apex:column headerValue="Project name" title="{!job.AM_Job_Detail__r.Project_Details__r.name}">
                                                    <apex:outputText >
                                                        <div class="td-overflow width60">                                                                                                                                                                                                                                                          
                                                            {!job.AM_Job_Detail__r.Project_Details__r.name}
                                                        </div>
                                                    </apex:outputText>
                                                     <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Project_Name_Other__c }
                                                    </div>
                                                </apex:outputText> 
                                                </apex:column>
                                                <apex:column headerValue="Lead Agency name" title="{!job.AM_Job_Detail__r.Lead_Creative_Agency_name__c}">
                                                    <apex:outputText >
                                                        <div class="td-overflow width40">
                                                            {!job.AM_Job_Detail__r.Lead_Creative_Agency_name__c}
                                                        </div>
                                                    </apex:outputText>
                                                </apex:column>
                                                <!-- Lead agency name -->
              
                                                <apex:column headerValue="Allocated budget(euro)" title="{!job.AM_Job_Detail__r.Allocated_Budget_euro__c}">
                                                    <apex:outputText >
                                                        <div class="td-overflow width40">
                                                            &euro;{!job.AM_Job_Detail__r.Allocated_Budget_euro__c}
                                                        </div>
                                                    </apex:outputText>                                                                                                                                                                                                                                                                                                                                                                                                                                         
                                                </apex:column>
                                                <apex:column headerValue="Broadcast market" title=" {!job.AM_Job_Detail__r.Brodcast_Market__c}"> 
                                                    <apex:outputText >
                                                        <div class="td-overflow width60">
                                                            {!job.AM_Job_Detail__r.Brodcast_Market__c}
                                                        </div>
                                                    </apex:outputText>
                                                </apex:column> 
                                                <!-- Broadcast market -->
                  
                                                <apex:column headerValue="Production activity type" title=" {!job.AM_Job_Detail__r.ProductionActivityTextArea__c}">
                  
                                                    <apex:outputText >
                                                        <div class="td-overflow width60">
                                                            {!job.AM_Job_Detail__r.ProductionActivityTextArea__c}
                                                        </div>
                                                    </apex:outputText>
                                                </apex:column>
                                                <apex:column title="{!job.AM_Job_Detail__r.Campaign_Name__c}" headerValue="Campaign Name">
                                                <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Campaign_Name__c}
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                                <apex:column headerValue="Job shared">
                                                    <apex:outputText >
                                                        <div class="td-overflow width40">
                                                            {!job.Job_Shared__c}
                                                        </div>
                                                    </apex:outputText>
                                                </apex:column>
                                                <!-- Job shared -->
                      
                                                <apex:column value="{!job.Job_Status_Image__c}" headerValue="Accepted"/>
                                                <!-- Accepted and email sent -->
                 
                                                <apex:column value="{!job.Started_Image__c}" headerValue="Started"/>
                                                <!-- Started -->
                     
                                                <apex:column value="{!job.Reported_Image__c}" headerValue="Reported"/>
                                                <!-- Reported -->
                         
                                            </apex:pageBlockTable>
                                            
                                            </apex:pageBlockSection>
                                              
                                                <div class="no-data" style="display:{!if(liveJobsToShow.size=0,'','none')}" >
                                                     {!$Label.Amr_There_is_no_data_to_display}
                                                </div> 
              
                                    </apex:pageBlock>
                                    </div>
                                        <div>&nbsp;</div>
                                            
                                                <apex:outputPanel styleClass="pagination">
                                                   <apex:actionStatus id="actStatusLive" >
                                                           <apex:facet name="start" >
                                                                   <img src="/img/loading.gif" alt="loading image"/>                    
                                                           </apex:facet>
                                                   </apex:actionStatus>
                                                   <apex:commandButton value="<<" action="{!beginningForLiveJobs}" status="actStatusLive" disabled="{!DisablePreviousForLiveJobs}"  reRender="listRefresh"/>
                                                   <apex:commandButton value="<" action="{!previousForLiveJobs}" status="actStatusLive" disabled="{!DisablePreviousForLiveJobs}" reRender="listRefresh"/>
                                                   <apex:commandButton value=">" action="{!nextForLiveJobs}" status="actStatusLive" disabled="{!DisableNextForLiveJobs}" reRender="listRefresh"/>
                                                   <apex:commandButton value=">>" action="{!lastForLiveJobs}" status="actStatusLive" disabled="{!DisableNextForLiveJobs}" reRender="listRefresh"/>
                                                </apex:outputPanel>
                                                
                                               <div>&nbsp;</div>
                                </apex:tab>
                                 <apex:tab label="Priority" name="PriorityDetails" id="PriorityDetails">
                                    <div class="sort-by-background" style="display:{!If(AND(NOT(ISBLANK(priorityJobsToShow)),priorityJobsToShow.size>0),'','none')}">
                                        <apex:outputPanel rendered="{!if(priorityJobsToShow.size>0,true,false)}">
                                            <apex:outputLabel value="Sort By"></apex:outputLabel>
                                            <apex:selectList id="sortPickPriority" value="{!selectedSortPriorityOption}" size="1" multiselect="false"  onchange="callFuctionForPrioritySort(this.value);">
                                                <apex:selectOptions value="{!SortOptions}" />
                                            </apex:selectList>
                                            <apex:actionStatus id="actionStatusPriSort" >
                                                <apex:facet name="start" >
                                                    <img src="/img/loading.gif" alt="loading image"/>                    
                                                </apex:facet>
                                            </apex:actionStatus>
                                        </apex:outputPanel>
                                    </div>
                                    <div style="max-height: 679px;overflow-y: auto;">
                                    <apex:pageBlock >
                                        <apex:pageBlockSection >
                                            <apex:pageBlockTable value="{!priorityJobsToShow}" var="job" styleClass="box_content jobalerts"  >
                                                <apex:column headerValue="AdManager Number">
                                                    <apex:commandLink value="{!job.AM_Job_Detail__r.AdManagerText__c}"  action="{!jobSheetPageTransfer}"  >
                                                        <apex:param name="chosenId" value="{!job.AM_Job_Detail__r.id}" assignTo="{!chosenId}"/>
                                                    </apex:commandLink>
                                                </apex:column>
                                                <apex:column headerValue="Date logged">
                                                    <apex:outputText value="{0,date,dd/MM/yy}">
                                                        <apex:param value="{!job.AM_Job_Detail__r.CreatedDate}" />
                                                    </apex:outputText>
                                                </apex:column>
                                                <apex:column styleclass="stage-common-class {!SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(job.AM_Job_Detail__r.Stage_of_Production_Activity__c, ' ', '_'),'(',''),')',''),',',''),'/','')}" headerValue="Stage" title="{!job.AM_Job_Detail__r.Stage_of_Production_Activity__c}"/>
                                                <apex:column title="{!job.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}" headerValue="Project leader email">
                                                <apex:outputText >
                                                    <div class="td-overflow width80">
                                                        <apex:outputLink value="mailto:{!job.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}">{!job.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}</apex:outputLink>
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                                <apex:column title="{!job.AM_Job_Detail__r.Project_Leader_Country__c}" headerValue="Location of Unilever project leader(country)">
                                                <apex:outputText >
                                                    <div class="td-overflow width80">
                                                        {!job.AM_Job_Detail__r.Project_Leader_Country__c}
                                                    </div>
                                                </apex:outputText>
                                                
                                            </apex:column>
                                                 
                                                    <apex:column title="{!job.AM_Job_Detail__r.ProductCategory__r.Name}" headerValue="Category">
                                                     <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.ProductCategory__r.name}
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                                    <apex:column title="{!job.AM_Job_Detail__r.Brand_Final__r.Name}" headerValue="Brand name">
                                                   <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Brand_Final__r.name}
                                                    </div>
                                                </apex:outputText>                                              
                                            </apex:column>
        
                                                 <apex:column headerValue="Project name" title="{!job.AM_Job_Detail__r.Project_Details__r.Name}">
                                                <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Project_Details__r.Name}
                                                    </div>
                                                </apex:outputText>  
                                                
                                                  <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Project_Name_Other__c }
                                                    </div>
                                                </apex:outputText>   
                                                </apex:column>
                                                <apex:column title="{!job.AM_Job_Detail__r.Lead_Creative_Agency_name__c}" headerValue="Lead agency name">
                                                 <apex:outputText >
                                                        <div class="td-overflow width40">
                                                            {!job.AM_Job_Detail__r.Lead_Creative_Agency_name__c}
                                                        </div>
                                                    </apex:outputText>
                                                </apex:column>
                                                <apex:column value="{!job.AM_Job_Detail__r.Allocated_Budget_euro__c}" headerValue="Allocated budget(euro)"/>
                                               <apex:column title="{!job.AM_Job_Detail__r.Brodcast_Market__c}" headerValue="Broadcast market"> 
                                                <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Brodcast_Market__c}
                                                    </div>
                                                </apex:outputText>                                          
                                            </apex:column>
                                                <apex:column title="{!job.AM_Job_Detail__r.ProductionActivityTextArea__c}" headerValue="Production activity type">
                                                <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.ProductionActivityTextArea__c}
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                            <apex:column title="{!job.AM_Job_Detail__r.Campaign_Name__c}" headerValue="Campaign Name">
                                                <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Campaign_Name__c}
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                                <apex:column value="{!job.Job_Shared__c}" headerValue="Job shared"/>
                                                <apex:column value="{!job.Job_Status_Image__c}" headerValue="Accepted and email sent"/>
                                                <apex:column value="{!job.Started_Image__c}" headerValue="Started"/>
                                                <apex:column value="{!job.Reported_Image__c}" headerValue="Reported"/>
                                            </apex:pageBlockTable>
                                             </apex:pageBlockSection>
                                              
                                            <div class="no-data" style="display:{!if(PriorityJobsToShow.size=0 , '', 'none')}" >
                                                {!$Label.Amr_There_is_no_data_to_display}
                                            </div>
                                           
                                            <!-- <apex:outputPanel rendered="{!showPageButtonForPriority}" styleClass="pagination">-->
                                       
                                    </apex:pageBlock>
                                    </div>
                                            <div>&nbsp;</div>
                                            <apex:outputPanel styleClass="pagination">
                                                <apex:actionStatus id="actStatusPriority" >
                                                    <apex:facet name="start" >
                                                        <img src="/img/loading.gif" alt="loading image"/>                    
                                                    </apex:facet>
                                                </apex:actionStatus>
                                                <apex:commandButton value="<<" action="{!beginningForPriorityJobs}" status="actStatusPriority" disabled="{!DisablePreviousForPriorityJobs}"  reRender="listRefresh"/>
                                                <apex:commandButton value="<" action="{!previousForPriorityJobs}" status="actStatusPriority" disabled="{!DisablePreviousForPriorityJobs}" reRender="listRefresh"/>
                                                <apex:commandButton value=">" action="{!nextForPriorityJobs}" status="actStatusPriority" disabled="{!DisableNextForPriorityJobs}" reRender="listRefresh"/>
                                                <apex:commandButton value=">>" action="{!lastForPriorityJobs}" status="actStatusPriority" disabled="{!DisableNextForPriorityJobs}" reRender="listRefresh"/>
                                            </apex:outputPanel>
                                           <div>&nbsp;</div>
                                           
                                </apex:tab>
                                
                                <apex:tab label="Dormant" name="DormantDetails" id="DormantDetails">
                                    <div class="sort-by-background" style="display:{!If(AND(NOT(ISBLANK(dormantJobsToShow)),dormantJobsToShow.size>0),'','none')}">
                                        <apex:outputPanel rendered="{!if(dormantJobsToShow.size>0,true,false)}">
                                            <apex:outputLabel value="Sort By"></apex:outputLabel>
                                            <apex:selectList id="sortPickDormant" value="{!selectedSortDormantOption}" size="1" multiselect="false"  onchange="callFuctionForDormantSort(this.value);">
                                                <apex:selectOptions value="{!SortOptions}" />
                                            </apex:selectList>
                                            <apex:actionStatus id="actionStatusDorSort" >
                                                <apex:facet name="start" >
                                                    <img src="/img/loading.gif" alt="loading image"/>                    
                                                </apex:facet>
                                            </apex:actionStatus>
                                        </apex:outputPanel>
                                    </div>
                                    <div style="max-height: 679px;overflow-y: auto;">
                                    <apex:pageBlock >
                                        <apex:pageBlockSection >                                        
                                            <apex:pageBlockTable value="{!dormantJobsToShow}" var="job" styleClass="box_content jobalerts"   >
                                                <apex:column headerValue="AdManager Number">
                                                    <apex:commandLink value="{!job.AM_Job_Detail__r.AdManagerText__c}"  action="{!jobSheetPageTransfer}"  >
                                                        <apex:param name="chosenId" value="{!job.AM_Job_Detail__r.id}" assignTo="{!chosenId}"/>
                                                    </apex:commandLink>
                                                </apex:column>
                                                <apex:column headerValue="Date logged">
                                                    <apex:outputText value="{0,date,dd/MM/yy}">
                                                        <apex:param value="{!job.AM_Job_Detail__r.CreatedDate}" />
                                                    </apex:outputText>
                                                </apex:column>
                                                <apex:column styleclass="stage-common-class {!SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(job.AM_Job_Detail__r.Stage_of_Production_Activity__c, ' ', '_'),'(',''),')',''),',',''),'/','')}" headerValue="Stage" title="{!job.AM_Job_Detail__r.Stage_of_Production_Activity__c}"/>
                                                <apex:column title="{!job.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}" headerValue="Project leader email">
                                                 <apex:outputText >
                                                    <div class="td-overflow width80">
                                                        <apex:outputLink value="mailto:{!job.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}">{!job.AM_Job_Detail__r.Unilever_Project_Leader_Email__c}</apex:outputLink>
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                                <apex:column title="{!job.AM_Job_Detail__r.Project_Leader_Country__c}" headerValue="Location of Unilever project leader(country)">
                                               <apex:outputText >
                                                    <div class="td-overflow width80">
                                                        {!job.AM_Job_Detail__r.Project_Leader_Country__c}
                                                    </div>
                                                </apex:outputText>
                                                
                                            </apex:column>
                                                    <apex:column title="{!job.AM_Job_Detail__r.ProductCategory__r.Name}" headerValue="Category">
                                                    <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.ProductCategory__r.name}
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                                    <apex:column title="{!job.AM_Job_Detail__r.Brand_Final__r.Name}" headerValue="Brand name">
                                                   <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Brand_Final__r.name}
                                                    </div>
                                                </apex:outputText>                                              
                                            </apex:column>  
                                                    
            
                                                <apex:column headerValue="Project name" title="{!job.AM_Job_Detail__r.Project_Details__r.Name}">
                                                <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Project_Details__r.Name}
                                                    </div>
                                                </apex:outputText>  
                                                
                                                  <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Project_Name_Other__c }
                                                    </div>
                                                </apex:outputText>   
                                                </apex:column>
                                                <apex:column title="{!job.AM_Job_Detail__r.Lead_Creative_Agency_name__c}" headerValue="Lead agency name">
                                                 <apex:outputText >
                                                        <div class="td-overflow width40">
                                                            {!job.AM_Job_Detail__r.Lead_Creative_Agency_name__c}
                                                        </div>
                                                    </apex:outputText>
                                                </apex:column>
                                                <apex:column value="{!job.AM_Job_Detail__r.Allocated_Budget_euro__c}" headerValue="Allocated budget(euro)"/>
                                              <apex:column title="{!job.AM_Job_Detail__r.Brodcast_Market__c}" headerValue="Broadcast market">
                                                 <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Brodcast_Market__c}
                                                    </div>
                                                </apex:outputText>                                          
                                            </apex:column> 
                                                <apex:column title="{!job.AM_Job_Detail__r.ProductionActivityTextArea__c}" headerValue="Production activity type">
                                                 <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.ProductionActivityTextArea__c}
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                            <apex:column title="{!job.AM_Job_Detail__r.Campaign_Name__c}" headerValue="Campaign Name">
                                                <apex:outputText >
                                                    <div class="td-overflow width40">                                                                                                                                                                                                                                                          
                                                        {!job.AM_Job_Detail__r.Campaign_Name__c}
                                                    </div>
                                                </apex:outputText>
                                            </apex:column>
                                                <apex:column value="{!job.Job_Shared__c}" headerValue="Job Shared"/>
                                                <apex:column value="{!job.Job_Status_Image__c}" headerValue="Accepted and email sent"/>
                                                <apex:column value="{!job.Started_Image__c}" headerValue="Started"/>
                                                <apex:column value="{!job.Reported_Image__c}" headerValue="Reported"/>
                                            </apex:pageBlockTable>
                                             </apex:pageBlockSection>
                                            <div class="no-data" style="display:{!if(DormantJobsToShow.size=0 , '', 'none')}" >
                                                {!$Label.Amr_There_is_no_data_to_display}
                                            </div>
                                            <!--   <apex:outputPanel rendered="{!showPageButtonForDormant}"  styleClass="pagination">-->                                            
                                    </apex:pageBlock>
                                    </div>
                                            <div>&nbsp;</div>
                                            <apex:outputPanel styleClass="pagination">
                                                <apex:actionStatus id="actStatusDormant" >
                                                    <apex:facet name="start" >
                                                        <img src="/img/loading.gif" alt="loading image"/>                    
                                                    </apex:facet>
                                                </apex:actionStatus>
                                                <apex:commandButton value="<<" action="{!beginningForDormantJobs}" status="actStatusDormant" disabled="{!DisablePreviousForDormantJobs}"  reRender="listRefresh"/>
                                                <apex:commandButton value="<" action="{!previousForDormantJobs}" status="actStatusDormant" disabled="{!DisablePreviousForDormantJobs}" reRender="listRefresh"/>
                                                <apex:commandButton value=">" action="{!nextForDormantJobs}" status="actStatusDormant" disabled="{!DisableNextForDormantJobs}" reRender="listRefresh"/>
                                                <apex:commandButton value=">>" action="{!lastForDormantJobs}" status="actStatusDormant" disabled="{!DisableNextForDormantJobs}" reRender="listRefresh"/>
                                            </apex:outputPanel>
                                            <div>&nbsp;</div>
                                </apex:tab>
                            </apex:tabPanel>
                        </apex:outputPanel>
                    </div>
                </div>
            </div>
            </div>
            <div class="clear">         
            </div>
            
              <apex:actionFunction action="{!getJobDetailSearch}" name="callContrlStartDate" reRender="listRefresh1">
                            <apex:param name="param" value=""  assignTo="{!startDate}" />
              </apex:actionFunction>
             <apex:actionFunction name="hideAlert" action="{!alertHide}" reRender="view">
                                        <apex:param id="aname" assignTo="{!selectedAlert}" name="selectedAlert" value="{!selectedAlert}" />
             </apex:actionFunction>
        </apex:form>
    </div>   
</apex:page>