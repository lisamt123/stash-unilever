<apex:page controller="ChatterUIController" action="{!init}" docType="html-5.0" standardStylesheets="false" sidebar="false" showHeader="false" >
<style>
<!--@font-face {
    font-family: "DINProFont";
    src: url('{!URLFOR($Resource.DINProFont)}');    
}-->


@font-face
{
font-family:"DINProFont";
src: url('{!URLFOR($Resource.TestDINProFontEOT,'FF_DIN_Regular/FF_DIN_Regular.eot')}'); 
src: local('â˜º'), url('{!URLFOR($Resource.TestDINProFontEOT,'FF_DIN_Regular/FF_DIN_Regular.woff')}') format('woff'), url('{!URLFOR($Resource.TestDINProFontEOT,'FF_DIN_Regular/FF_DIN_Regular.ttf')}') format('truetype');
}

h1
{
font-family:'DINProFont'; 

}
</style>
   <apex:composition template="Template">
        <apex:define name="pageTitle" >My Schedule</apex:define>
    
    
   
        <apex:define name="headSection">
                <link rel="stylesheet" type="text/css" href="{! URLFOR($Resource.css_app_chatterui)}"/>
                <link rel="stylesheet" type="text/css" href="{! URLFOR($Resource.css_app_chatterui_profile)}"/>
                <link rel="stylesheet" type="text/css" href="{! URLFOR($Resource.css_app_chatterui_people)}"/>
                <link rel="stylesheet" type="text/css" href="{! URLFOR($Resource.css_app_chatterui_groups)}"/>

                <script src="{! URLFOR($Resource.js_plugins_jqueryHashChange_min)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_templates)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_profile_templates)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_groups_templates)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_people_templates)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_chatterpage)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_filemanager)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_profilebuilder)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_feedbuilder)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_feeditembuilder)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_postbuilder)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_peoplelistbuilder)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_searchmanager)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_groupbuilder)}"></script>
                <script src="{! URLFOR($Resource.js_app_chatterui_service)}"></script>
                
              <!--    Script for Calender  --->
                <link rel='stylesheet' type='text/css' href="{!URLFOR($Resource.fullCalendar, 'fullcalendar/fullcalendar.css')}" />
                <link rel='stylesheet' type='text/css' href="{!URLFOR($Resource.fullCalendar, 'fullcalendar/fullcalendar.print.css')}" media='print' />
                <link rel='stylesheet' type='text/css' href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/themes/ui-lightness/jquery-ui.css" />
              <!--  <script type='text/javascript' src="{!URLFOR($Resource.fullCalendar, 'jquery/jquery-1.5.2.min.js')}"></script> -->
                <script type='text/javascript' src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script>
                <script type='text/javascript' src="{!URLFOR($Resource.fullCalendar, 'fullcalendar/fullcalendar.min.js')}"></script> 
                <!-- Script for Calender End --->

                <!--Inline script for Calender-->

                <script type='text/javascript'>
                
                    $(document).ready(function() {
                        
                        $=$.noConflict(); 
                       $('div.sidebar').css("display","none");   
                        $('#calendar').fullCalendar({
                        
                            header: { 
                                left: 'prev,next today',
                                center: 'title',
                                right: 'month,basicWeek,basicDay'
                            },
                            eventClick: function(calEvent, jsEvent, view) 
                            {
                                var htmlDialogData = '<div id="eventDetailData-'+calEvent._id+'" class="eventInfoDialog"><ul class="eventInfoList">';
                                for(fieldName in calEvent.detailData)
                                {
                                    htmlDialogData+= '<li>'+fieldName+': '+calEvent.detailData[fieldName]+'</li>';
                                }
                                htmlDialogData += '</ul></div>';
                                
                               // $('#infoDivs').append(htmlDialogData);
                                $('#eventDetailData-'+calEvent._id).dialog(
                                {
                                    title: calEvent.title,
                                    close: function(event, ui)
                                    {
                                        $(this).dialog('destroy').remove();
                                    }
                                  });
                        
                            },
                    
                            editable: false,
                            
                            events: function(start,end,callback){
                               
                                var objectType = 'a069000000Ivjaj';
                                var startField = 'start_time__c';
                                var endField   = 'end_time__c';
                                var detailDataFields = 'description, stageName, type';                               
                                ChatterUIController.getEvents(objectType, startField, endField, function(result, event)
                               
                                {
                                    if(event.status)
                                    {                        
                                        callback(result);                   
                                    }
                                    }, {escape:true});            
                                }
                        });      
                    });
                
                    function getEpochMillis(dateStr)
                    {
                        return dateStr.getTime()/1000;
                    }    
                    
                    function formatDetailData(detailData)
                    {
                    
                    }
                
                </script>
            <!--Inline script for Calender End-->
              
            <!--- Inline style for Calendar -->
            
            <style type='text/css'>
               
                .ui-page {
                    background-color:#ffffff;
                    font-family:DINProFont;
                     }
     
                body {
                    margin-top: 0px;
                    text-align: center;
                    font-size: 16px;
                    background:#ffffff;
                 <!--  background-color:hsl(100,100%,100%);      -->              
                    font-family:DINProFont;
                    
                    }
                   
                    
                #loading {
                    position: absolute;
                    top: 5px;
                    right: 5px;
                    }
            
                #calendar {
                                    
                    width: 700px;
                    margin: auto auto;
                    margin-top: 50px;
                    background-color:hsl(100,100%,100%);
                    font-family:DINProFont;
                    }
                    
                 .clickable
                 {
                     cursor:pointer;
                 }
                 
                 .eventInfoDialog
                 {
                     text-align:left;
                     
                 }
            
                .eventInfoList
                {
                    list-style-type: none;
                     
                }
            </style>
            
            <!--- Inline style for Calendar End -->
       
        </apex:define>
        <div data-role="page" style="background:#FFFFFF;font-family:DINProFont;">
                   
       <!-- <apex:define name="sidebar">
            <c:Sidebar />
        </apex:define>-->
      
        <apex:define name="panels">
            <div class="panels" id="panels">
               <div class="panelHeaderBar fixedBar" style="background-color:#303030;">
                   <!-- <div class="bLeft"></div>-->
                    <div class="bBody">
                        <h3 class="flush truncate" style="font-family:DINProFont;text-transform:capitalize;color:white;">My Schedule</h3>
                    </div>
                </div>
                <div class="uiScroller forceScroller" id="panelScroller" data-scroller='{"enableRefresh":"true"}' style="background:#ffffff;">
                     
                       <div id="pullDown" class="padGridEqSides">
                         <!--     <span class="pullDownIcon"></span>
                             <span class="pullDownLabel">{!$Label.pull_to_refresh_text}</span>-->
                       </div>
                <body>                    
                    <div id='loading' style='display:none'>loading...</div>                    
                    <div id='calendar'> </div>
                    <div id="infoDivs"></div> 
                </body>                 
               
                    <script type="text/javascript">
                        ChatterUI.UserContext = {
                            userId: '{!$User.Id}',
                            sessionId: '{!GETSESSIONID()}',
                            usingMobile: {!usingMobile},
                            userObjectPrefix: '{!userObjectPrefix}',
                            feedObjectPrefix: '{!feedObjectPrefix}'
                        }

                    </script>
                </div> <!-- end .uiScroller -->               
            </div>
        </apex:define>
       </div>
        <apex:define name="overlayContent">
            <div id="overlayContent" ></div>
        </apex:define>
    </apex:composition>
</apex:page>