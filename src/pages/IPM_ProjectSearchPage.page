<!--  
*************************************************************************
*@Description:This page is used for Searching project
*@Author: Cognizant
*@Created Date: 02/01/2015   
*@Copyright Â© 2015  Unilever  
*************************************************************************
-->
<apex:page sidebar="false" standardStylesheets="true" controller="IPM_ProjectSearchCtrl" extensions="IPM_GetHelpDoc" readOnly="true">
    <apex:composition template="IPM_TemplateRevamp">
        <apex:define name="body">        
            <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_DropDown.css')}"/>
            <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/bootstrap-datepicker.css')}"/> 
            <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_Filter.css')}"/>            
            <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_AllProjects.css')}"/> 
            
            <!-- To place the help symbol in the top right hand corner of page -->
            <apex:outputPanel layout="block" styleClass="SecButtonSet delete pull-right">
                <apex:outputLink value="{!URL}" id="theLink" styleClass="icoButton question" target="_blank" title="{!$Label.IPM_Help}">?</apex:outputLink>
            </apex:outputPanel>
            
            <div class="header">                
                <c:IPM_PageHeader pageTitle="All Projects"/>
            </div>
            
            <div class="ipmContent">
                 <!-- IPM_ProjectSearchComp Starts here-->           
                    <apex:form >    
                        <div class="row">
                            <div class="col-sm-2 searchBox allProj-leftSide">
                               <input type="text" placeholder="Keyword, Person, Project,etc" name="srchTxt" value="{!searchTxt}" id="srchTxt" />
                               <apex:image styleClass="srchImage" value="{!URLFOR($Resource.IPM_Resource, 'images/search.svg')}" onclick="searchProjects();" />
                              
                            </div>
                            <!--If the attribute 'isEditable' is true, then the option to create a new project will be availbale -->
                            <apex:outputPanel rendered="{!isEditable}">
                            <div class="col-sm-10 newProjectbuttonDiv allProj-rightSide">
                                <div id="createProject" class="pull-right" data-toggle="modal" data-target="#ipmModal" title="Create Project" value="{!URLFOR($Page.IPM_CreateProject,null,[IsBossCardEditable = isBossCardEditable, IsProjectEditable = isProjectEditable])}" data-backdrop="static" data-keyboard="false">
                                    <a class="ipmButton" >
                                        {!$Label.IPM_CREATE_NEW} {!$Label.IPM_ProjectLabel}
                                    </a>
                                </div>
                                <apex:outputPanel rendered="{!OR($Permission.IPM_TeamMembers_ExtractDownloadable,$Permission.IPM_Business_Partner,$Permission.IPM_CentralTeam )}">  
	                            	<div class=" col-xs-2 SecButtonSet pull-right downloadbtnmilestone">
	                       				<!-- Below commandlink is used to provide excel download button only when user is assigned custom permissions for that  -->   
	                        			<apex:OutputLink styleClass="icoButton download" target="_blank"  value="{!$Page.IPM_ExportTeamMembersReport}" title="{!$Label.IPM_Team_Members_Report }"  />    
	                     			</div> 
                            	</apex:outputPanel> 
                            </div>
                            </apex:outputPanel>
                        </div>
                        <div class="row">
                           <div class="col-sm-2 allProj-leftSide leftSideBar">
                               <div class="panel">
                                    <div class="expandTool">
                                        <span class="expandAll">{!$Label.IPM_EXPAND_ALL}</span><span class="collapseAll">{!$Label.IPM_COLLAPSE_ALL}</span>
                                    </div>
                                    <div class="ipmButtonGroup">
                                        <a class="ipmButton buttonMarginRight" id="resetFilterBtnNew">{!$Label.IPM_Reset}</a>
                                        <a class="ipmButton green applyFilter" id="applyFilter">{!$Label.IPM_Apply}</a>
                                    </div>
                                   <ul class="docFilter">
                                       <div class="filterTitle">{!$Label.IPM_Type}</div>
                                       <li>
                                           
                                           <div class="row ipmCheckboxDiv">
                                               <div class="ipmCheckbox">
                                                   <input type="checkbox" value="all" id="typeAll" class="checkAll aPro {!IF(allProjects = 0, 'disable', '')}" />
                                                   <label for="typeAll" class="{!IF(allProjects = 0, 'disabled', '')}"></label>
                                               </div>
                                               <div class="checkboxLabel">
                                                   <span class="proTypeLabel">{!$Label.IPM_ALL} </span>
                                                   <apex:outputPanel styleClass="proNumbers" id="allProPanel"> ({!allProjects})</apex:outputPanel>
                                               </div>
                                           </div>
                                       </li>
                                       <li>
                                           
                                           <div class="row ipmCheckboxDiv">
                                               <div class="ipmCheckbox">
                                                   <input type="checkbox" value="My Projects" class="my {!IF(myProjects = 0, '', '')}" id="typeMyProjects" />
                                                   <label for="typeMyProjects" class="{!IF(myProjects = 0, '', '')}"></label>
                                               </div>
                                               <div class="checkboxLabel">
                                                   <span class="proTypeLabel">{!$Label.IPM_Myprojects} </span> 
                                                   <apex:outputPanel styleClass="proNumbers" id="myProPanel"> ({!myProjects})</apex:outputPanel></div>
                                           </div>
                                       </li>
                                   </ul>
                                   <div class="clearfix"></div>
                                   
                                   
                                   <div class="ipmAccordion">
                                       <!--  For Project Type -->
                                       <div class="projectContainer">
                                           <span class="pHead">
                                               <div class="filterTitle">
                                                    <span class='expico fa fa-minus'></span>
                                                    <span>{!$Label.IPM_ProjectType}</span>
                                               </div>
                                           </span> 
                                           <span class="ipmAcrdnExpand"> 
                                               <ul class="docFilter accordionFilters">
                                                   <li>
                                                       <div class="row ipmCheckboxDiv">
                                                           <div class="ipmCheckbox">
                                                               <!-- <input type="checkbox" value="all" id="AllProjType" class="checkAll aPro {!IF(allProjects = 0, 'disable', '')}" /> -->
                                                               <input type="checkbox" value="All" class="checkAll projectType" id="AllProjType" data-html="{!IF(allProjects = 0, 'disabled', '')}"/>
                                                               <label for="AllProjType" class="{!IF(allProjects = 0, 'disabled', '')}"></label>
                                                           </div>
                                                           <div class="checkboxLabel">
                                                               <span class="proTypeLabel">{!$Label.IPM_ALL} </span>
                                                               <apex:outputPanel styleClass="proNumbers" id="allProTypePanel"> ({!allProjects})</apex:outputPanel>
                                                           </div>
                                                       </div>
                                                   </li>
                                                   <li>
                                                       <div class="row ipmCheckboxDiv">
                                                           <div class="ipmCheckbox">
                                                               <!-- <input type="checkbox" value="Original Projects" class="my {!IF(myProjects = 0, '', '')}" id="OriginalProjType" /> -->
                                                               <input type="checkbox" value="Original" id="OriginalProjType"  class="checkSub projectType" data-html="{!IF(originalProjects = 0, 'disabled', '')}"/>
                                                               <label for="OriginalProjType" class="{!IF(originalProjects = 0, 'disabled', '')}"></label>
                                                           </div>
                                                           <div class="checkboxLabel">
                                                                <span class="proTypeLabel">{!$Label.IPM_OriginalProject} </span>
                                                                <span class="orgIcon"></span>
                                                                <apex:outputPanel styleClass="proNumbers" id="originalProTypePanel"> ({!originalProjects})</apex:outputPanel>
                                                           </div>
                                                       </div>
                                                   </li>
                                                   
                                                   <li>
                                                       <div class="row ipmCheckboxDiv">
                                                           <div class="ipmCheckbox">
                                                               <!-- <input type="checkbox" value="Rollout Projects" class="my {!IF(myProjects = 0, '', '')}" id="RolloutProjType" /> -->
                                                               <input type="checkbox" value="Rollout" id="RolloutProjType"  class="checkSub projectType " data-html="{!IF(rolloutProjects = 0, 'disabled', '')}"/>
                                                               <label for="RolloutProjType" class="{!IF(rolloutProjects = 0, 'disabled', '')}"></label>
                                                           </div>
                                                           <div class="checkboxLabel">
                                                                <span class="proTypeLabel">{!$Label.IPM_RolloutProject} </span>
                                                                <span class="rollIcon"></span>
                                                                <apex:outputPanel styleClass="proNumbers" id="rolloutProTypePanel"> ({!rolloutProjects})</apex:outputPanel>
                                                            </div>
                                                       </div>
                                                   </li>
                                                   
                                                   <li>
                                                       <div class="row ipmCheckboxDiv">
                                                           <div class="ipmCheckbox">
                                                               <!-- <input type="checkbox" value="Operational Projects" class="my {!IF(myProjects = 0, '', '')}" id="OperationalProjType" /> -->
                                                               <input type="checkbox" value="Operational" id="OperationalProjType"  class="checkSub projectType" data-html="{!IF(operationalProjects = 0, 'disabled', '')}"/>
                                                               <label for="OperationalProjType" class="{!IF(operationalProjects = 0, 'disabled', '')}"></label>
                                                           </div>
                                                           <div class="checkboxLabel">
                                                                <span class="proTypeLabel">{!$Label.IPM_OperationalProject} </span>
                                                                <span class="oprtnIcon"></span>
                                                                <apex:outputPanel styleClass="proNumbers" id="operationProTypePanel"> ({!operationalProjects})</apex:outputPanel>
                                                            </div>
                                                       </div>
                                                   </li>                                         
                                               </ul>
                                           </span>
                                       </div>
                                       <div class="projectContainer">
                                       <span class="pHead">
                                               <div class="filterTitle">
                                                    <span class='expico fa fa-minus'></span>
                                                    <span>{!$Label.IPM_CurrentStatus}</span>
                                               </div>
                                           </span> 
                                            <span class="ipmAcrdnExpand"> 
                                               <ul class="docFilter accordionFilters">
                                                   <li>
                                                       <div class="row ipmCheckboxDiv">
                                                           <div class="ipmCheckbox">
                                                          <!--     <input type="checkbox" value="all" class="checkAll aPro"  id="AllProj" data-html="{!IF(allProjects = 0, 'disabled', '')}"/>  -->
                                                             <input type="checkbox" value="All" class="checkAll statusAll" id="AllProj" data-html="{!IF(allProjects = 0, 'disabled', '')}"/> 
                                                               <label for="AllProj" class="{!IF(allProjects = 0, 'disabled', '')}"></label>
                                                           </div>
                                                           <div class="checkboxLabel">
                                                               <span class="proTypeLabel">{!$Label.IPM_ALL} </span>
                                                                <span class="proNumbers">({!allProjects})</span>
                                                           </div>
                                                       </div>
                                                   </li>
                                                   <li>
                                                       <div class="row ipmCheckboxDiv">
                                                           <div class="ipmCheckbox">
                                                               <input type="checkbox" value="Active" id="ActiveProjects"  class="checkSub checkActive" data-html="{!IF(activeProjects = 0, 'disabled', '')}"/>
                                                               <label for="ActiveProjects" class="{!IF(activeProjects = 0, 'disabled', '')}"></label>
                                                           </div>
                                                           <div class="checkboxLabel">
                                                               <span class="proTypeLabel">{!$Label.IPM_Active_Projects} </span>
                                                               <span class="proNumbers">({!activeProjects})</span>
                                                           </div>
                                                       </div>
                                                   </li>
                                                   
                                                   <li>
                                                       <div class="row ipmCheckboxDiv">
                                                           <div class="ipmCheckbox">
                                                               <input type="checkbox" value="Stopped" id="StoppedProjects"  class="checkSub checkStopped" data-html="{!IF(stoppedProjects = 0, 'disabled', '')}"/>
                                                               <label for="StoppedProjects" class="{!IF(stoppedProjects = 0, 'disabled', '')}"></label>
                                                           </div>
                                                           <div class="checkboxLabel">
                                                                <span class="proTypeLabel">{!$Label.IPM_Stopped_Projects} </span>
                                                                <span class="proNumbers">({!stoppedProjects})</span>
                                                            </div>
                                                       </div>
                                                   </li>
                                               </ul>
                                           </span>
                                       </div>
                                       <div class="projectContainer">
                                           <span class="pHead">
                                               <div class="filterTitle">
                                                    <span class='expico fa fa-minus'></span>
                                                    <span>{!$Label.IPM_PhaseLabel}</span>
                                               </div>
                                           </span> 
                                           <span class="ipmAcrdnExpand"> 
                                               <ul class="docFilter accordionFilters">
                                                   <li>
                                                       
                                                       <div class="row ipmCheckboxDiv">
                                                           <div class="ipmCheckbox">
                                                               <input type="checkbox" value="all" id="phase_all" class="phase checkAll" />
                                                               <label for="phase_all"></label>
                                                           </div>
                                                           <div class="checkboxLabel">
                                                               <span class="proTypeLabel">{!$Label.IPM_ALL} </span>
                                                               <span class="proNumbers">({!allProjects})</span></div>
                                                       </div>  
                                                   </li>
                                                   <apex:repeat value="{!projectPhases}" var="pp">
                                                       <li>
                                                           <div class="row ipmCheckboxDiv">
                                                               <div class="ipmCheckbox">
                                                                   <input type="checkbox" value="{!pp}" class="phase checkSub {!IF(phasesCountMap[pp] = 0, 'disabled', '')}" data-html="{!IF(phasesCountMap[pp] = 0, 'disabled', '')}" id="phase_{!pp}"  />
                                                                   <label for="phase_{!pp}" class="{!IF(phasesCountMap[pp] = 0, 'disabled', '')}"></label>
                                                               </div>
                                                               <div class="checkboxLabel">
                                                                   <span class="proTypeLabel">{!pp} </span>
                                                                   <span class="proNumbers">({!phasesCountMap[pp]})</span></div>
                                                           </div>
                                                       </li>
                                                   </apex:repeat>
                                               </ul>
                                           </span> 
                                       </div>
                                       <div class="projectContainer geographyFilters">
                                           <span class="pHead">
                                               <div class="filterTitle"><span class='expico fa fa-minus'></span><span>{!$Label.IPM_Geography}</span></div>
                                           </span> 
                                           <span class="ipmAcrdnExpand"> 
                                               <ul class="docFilter accordionFilters geographyAllUl">
                                                   <li class="geographyAllLi">
                                                       
                                                       <div class="row ipmCheckboxDiv">
                                                           <div class="ipmCheckbox">
                                                               <input type="checkbox" value="All" id="geographyAll" class="checkAll geographyAllLevel1"/>
                                                               <label for="geographyAll"></label>
                                                           </div>
                                                           <div class="checkboxLabel">
                                                               <span class="proTypeLabel">{!$Label.IPM_ALL} </span>
                                                               <!-- <span class="proNumbers">({!allProjects})</span> --></div>
                                                       </div>  
                                                   </li>
                                                   <apex:repeat value="{!clusterMCOList}" var="cluster">
                                                   <li class="clusterLi">
                                                       <div class="projectContainer gfirstLevel">
                                                            <ul class="docFilter accordionFilters clusterListUl">
                                                                <span class="pHead accrHead clusterListSpan">
                                                                    <li class="clusterCheckLi">
                                                                        <span class='expico-square fa fa-minus'></span>
                                                                        <div class="row ipmCheckboxDiv">

                                                                            <div class="ipmCheckbox">
                                                                                <input type="checkbox" value="{!cluster.clusterName}" data-html="{!IF(clusterCountMap[cluster.clusterName] = 0, 'disabled', '')}" class="checkAll checkSub clusterCheck" id="{!cluster.clusterName}"/>
                                                                                <label class="{!IF(clusterCountMap[cluster.clusterName] = 0, 'disabled', '')}" for="{!cluster.clusterName}"></label>
                                                                            </div>
                                                                            <div class="checkboxLabeltree">
                                                                                <span class="fClusterCname">
                                                                                    <span class="proTypeLabel">{!cluster.clusterName} </span>
                                                                                    <span class="proNumbers">({!clusterCountMap[cluster.clusterName]})</span>
                                                                                </span>
                                                                            </div>
                                                                        </div>
                                                                    </li>
                                                                </span> 
                                                                <span class="ipmAcrdnExpand"> 
                                                                   
                                                                       <apex:repeat value="{!cluster.mcos}" var="mco">
                                                                       <li class="subCheckLi">
                                                                            <div class="projectContainer gsecondLevel">
                                                                                <ul class="docFilter accordionFilters mcoUl">
                                                                                    <span class="pHead accrHead mcoCheckLiSpan">
                                                                                        <li class="mcoCheckLi">
                                                                                        <span class='expico-square fa fa-minus'></span>
                                                                                        <div class="row ipmCheckboxDiv">
                                                                                            <div class="ipmCheckbox">
                                                                                                <input type="checkbox" value="{!mco.mcoName}" class="checkSub checkAll mcoCheck" data-html="{!IF(mcoCountMap[cluster.clusterName + '-' + mco.mcoName] = 0 , 'disabled' ,'')}" id="{!mco.mcoName}"/>
                                                                                                <label class="{!IF(mcoCountMap[cluster.clusterName + '-' + mco.mcoName] = 0 , 'disabled' ,'')}" for="{!mco.mcoName}"></label>
                                                                                            </div>
                                                                                            <div class="checkboxLabeltree"><span class="fCountryName">{!mco.mcoName}({!mcoCountMap[cluster.clusterName + '-' + mco.mcoName]})</span></div>
                                                                                        </div>
                                                                                        </li>
                                                                                    </span>     
                                                                                <span class="ipmAcrdnExpand countryListSpan"> 
                                                                                   
                                                                                       <apex:repeat value="{!mco.countries}" var="country" >
                                                                                       <li class="subCheck">
                                                                                           <div class="projectContainer gthirdLevel">
                                                                                            <span class="pHead accrHead">
                                                                                                <div class="row ipmCheckboxDiv">
                                                                                                    <div class="ipmCheckbox">
                                                                                                        <input type="checkbox" value="{!country.Name}" class="checkSub countryCheck" data-html="{! IF(countryCountMap[cluster.clusterName + '-' + mco.mcoName + '-' + country.Name] = 0 , 'disabled' , '')}" id="{!country.Name}"/>
                                                                                                        <label class="{! IF(countryCountMap[cluster.clusterName + '-' + mco.mcoName + '-' + country.Name] = 0 , 'disabled' , '')}" for="{!country.Name}"></label>
                                                                                                    </div>
                                                                                                    <div class="checkboxLabeltree">
                                                                                                        <span class="fDependencyName" >
                                                                                                            <span class="proTypeLabel">
                                                                                                                {!country.Name}({!countryCountMap[cluster.clusterName + '-' + mco.mcoName + '-' + country.Name]})
                                                                                                            </span>
                                                                                                        </span>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </span> 
                                                                                        </div>  
                                                                                       </li>
                                                                                       </apex:repeat>
                                                                                    
                                                                                </span>
                                                                                </ul>
                                                                            </div>
                                                                       </li>
                                                                       </apex:repeat>
                                                                        
                                                                    </span>
                                                                </ul>
                                                            </div>
                                                        </li>
                                                        </apex:repeat>
                                                    </ul>
                                                </span> 
                                            </div>
                                            <div class="projectContainer">
                                                <span class="pHead">
                                                    <div class="filterTitle"><span class='expico fa fa-minus'></span><span>{!$Label.IPM_TARGET_LAUNCH_DATE}</span>
                                                    </div>
                                                </span> 
                                                <span class="ipmAcrdnExpand"> 
                                                    <ul class="docFilter accordionFilters">
                                                        <li>
                                                            <div class='input-group date datetimepickerFromDate' id='datetimepickerFromDate' >
                                                                <div class="tldLable">{!$Label.IPM_From}</div>
                                                                <apex:inputField value="{!projectForTLDFrom.IPM_Target_Launch_Dates__c}" styleClass="dateInputBox tldFrom calendar" onfocus="DatePicker.pickDate(true, this , false);"/>                                                                                     
                                                            </div>
                                                            <div class='input-group date' id='datetimepickerToDate'>
                                                                <div class="tldLable">{!$Label.IPM_To}</div>
                                                                <apex:inputField value="{!projectForTLDTo.IPM_Target_Launch_Dates__c}" styleClass="dateInputBox tldFrom calendar" onfocus="DatePicker.pickDate(true, this , false);"/>                                                                                     
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </span> 
                                            </div>
                                             <div class="projectContainer">
                                                <span class="pHead">
                                                    <div class="filterTitle"><span class='expico fa fa-minus'></span><span>{!$Label.IPM_BRAND_POSITIONING}</span></div>
                                                </span> 
                                                <span class="ipmAcrdnExpand"> 
                                                    <ul class="docFilter accordionFilters filterBrandList">
                                                        <li>
                                                            <div class="searchBox">
                                                               <input type="text" class="filterBrand" id="srchBrand"/>
                                                            </div> 
                                                        </li>
                                                    </ul>
                                                </span> 
                                            </div>
                                             <div class="projectContainer">
                                                <span class="pHead">
                                                    <div class="filterTitle"><span class='expico fa fa-minus'></span><span>{!$Label.IPM_iTORange} (&euro;)</span></div>
                                                </span> 
                                                <span class="ipmAcrdnExpand"> 
                                                    <ul class="docFilter accordionFilters">
                                                        <li>
                                                            <span class="mr5">{!$Label.IPM_From}</span><input class="iTORange1" type="text" onkeypress="return event.charCode === 0 || /\d/.test(String.fromCharCode(event.charCode));" /><span>{!$Label.IPM_mn}</span></li>
                                                        <li> <span class="mr12">{!$Label.IPM_To}</span><input class="iTORange2" type="text" onkeypress="return event.charCode === 0 || /\d/.test(String.fromCharCode(event.charCode));" /><span>{!$Label.IPM_mn}</span>
                                                        </li>
                                                    </ul>
                                                </span> 
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-sm-10 allProj-rightSide proLoader">
                                <apex:actionStatus startText="" id="myStatus" startStyleClass="proInit"/>
                                    <apex:outputPanel id="prjPanel">
                                    <div class="row">                                           
                                    </div>
                                    <div class="table-responsive">
                                    <!-- If the condition projects.size > 0 mets, then the list of project will be displayed in the below panel -->
                                    <apex:outputPanel rendered="{!projects.size > 0}">
                                    <table class="ipmTable table table-bordered projectTable"> 
                                     <thead>
                                     <tr>
                                     <th width="5%"><div></div></th>
                                     <th class="  " width="17%" scope="col" colspan="1">
                                       <div>
                                         <div class="colCompleted incHeight">
                                            {!$Label.IPM_PROJECT_NAME}<span id="sortProjects" class="fa {!IF(currentSort['thisFld'] = 'IPM_Project_Name__c' && isAsc, 'fa-angle-down', 'fa-angle-up')} sortIcon" />
                                         </div>
                                       </div>
                                     </th>
                                     <th class="  " width="11%" scope="col" colspan="1">
                                       <div>
                                         <div class="colProject incHeight">
                                          Current<div> Phase</div>
                                          <span id="sortPhases" class="fa {!IF(currentSort['thisFld'] = 'IPM_Phase__c' && isAsc, 'fa-angle-down', 'fa-angle-up')} sortIcon phaseSort" />
                                        </div>
                                      </div>
                                     </th>
                                     <th class="  " width="15%" scope="col" colspan="1">
                                       <div>
                                         <div class="Brand incHeight">
                                          {!$Label.IPM_Project_Leader}
                                          <span id="sortPLs" class="fa {!IF(currentSort['thisFld'] = 'IPM_Project_Leader__r.Name' && isAsc, 'fa-angle-down', 'fa-angle-up')} sortIcon" />
                                         </div>
                                       </div>
                                     </th>
                                     <th class="  " width="13%" scope="col" colspan="1">
                                      <div>
                                         <div class="colCategory incHeight">
                                          {!$Label.IPM_Gatekeeper}
                                          <span id="sortGKs" class="fa {!IF(currentSort['thisFld'] = 'IPM_Project_Gatekeeper__r.Name' && isAsc, 'fa-angle-down', 'fa-angle-up')} sortIcon" />
                                         </div>
                                      </div>
                                     </th>
                                     <th class="  " width="10.5%" scope="col" colspan="1">
                                      <div>
                                         <div class="colPhase incHeight">
                                          {!$Label.IPM_Year_3_iTO}<div>(&euro;)</div>
                                        </div>
                                      </div>
                                     </th>
                                     <th class="  " width="15%" scope="col" colspan="1">
                                      <div>
                                         <div class="colTasks incHeight">
                                          Target Launch<div>Date</div>
                                          <span id="sortTLDs" class="fa {!IF(currentSort['thisFld'] = 'IPM_Target_Launch_Dates__c' && isAsc, 'fa-angle-down', 'fa-angle-up')} sortIcon tldSort" />  
                                         </div>
                                      </div>
                                     </th>
                                     <th class="  " width="11%" scope="col" colspan="1">
                                       <div>
                                         <div class="colSection incHeight">
                                          <span>{!$Label.IPM_BOSSCARD}</span>
                                         </div>
                                       </div>
                                     </th>
                                     
                                     </tr>
                                    </thead>
                                    <tbody>
                                        <apex:variable var="rIndex" value="{!(pageNumber * size)+1-size}" /> 
                                        <apex:repeat value="{!projects}" var="p">
                                        <tr class="genRow">
                                         <td class="serialNum" rowspan="2">
                                                   <div>
                                                        <apex:outputText value="{!rIndex}"/>
                                                        <apex:variable var="rIndex" value="{!rIndex+1}"/>
                                                    </div>
                                                </td>
                                            <td>
                                                <div class="col-sm-12 noPadleft noPadright">
                                                    <div class="col-sm-3 noPadleft noPadright projLogo padTen">
                                                            <!-- If the field IPM_Bosscard_Logo__c and IPM_Project_Logo__c is null, then the default image will be displayed in the panel -->
                                                            <apex:outputPanel styleClass="ipmImage" rendered="{!If(and (p.IPM_Bosscard__r.IPM_Bosscard_Logo__c==null,p.IPM_Project_Logo__c == Null),true,false)}">
                                                                <apex:image value="{!URLFOR($Resource.IPM_Resource, 'images/upload_img2b.png')}" title="Default Image"/>
                                                            </apex:outputPanel>
                                                            <!-- If the field IPM_Project_Logo__c is not null, then the image will be displayed in the output field-->
                                                            <apex:outputField rendered="{!(p.IPM_Project_Logo__c!= '')}" value="{!p.IPM_Project_Logo__c}" />    
                                                    </div>
                                                    <div class="col-sm-8 pl4 noPadright padTen">
                                                        <!--If the condition p.IPM_Bosscard__c is not blank && IPM_Bosscard_Status__c is false, then the link will be displayed to take to Bosscard page-->
                                                        <apex:outputPanel layout="block" styleClass="titleContainer" rendered="{!(p.IPM_Bosscard__c != '' && NOT(p.IPM_Bosscard_Status__c))}">
                                                        <!-- bosscard pending -->
                                                            <a href="{!URLFOR($Page.IPM_Bosscard,null,[id=p.IPM_Bosscard__c])}" class="proTitle">{!p.IPM_Bosscard__r.Name}</a>
                                                        </apex:outputPanel>
                                                        <!--If the condition p.IPM_Bosscard__c is blank && IPM_IsSaved__c is true, then the link will be displayed to take to Project Overview page-->
                                                        <apex:outputPanel layout="block" styleClass="titleContainer" rendered="{!AND(ISNULL(p.IPM_Bosscard__c),(p.IPM_IsSaved__c))}">
                                                        <!-- project without bosscard & Project Created by click on Submit for Creation-->
                                                            <a href="{!URLFOR($Page.IPM_ProjectOverview,null,[id=p.id])}" class="proTitle">{!p.IPM_Project_Name__c}</a>
                                                        </apex:outputPanel>
                                                        <!--If the condition p.IPM_Bosscard__c is blank && IPM_IsSaved__c is false, then the link will be displayed to take to Project Setup wizard page-->
                                                        <apex:outputPanel layout="block" styleClass="titleContainer" rendered="{!AND(ISNULL(p.IPM_Bosscard__c),(!p.IPM_IsSaved__c))}">
                                                        <!-- project without bosscard & Project have'nt Created by click on Submit for Creation-->
                                                            <a href="{!URLFOR($Page.IPM_ProjectSetupView,null,[Pid=p.id])}" class="proTitle">{!p.IPM_Project_Name__c}</a>
                                                        </apex:outputPanel>
                                                        <!--If the condition p.IPM_Bosscard__c is not blank && IPM_IsSaved__c is true, then the link will be displayed to take to Project Overview page-->
                                                        <apex:outputPanel layout="block" styleClass="titleContainer" rendered="{!(p.IPM_Bosscard__c != '' && p.IPM_Bosscard_Status__c && p.IPM_IsSaved__c)}">
                                                        <!-- project with bosscard is approved && This Project has created by user from Project setup wizard -->
                                                            <a href="{!URLFOR($Page.IPM_ProjectOverview,null,[id=p.id])}" class="proTitle">{!p.IPM_Project_Name__c}</a>
                                                        </apex:outputPanel>
                                                        <!--If the condition p.IPM_Bosscard__c is not blank && IPM_IsSaved__c is true, then the link will be displayed to take to Project Overview page-->
                                                        <apex:outputPanel layout="block" styleClass="titleContainer" rendered="{!(p.IPM_Bosscard__c != '' && p.IPM_Bosscard_Status__c && !p.IPM_IsSaved__c)}">
                                                        <!-- project with bosscard is approved & This Project has created by system when bosscard got approved -->
                                                            <a href="{!URLFOR($Page.IPM_ProjectSetupView,null,[Pid=p.id])}" class="proTitle">{!p.IPM_Project_Name__c}</a>
                                                        </apex:outputPanel>
                                                        <!--If the IPM_Project_Type__c is Original, then the respective icon will be displayed -->
                                                        <apex:outputPanel layout="block" rendered="{!AND(p.IPM_Project_Type__c='Original', !p.Is_Archieved__c) }">
                                                            <span class="orgIcon"></span>
                                                        </apex:outputPanel>
                                                        <!--If the IPM_Project_Type__c is Rollout, then the respective icon will be displayed -->
                                                        <apex:outputPanel layout="block" rendered="{!AND(p.IPM_Project_Type__c='Rollout', !p.Is_Archieved__c )}">
                                                            <span class="rollIcon"></span> 
                                                        </apex:outputPanel>
                                                        <!--If the IPM_Project_Type__c is Operational, then the respective icon will be displayed -->
                                                        <apex:outputPanel layout="block" rendered="{!AND(p.IPM_Project_Type__c='Operational', !p.Is_Archieved__c)}">
                                                            <span class="oprtnIcon"></span>
                                                        </apex:outputPanel>
                                                        <!--If the IPM_Project_Type__c is Archieved, then the respective icon will be displayed -->
                                                        <apex:outputPanel layout="block" rendered="{!p.Is_Archieved__c}">
                                                            <span class="stopicon"></span>
                                                        </apex:outputPanel>
                                                        
                                                    </div>
                                                </div> 
                                            </td>
                                            <td>
                                                <apex:outputPanel rendered="{!p.Is_Archieved__c}">
                                                	{!$Label.IPM_GD_STOPPED}
                                                </apex:outputPanel>
                                                <apex:outputPanel rendered="{!Not(p.Is_Archieved__c)}">
                                                	{!p.IPM_Phase__c}
                                                </apex:outputPanel>   
                                            </td>
                                            <td>
                                                {!p.IPM_Project_Leader__r.Name}
                                            </td>
                                            <td>
                                                {!p.IPM_Project_Gatekeeper__r.Name}
                                            </td>
                                            <td>
                                                <apex:repeat value="{!projIdYear3iTO}" var="key">
                                                    <apex:outputPanel rendered="{!key == p.id}"> {!projIdYear3iTO[p.Id]}</apex:outputPanel>
                                                </apex:repeat>
                                            </td>
                                            <td>
                                                
                                                <apex:outputField value="{!p.IPM_Target_Launch_Dates__c}"/>
                                            </td>
                                            <td>
                                           <div class="col-sm-12 noteimg noPadleft noPadright">
                                                <!--If the condition IPM_Bosscard__c is not blank, then the link will be displayed to Bosscard page -->
                                               <apex:outputPanel rendered="{!p.IPM_Bosscard__c != ''}">
                                                   <a href="{!URLFOR($Page.IPM_Bosscard,null,[id=p.IPM_Bosscard__c])}" class="icoButton document"></a>
                                                   <a href="{!URLFOR($Page.IPM_Bosscard,null,[id=p.IPM_Bosscard__c])}">{!$Label.IPM_View}</a>
                                               </apex:outputPanel>
                                             </div>
                                            </td>
                                          </tr>
                                          <tr class="noBackground">
                                            <td class="noBorder" colspan="7">
                                                <span class="captions"> {!p.IPM_Brand_Positioning__c} | {!p.IPM_Category_Text__c}</span>
                                                <!-- If the Condition IPMProject_Span__c is Global && Type not equal to Operational, then the below panel will be displayed-->
                                                <apex:outputPanel layout="block" styleClass="col-sm-12 noPadleft countries" rendered="{! p.IPMProject_Span__c == 'Global' && p.IPM_Project_Type__c != 'Operational'}">
                                                    {!$Label.IPM_RollingOutTo} 
                                                    <apex:variable var="counter" value="{!0}" />
                                                        <!-- If the condition p.IPM_Countries__r is not Null, Country_Name__c will be displayed by repeat & will get stopped in below rendering condition -->
                                                        <apex:repeat value="{!p.IPM_Countries__r}" var="c" rendered="{!p.IPM_Countries__r != NULL}">
                                                            {!c.Country_Name__c}
                                                            <apex:variable var="counter" value="{!counter+1}" />
                                                            <apex:outPutPanel rendered="{!counter < p.IPM_Countries__r.size && c.Country_Name__c != NULL }">,</apex:outputPanel>
                                                        </apex:repeat>
                                                </apex:outputPanel>
                                            <!-- If the Condition IPMProject_Span__c is Regional && Type not equal to Operational, then the below panel will be displayed-->    
                                            <apex:outputPanel layout="block" styleClass="col-sm-12 noPadleft countries" rendered="{! p.IPMProject_Span__c == 'Regional' && p.IPM_Project_Type__c != 'Operational'}">
                                                {!$Label.IPM_RollingOutTo} 
                                                <apex:variable var="counter1" value="{!0}" />
                                                    <!-- If the condition p.IPM_Countries__r is not Null, Country_Name__c will be displayed by repeat & will get stopped in below rendering condition -->
                                                    <apex:repeat value="{!p.IPM_Countries1__r}" var="c1" rendered="{!p.IPM_Countries1__r != NULL}">
                                                        {!c1.Country_Name__c}
                                                        <apex:variable var="counter1" value="{!counter1+1}" />
                                                        <apex:outPutPanel rendered="{!counter1 < p.IPM_Countries1__r.size && c1.Country_Name__c != NULL }">,</apex:outputPanel>
                                                    </apex:repeat>
                                            </apex:outputPanel>
                                            <div class="col-sm-12 noPadleft projectDesc">
                                                {!p.IPM_Project_Description__c}
                                            </div>
                                            </td>
                                           </tr>
                                            
                                          </apex:repeat>
                                          </tbody>
                                    </table>
                                    </apex:outputPanel>
                                    <!-- If there is no projects, then the respective message will be displayed  -->
                                    <apex:outputPanel rendered="{!projects.size <= 0}">
                                      {!$Label.IPM_NoRecordsFound}
                                    </apex:outputPanel>
                                    </div>
                                </apex:outputPanel>
                                <div class="pull-right paginationDiv">
                                    <apex:outputPanel id="paginationSec">
                                        <apex:panelGrid columns="7">
                                            <apex:commandButton id="first" status="fetchStatus" reRender="checkBoxScript,statsPanel,jsLoad,prjPanel,paginationSec" value="<<" action="{!first}" disabled="{!!hasPrevious}" title="First Page" styleClass="paginationLink"/>
                                            <apex:commandButton id="prev" status="fetchStatus" reRender="checkBoxScript,statsPanel,jsLoad,prjPanel,paginationSec" value="<" action="{!previous}" disabled="{!!hasPrevious}" title="Previous Page" styleClass="paginationLink prev"/>
                                            <apex:outputText id="pageno"  styleClass="paginationLink">Records {!IF(noOfRecords>0,(pageNumber * size)+1-size,0)}-{!IF((pageNumber * size)>noOfRecords, noOfRecords,(pageNumber * size))} of {!noOfRecords}</apex:outputText>
                                            <apex:commandButton id="next" status="fetchStatus" reRender="checkBoxScript,statsPanel,jsLoad,prjPanel,paginationSec" value=">" action="{!next}" disabled="{!!hasNext}" title="Next Page" styleClass="paginationLink next"/>
                                            <apex:commandButton id="last" status="fetchStatus" reRender="checkBoxScript,statsPanel,jsLoad,prjPanel,paginationSec" value=">>" action="{!last}" disabled="{!!hasNext}" title="Last Page" styleClass="paginationLink"/>
                                            <apex:outputPanel styleClass="pgFetch">
                                                <apex:actionStatus id="fetchStatus" startText="Fetching..." stopText=""/>
                                            </apex:outputPanel>
                                        </apex:panelGrid>
                                    </apex:outputPanel>
                                </div>
                            </div>
                        </div>
                       <apex:actionFunction name="loadProjects" action="{!loadProjects}" rerender="prjPanel,jsLoad,paginationSec" status="myStatus">
                           <apex:param name="searchTxt" assignTo="{!searchTxt}" value="" />
                       </apex:actionFunction>
                       <apex:actionFunction name="allProjects" action="{!loadProjects}" rerender="prjPanel,jsLoad,paginationSec" status="myStatus" />
                       <apex:actionFunction name="myProjects" action="{!loadProjects}" rerender="prjPanel,jsLoad,paginationSec" status="myStatus"/>
                       <apex:actionFunction name="applyFltr" action="{!loadProjects}" rerender="prjPanel,paginationSec,jsLoad" status="myStatus">
                           <apex:param name="mytsk" assignTo="{!selectedPhase}" value="" />
                           <apex:param name="tldFrom" assignTo="{!tldFrom}" value="" />
                           <apex:param name="tldTo" assignTo="{!tldTo}" value="" />
                           <apex:param name="myPro" assignTo="{!mProjects}" value="" />
                           <apex:param name="aPro" assignTo="{!aProjects}" value="" />
                           <apex:param name="geographyAll" assignTo="{!geoAll}" value="" />
                           <apex:param name="custers" assignTo="{!clusters}" value="" />
                           <apex:param name="mcos" assignTo="{!mcos}" value="" />
                           <apex:param name="countries" assignTo="{!countries}" value="" />
                           <apex:param name="iTO1" assignTo="{!iTO1}" value="" />
                           <apex:param name="iTO2" assignTo="{!iTO2}" value="" />
                           <apex:param name="bPositioning" assignTo="{!bPositionings}" value="" />
                           <apex:param name="selectedProjType" assignTo="{!selectedProjType}" value="" />
                           <apex:param name="selectedActiveProject" assignTo="{!selectedActiveProject}" value=""/>
                           <apex:param name="selectedStoppedProject" assignTo="{!selectedStoppedProject}" value=""/>
                           <apex:param name="unassigned" assignTo="{!unassigned}" value=""/>
                       </apex:actionFunction>
                       <apex:actionFunction name="toggleSortProjects" action="{!toggleSortProjects}" rerender="prjPanel,jsLoad,paginationSec" status="myStatus" />
                       <apex:actionFunction name="toggleSortPhases" action="{!toggleSortPhases}" rerender="prjPanel,jsLoad,paginationSec" status="myStatus" />
                       <apex:actionFunction name="toggleSortPLs" action="{!toggleSortPLs}" rerender="prjPanel,jsLoad,paginationSec" status="myStatus" />
                       <apex:actionFunction name="toggleSortGKs" action="{!toggleSortGKs}" rerender="prjPanel,jsLoad,paginationSec" status="myStatus" />
                       <apex:actionFunction name="toggleSortITOs" action="{!toggleSortITOs}" rerender="prjPanel,jsLoad,paginationSec" status="myStatus" />
                       <apex:actionFunction name="toggleSortTLDs" action="{!toggleSortTLDs}" rerender="prjPanel,jsLoad,paginationSec" status="myStatus" />
                    </apex:form>
                    <apex:outputPanel id="jsLoad">
                    	<script>
                            var brandList = [];
                        </script>
                        <apex:repeat value="{!masterBrandArr}" var="arrayItem">
                        <script>
                            brandList.push('{!arrayItem}');
                        </script>
                        </apex:repeat>   
                        <apex:includeScript value="{!URLFOR($Resource.IPM_Resource, 'js/IPM_ProjectSearchComp.js')}"/>
                        <script>    
                           jq("#srchBrand").keypress(function(o){return 13==o.which?(loadProjects(jq("#srchBrand").val()),!1):void 0}),jq(document).ready(function(){jq("#sortProjects").on("click",function(){toggleSortProjects()}),jq("#sortPhases").on("click",function(){toggleSortPhases()}),jq("#sortPLs").on("click",function(){toggleSortPLs()}),jq("#sortGKs").on("click",function(){toggleSortGKs()}),jq("#sortITOs").on("click",function(){toggleSortITOs()}),jq("#sortTLDs").on("click",function(){toggleSortTLDs()})});
                        </script>      
                    </apex:outputPanel>
            </div>
             <div id="ipmModalDiv">
                <c:IPM_ModalHeaderDiv />
            </div>                      
        </apex:define>
     </apex:composition> 
     <script src="{!URLFOR($Resource.IPM_Resource, 'js/jquery-ui.min.js')}" type="text/javascript"></script>
      <script src="{!URLFOR($Resource.IPM_Resource, 'js/jquery.clearsearch.js')}" type="text/javascript"></script> 
     <script src="{!URLFOR($Resource.IPM_Resource, 'js/IPM_Accordion.js')}" type="text/javascript"></script>
     <script src="{!URLFOR($Resource.IPM_Resource, 'js/moment.js')}" type="text/javascript"></script>
     <script src="{!URLFOR($Resource.IPM_Resource, 'js/IPM_functions.js')}" type="text/javascript"></script>
     <script src="{!URLFOR($Resource.IPM_Resource, 'js/bootstrap-datepicker1.js')}" type="text/javascript"></script>
     <script>
         var IPMAppAllprojects={stop:'{!selectedStoppedProject}'};
     </script>
     <script src="{!URLFOR($Resource.IPM_Resource, 'js/IPM_initAllProjects.js')}" type="text/javascript"></script>
    
     <script>
      jq(document).ready(function () {  
         ipmModal('#createProject','Create Project','70%','370px','10%');
         jq('#srchTxt').clearSearch();
         jq('.filterBrand').clearSearch();    
         
      });
              
      function searchProjects() {
       loadProjects(jq('#srchTxt').val());
      }
      
    </script>
</apex:page>
