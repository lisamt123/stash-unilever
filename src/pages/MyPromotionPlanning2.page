<apex:page standardController="ACCL__Promotion__c" extensions="UL_PromotionPlanningController,  TPM_AccountRemoteActionExtension,ACCL.PromotionPlanningController,MyMetaDataRemoteActionExtension,MyContractRemoteActionExtension,MyPromotionRemoteActionExtension,MyPromotionRemoteActionExtension2,ACCL.AccountRemoteActionExtension,ACCL.ContractRemoteActionExtension,ACCL.LogRemoteActionExtension,ACCL.MetaDataRemoteActionExtension,ACCL.PromotionRemoteActionExtension,ACCL.PromotionTemplateRemoteActionExtension,ACCL.TacticTemplateRemoteActionExtension,MyContractRemoteActionExtension" showHeader="true" standardStylesheets="false" sidebar="true" applyHtmlTag="true" applyBodyTag="false" docType="html-5.0">
    <apex:pageMessages />  
    <head>
        <meta charset="UTF-8"/>
        <apex:stylesheet value="{!URLFOR($Resource.ACCL__SLDS202, '/assets/styles/salesforce-lightning-design-system.css')}" />
        <link rel="stylesheet" href="{!URLFOR($Resource.projectDist2, '/dist/vendor.css')}" />
        <link rel="stylesheet" href="{!URLFOR($Resource.projectDist2, '/dist/ui.css')}" />
        <script src="../../soap/ajax/38.0/connection.js" type="text/javascript"></script>
        <script>
            sforce.connection.sessionId='{!GETSESSIONID()}';
        </script>
    </head> 
    <apex:pageMessages />   
     
    <body>
        
        <div id="modal"></div>
        <div id="root" class="slds">
            <div class="slds-grid slds-grid--vertical-align-center slds-grid--align-center loading-container">
                <div class="slds-spinner_container">
                    <div class="slds-spinner--brand slds-spinner slds-spinner--large" aria-hidden="false" role="alert">
                        <div class="slds-spinner__dot-a"></div>
                        <div class="slds-spinner__dot-b"></div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            var i18nURL = "{!URLFOR($Resource.projectDist2, '/dist/assets/i18n/')}";
            var sfldsURL = "{!URLFOR($Resource.SLDS202, '/assets')}";
            var customImageURL = "{!URLFOR($Resource.ACCL__assets, '/assets/images/')}";
            var promotionId = '{!Id}'  
            var boPromotion = '';
            var ACSFNamespace = '{!ACSF_Namespace}';
            var ACSFNamespace = 'ACCL';
            var CustomNamespace = 'UL_';
        </script>

        <script src="{!URLFOR($Resource.projectDist2, '/dist/vendor.js')}"></script> 
        <script src="{!URLFOR($Resource.projectDist2, '/dist/services.js')}"></script>   
        <script src="{!URLFOR($Resource.projectDist2, '/dist/arch.js')}"></script>   
        <script src="{!URLFOR($Resource.projectDist2, '/dist/contracts.js')}"></script>  
        <script src="{!URLFOR($Resource.projectDist2, '/dist/ui.js')}"></script>
  
        <script>

            ReactDOM.render(React.createElement(Modal), document.getElementById('modal'));
        
            UI_EVENT_BUS.subscribe(EVENTS.APP_READY, function () {
                var promise;
        
                if(window.localVF) promise = localVF.initFromConfig();
                else if(window.MetaDataService) promise = MetaDataService.connect();
                else promise = when.resolve();
        
                promise.then(function () {
                    return when.all([
                        AppManager.initApex(),
                        AppManager.load(['BOPromotion'])
                    ]);
                }).then(function () {
                    BOFactory.instantiate('BOPromotion').then(bo => boPromotion = bo);
                    return AppManager.init();
                }).then(function (res) {
                    ReactDOM.render(React.createElement(PromotionPlanning), document.getElementById('root'));
                });
            });
        </script>
    </body>
</apex:page>