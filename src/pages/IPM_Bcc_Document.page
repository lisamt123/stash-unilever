<apex:page sidebar="false" controller="IPM_BCCController" >
<apex:includeScript value="{!URLFOR($Resource.ipmResource, 'js/jquery.js')}"/>      
<apex:includeScript value="{!URLFOR($Resource.ipmResource, 'js/jquery-ui.js')}"/>          
<apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/jquery-ui.css')}"/>
<style>
    /* Header styles */
    .ipmpanel-heading {font-weight: bold;font-size: 1.4em;color: #007dbb;word-wrap: break-word;padding-right: 10px;border-right: 1px #ddd solid;}
    .ipmFunnelPanel {position: relative;bottom: 0px;}
    .navbar-nav li:last-child > a > span {margin-top: 2px !important;}
    /* page title bar styles */
     .H30{height:30px;}
     .pageHeadToolbar { border-bottom:1px solid #ddd;margin:0px; }
     .pageHeadToolbar span.pageTitle {margin:10px 0px 10px 0px !important;display:inline-block; font-size:1.4em;color:#253b78; padding-right: 10px;}
     .pageHeadToolbar .SecFillProgress {display:inline-block;border-right: 1px solid #929292;border-left: 1px solid #929292;padding-left: 10px;padding-right: 10px;padding-top: 0px;padding-bottom: 0px;position:relative;bottom:20px;}
     .pageHeadToolbar .SecFillProgress .fillProgress {display:inline-block;color:#e98824;font-size:1.8em !important; font-weight:normal;}
     .pageHeadToolbar .SecFillProgress .fillProgressTxt {color:#364354!important;display:inline-block; font-size:12px;}
     .pageHeadToolbar .SecStatusUpdate {display:inline-block;margin:15px 0; padding-right:15px;border-right: 1px solid #929292;}        
     .pageHeadToolbar .SecCurrentStatus {display:inline-block; color:#364354; margin: 12px 15px 10px 15px;text-align:right;}
     .pageHeadToolbar .status {color:#e98824;display:block;font-weight:bold;}
     .icoButton {cursor:pointer;}
     .skipButton{margin-left:4px;position:relative;bottom:4px;display:inline-block;}
     .mandatorycolor{color:#CF1721;}
     
     /* content styles */
     .pageHeadToolbar .SecButtonSet{margin: 17px 10px 10px 10px;}
     .orangebg{background:#f79c3f !important;border:1px solid #ae6b27 !important;color:#fff !important;}
     .orangebg:hover{background:#f79c3f !important;}
     .bcctitleContainer{padding-left:15px;}
     .bccStatusContainer{width:52%;}
     .noPadleft{padding-left:0px !important;}
     .noPadright{padding-right:0px !important;}
     .bosscardMtop{margin-top:20px;}
     .bsFieldLabel{color:#565656;font-weight:bold;}
     .bcFielddesc{color:#354252;display:block;margin-bottom:10px;font-size: 0.9em;}
     .subSectionLabel{display:block;color:#565656;margin:10px 0px;}
     .inputField{margin-bottom:10px;}
     .inputField input{width: 100%;height: 30px;border-radius: 3px;border: 1px #a8a8a8 solid;color:#565656;}
     .inputField select{width: 100%;height: 30px;border-radius: 3px;border: 1px #a8a8a8 solid;color:#565656;}
     .fieldnote{margin-bottom: 20px;color:#555555;padding-top:10px;font-style:italic;font-size: 0.85em;display:block;}
     .bosscardmright{margin-right:10px;}
     .expandTool {text-align:right;}
     .expandTool span {display:inline-block; font-weight:bold; color:#0f81bb; cursor:pointer; }
     .bcInstruction{font-weight:bold;color:#3B4F6A;}
     .txtAlignright{text-align:right;}
     .uploadImage img{max-width:100%;}
     .buttonMarginRight{margin-right:15px;}
     .outer td.oRight{padding:5px 10px 0px 10px !important;}
     .container-fluid{padding-left: 10px;padding-right: 10px;}
     .bccTextarea{width:100%;height:200px;}
     
     /* Modal Styles */
     #ipmModalConfirmBcc .modal-dialog{margin-top:10%;}
     .skipDesc{display: block;padding: 15px 0px;}
     .skipButtoncontainer{margin:15px 10px;}
     .fleft{float:left;}
     .noPadleft{padding-left:0px !important;}
     .noPadright{padding-right:0px !important;}
     
     /* accordion styles */
     .bcsinglecontainer{margin-bottom: 5px;}
     .ipmAccordion{margin:10px 0px;padding: 10px 0px;}
     .ipmAccordion .bcsinglecontainer .pHead > span.expico {display: inline-block; cursor:pointer; font-family: FontAwesome;width: 21px;height: 21px;text-align: center;font-weight: normal;line-height: 23px;background: #81bd42;position: relative;margin-right: 5px;font-size: 0.8em;border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;color: #fff;}
     .ipmAccordion .bcsinglecontainer > .ipmAcrdnExpand {display:block;padding: 10px 15px;margin-bottom:10px;}        
     .bcsinglecontainer > .pHead{color: #253b78;font-size: 1.5em;font-weight: bold;display: block;background: #f7f7f7;border: 1px solid #dce3e2;padding: 13px 10px 14px;}
     .bcsinglecontainer > .ipmAcrdnExpand{border: 1px solid #dce3e2;display: block;border-top: none!important;margin-bottom: 10px;}
     
     /* confirmation styles */
     div.message.infoM3{background-color:#F6FFEC !important;position:absolute;border-radius: 4px;z-index: 10;width:220px;top:4.5%;left:38%;padding:0px !important;border:solid 1px #55823D !important;}
     .message .messageText{color:#558038 !important;position:relative;bottom:4px;}
     .infoM3 .msgIcon, .infoMedium{display:none;}
</style>    
    <apex:composition template="ipmTemplateRevamp2"> 
        <apex:define name="body">
            <div class="gradientbg">
                <div class="row">
                <apex:form >
                   <c:ipmProjectDetailsRevampNew />
                </apex:form>
                </div>
          <!--      <apex:OutputPanel layout="block" styleClass="row" rendered="{!AND(project.IPMProject_Span__c='Local' && project.IPM_Phase__c='Market Ready')}"> 
                        <c:ipmNavMenuBCC activeItem="gateDocument"></c:ipmNavMenuBCC>                        
                   </apex:OutputPanel>
                   <apex:OutputPanel layout="block" styleClass="row" rendered="{!AND(project.IPMProject_Span__c!='Local' && OR(project.IPM_Phase__c!='Feasibility',project.IPM_Phase__c!='Capability',project.IPM_Phase__c!='Ideas',project.IPM_Phase__c!='Market Ready'))}" > 
                        <c:ipmNavMenuRevamp2 activeItem="gateDocument"/>
                   </apex:OutputPanel>  -->
                   <apex:OutputPanel layout="block" styleClass="row" rendered="{!AND(project.IPMProject_Span__c='Local' && project.IPM_Phase__c!='Market Ready' && project.IPM_Phase__c!='Market Deployment' && project.IPM_Phase__c!='PLE')}"> 
                        <c:ipmNavMenuBCC activeItem="overview"></c:ipmNavMenuBCC>                        
                   </apex:OutputPanel>
                   <apex:OutputPanel layout="block" styleClass="row" rendered="{!AND(project.IPMProject_Span__c!='Local' && OR(project.IPM_Phase__c!='Feasibility',project.IPM_Phase__c!='Capability',project.IPM_Phase__c!='Ideas',project.IPM_Phase__c!='Market Ready'))}" > 
                        <c:ipmNavMenuRevamp2 activeItem="overview"/>
                   </apex:OutputPanel>
                    <apex:OutputPanel layout="block" styleClass="row" rendered="{!AND(project.IPMProject_Span__c='Local' && OR(project.IPM_Phase__c='PLE',project.IPM_Phase__c='Market Deployment'))}" > 
                        <c:ipmNavMenuRevamp2 activeItem="overview"/>
                   </apex:OutputPanel>
            </div>
            <div class="ipmContent">
                <apex:form id="form">
                <apex:outputPanel id="showMsg" layout="block">
           
             <apex:outputPanel id="floatedSaveMsg" layout="block" styleClass="floatedMsg" >
              <apex:pageMessages id="pgmsg"  /> 
            
             </apex:outputPanel>
             </apex:outputPanel>
             <apex:actionPoller action="{!hideSaveMsg}" reRender="floatedSaveMsg" interval="5"/><!--to hide the message-->
                    <div class="col-sm-12 noPadleft">
                        <div class="panel-group pageHeadToolbar clearfix">
                            <div class="row">
                                <div class="bcctitleContainer pull-left">
                                    <span class="pageTitle">
                                        Business Case Confirmation Document (Contract)
                                    </span>
                                    <!--<div class="SecFillProgress">
                                        <apex:outputPanel id="fill">
                                            <div class="fillProgress">
                                            <span>10%</span>
                                            </div>
                                            <div class="fillProgressTxt">Filled-in</div>
                                        </apex:outputPanel>
                                    </div> -->           
                                </div>
                                <div class="bccStatusContainer pull-right clearfix">                    
                                    <div class="SecButtonSet pull-right">
                                       <!-- <apex:commandLink action="{!printBosscard}" styleClass="icoButton print" title="Print" reRender="nameMsg"/>-->
                                       <!-- <apex:commandLink styleClass="icoButton history" title="Download"/> -->
                                        <apex:commandLink styleClass="icoButton download" title="Download"/>
                                       <!-- <apex:commandLink styleClass="icoButton share" title="Download"/> -->
                                       <!-- <apex:commandLink action="{!shareViaChatter}" styleClass="icoButton share" title="Share"/>-->
                                    </div>
                                    <apex:outputPanel >
                                        <div class="SecStatusUpdate pull-right updateBox" data-toggle="modal" data-target="#ipmModalConfirmBcc" title="Skip Bosscard" data-backdrop="static" data-keyboard="false" >
                                            <a class="ipmButton orangebg">Confirm business case</a>
                                            <!--<input type="button" class="ipmButton primary" value="Update Status"/>-->
                                        </div>
                                    </apex:outputPanel>
                                    <div class="SecCurrentStatus pull-right">
                                        Current Document Status
                                        <apex:outputPanel id="confirmBCC">
                                        <span class="status">
                                        <apex:outputText value="In Progress" rendered="{!!finance.IPM_Business_Case_Confirmed__c }"/>
                                        <apex:outputText value="Confirmed" rendered="{!finance.IPM_Business_Case_Confirmed__c }"/>
                                        </span>
                                        </apex:outputPanel>
                                        
                                    </div>
                               </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-12 bosscardMtop">
                        <div class="pull-right noPadright txtAlignright">
                            <apex:outputPanel >
                                <apex:commandLink value="Cancel" styleClass="ipmButton bosscardmright"/>
                                <apex:commandLink value="Save" action="{!save}" styleClass="ipmButton primary">
                                </apex:commandLink>
                            </apex:outputPanel>
                        </div>
                    </div>
                    <div class="col-sm-12 noPadleft">
                        <div class="ipmAccordion">
                             <div class="bcsinglecontainer">   
                                <span class="pHead">
                                    <span class='expico fa fa-minus'></span>Country Feedback and Requirements
                                </span>
                                <div class="ipmAcrdnExpand">
                                    <div>
                                        <span class="bcFielddesc">Enter your country specific input that is important to the development of the project (e.g. customer requirements, regulatory, margin, competitive or market dynamics, import tariffs/trade agreements etc.). Country input below will be automatically copied into the Brand development document section 7.2</span>
                                        <apex:inputField value="{!finance.IPM_Country_Feedback__c}"/>
                                        <!--<textarea class="bccTextarea" />-->
                                    </div>
                                </div>
                             </div> 
                             <div class="bcsinglecontainer">   
                                <span class="pHead">
                                    <span class='expico fa fa-minus'></span>BD-BB Alignment
                                </span>
                                <div class="ipmAcrdnExpand">
                                    <div>
                                        <span class="bcFielddesc">BD-BB Alignment input below will be automatically copied into the Brand development document section 6.3</span>
                                        <table class="ipmTable table table-bordered gateKeeperlist">
                                        <thead>
                                        <tr>
                                            <th>
                                            Rollouts
                                            </th>
                                            <th>
                                            Business case alignment
                                            </th>
                                            <th>
                                            Target date launch alignment
                                            </th>
                                        </tr>
                                      
                                        </thead>
                                        <tbody>
                                        <tr>
                                        <td>
                                        <apex:outputField value="{!finance.Local_Project__c}"/>
                                        </td>
                                        <td>
                                          <apex:outputText value="{!IF(AND(finance.IPM_Business_Case_Confirmed__c=false,finance.Misaligned__c=false),'Unconfirmed',IF(finance.Misaligned__c=True,'Misaligned',IF(finance.IPM_Business_Case_Confirmed__c=True,'Confirmed','Aligned')))}"></apex:outputText>
                                        </td>
                                        <td>
                                        <apex:outputText value="{!IF(tldAlignment=True,'Aligned','Misaligned')}"></apex:outputText>
                                        </td>
                                        </tr>
                                        </tbody>
                                        </table>
                                    </div>
                                </div>
                             </div> 
                        </div>                                  
                    </div>
                </apex:form>
            </div>
            <div id="ipmModalConfirmBcc" class="modal fade">
            <apex:form >
                <div class="modal-dialog">
                    <div class="modal-content">
                        
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <div class="modal-title">Confirm Business Case: Confirmation</div>
                        </div>
                       
                        <div class="modal-body">
                            <div class="container-fluid">
                                <div class="row">    
                                    <div class="col-sm-12">
                                        <span class="skipDesc">You are about to submit this Business case confirmation document. This decision cannot be changed later and you will not be able to update this document any further. Do you want to confirm?</span>
                                    </div>
                                    
                                    <div class="skipButtoncontainer txtAlignright pull-right">
                                        <div class="buttonMarginRight noPadright fleft">
                                            <input type="button" class="ipmButton" value="Cancel" data-dismiss="modal" />
                                        </div>
                                        <div class="fleft noPadright confirmcase">
                                            <apex:commandLink styleClass="ipmButton primary" value="Confirm Business Case" action="{!changeStatus}"/>
                                        </div> 
                                    </div>
                                </div>  
                            </div>          
                        </div>
                    </div>
                </div>
            </apex:form>    
            </div>
        </apex:define>
    </apex:composition>
        <apex:includeScript value="{!URLFOR($Resource.ipmResourceRevamp, 'js/functions.js')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/ipmModal1.css')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/ipmHeader-new.css')}"/>
        <apex:includeScript value="{!URLFOR($Resource.ipmResourceRevamp, 'js/ipmAccordion.js')}"/>
        <apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/jquery-ui.css')}"/>
        <script>
            jq(document).ready(function(){
                jq(".ipmAccordion").find(".ipmAcrdnExpand").not(':empty').slideDown("fast");
                jq(".ipmAccordion").find(".pHead .expico").removeClass("fa-plus");
                jq(".ipmAccordion").find(".pHead .expico").addClass("fa-minus");
                jq(".ipmAccordion").find(".pHead .expico-square").removeClass("fa-plus");
                jq(".ipmAccordion").find(".pHead .expico-square").addClass("fa-minus");
           });
           jq(document).on('click', '.updateBox', function(e) { 
                    jq('#ipmModal .modal-dialog').css('margin-top','10%');
            });
            
           function changeStatus(){
               jq(document).on('click', '.confirmcase', function() { 
                    jq("#ipmModalConfirmBcc").modal('hide');
                    
            });
           }
       </script>
</apex:page>