<apex:page controller="IPM_BosscardStatusController" title="Change Bosscard Status" standardStylesheets="true" sidebar="false" showHeader="false">
<apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/ipmModal1.css')}"/>
<style>
    /* Radio button styles */
        
        .statusButtons input[type=radio]{visibility: hidden;width: 0px;height: 0px;}
        .statusButtons label{margin-left: 30%;position: relative;font-weight:normal;color:#555555;float:left;cursor:pointer;width:22px;height:22px;border:1px solid #ccc;border-radius:20px;overflow:visible; white-space: nowrap;}
        .statusButtons label:after{opacity: 0;content: '';position: absolute;width: 6px;height: 6px;background: #007DBD;top: 50%;left: 50%; margin-top:-4px; margin-left:-4px; border: 1px solid #007DBD;border-radius: 40px;}
        .statusButtons input[type=radio]:checked + label:after{opacity:1;}
        .statusButtons input[type=radio]:checked + label{border:2px solid #007DBD;}
        <!--.statusButtons label.selected{border:2px solid #007dbb;}
        .statusButtons{width: 10%;margin-right:20px;margin-top: 0px;float: left;}-->
   /* Tab styles */     
    #ipmUpdateStatusTab .ipmTabContent { width:100%; }
    #ipmUpdateStatusTab .panel {background:transparent;}
    #ipmUpdateStatusTab .ipmStatusTabs {padding:0 0 0 40px; margin:0; border-bottom:2px solid #6C9A40}
    #ipmUpdateStatusTab .ipmStatusTabs li {margin-left:10px !important;display:inline-block;color:#666666;padding:20px 40px; font-weight:bold;cursor:pointer;}
    #ipmUpdateStatusTab .ipmStatusTabs li.active{background:#F3FCEB;border:2px solid #96B87B; color:#496E0F; position:relative; top:2px; border-bottom:2px solid #F3FCEB!important; cursor:pointer; border-top-left-radius:3px; border-top-right-radius:3px;-moz-border-top-left-radius:3px; -moz-border-top-right-radius:3px;-webkit-border-top-left-radius:3px; -webkit-border-top-right-radius:3px;}
    .sContainer{background:#F3FCEB;padding:10px;}
    .StatusContent{margin-top:20px;}
    .StatusLabel{display:block;text-align:center;margin-bottom: 20px;}
    .statusButtonContainer .ipmButton{padding:10px 20px;margin-right:10px;}
    .statusButtonContainer{margin-top: 20px;margin-bottom: 20px;height: 50px;}
    /* custom tooltip styles */
    .toolTipMsg{background:#fafafa;border:1px #c9c9c9 solid; border-radius:2px;color:#364354;font-size:0.82em;position:relative;}          
    .toolTipMsg::before { top: -8px; position: absolute; border-top: 1px #c9c9c9 solid;border-right: 1px #c9c9c9 solid;background: #fafafa;content: " ";height: 15px;width: 15px;transform: rotate(-45deg);-moz-transform: rotate(-45deg);-webkit--transform: rotate(-45deg);-ms-transform: rotate(-45deg); }
    .toolTipMsg label {font-weight:normal;}
    .statusToolTip{padding: 20px;display: block;color: #384454;font-size: 1.2em;}
    .proPointer::before{left:105px;}
    .approvePointer::before{left:260px;}
    .notapprovePointer::before{left:418px;}
    .discardPointer::before{left:580px;}
    
    /* comment area styles */
        .textareaContainer{background:#F9F9F9;padding: 10px;}
        .textareaContainer textarea{width:99%;height: 90px;}
        .commentHeader{color:#364353;display:block;margin-bottom:10px;font-weight:bold;font-size: 1.4em;}
        .commentDesc{display:block;text-align:right;margin-top:5px;color: #384454;}
</style>
<apex:form >
<div class="container-fluid">
    <div class="statusButtonContainer">
        <div class="statusButtons" id="ipmUpdateStatusTab">
            <ul class="ipmStatusTabs">
                <li class="status_progress" onclick="changeBosscardStatus('In Progress');">
                    <div class="statusButtons" >
                        <span class="progressIcon"></span>
                        <span class="StatusLabel">In Progress</span> 
                        <input id="edits" type="radio" name="status"/>
                        <label for="edits"></label>
                    </div>
                </li>
                <li class="status_approved" onclick="changeBosscardStatus('Approved');">
                    <div class="statusButtons">
                        <span class="approvedIcon"></span>
                        <span class="StatusLabel">Approved</span> 
                        <input id="approved" type="radio" name="status"/>
                        <label for="approved"></label>
                    </div>
                </li>
                <li class="status_notapproved" onclick="changeBosscardStatus('Not Approved');">
                    <div class="statusButtons">
                        <span class="notapprovedIcon"></span>
                        <span class="StatusLabel">Not Approved</span> 
                        <input id="postponed" type="radio" name="status"/>
                        <label for="postponed"></label>
                    </div>
                </li>
                <li class="status_discard" onclick="changeBosscardStatus('Discard');">
                    <div class="statusButtons">
                        <span class="discardIcon"></span>
                        <span class="StatusLabel">Discard</span> 
                        <input id="discard" type="radio" name="status"/>
                        <label for="discard"></label>
                    </div>
                </li>
            </ul> 
            <div class="ipmGetStartedContent" id="status_progress">
                <div class="sContainer">
                    <div class="StatusContent">  
                        <div class="col-xs-12 toolTipMsg proPointer marginTop"><span class="statusToolTip">This selection indicates that the BOSSCARD is in progress.</span></div>       
                    </div>   
                </div>
                <div class="textareaContainer">
                    <span class="commentHeader">Comments on status update (optional)</span>
                    <textarea />
                </div>
            </div> 
            <div class="ipmGetStartedContent" id="status_approved">
                <div class="sContainer">
                    <div class="StatusContent">  
                        <div class="col-xs-12 toolTipMsg approvePointer marginTop"><span class="statusToolTip">Congratulations on your BOSSCARD approval. Use the space below to record feedback or actions from your approver. They will be automatically transferred to your draft Charter document.</span></div>
                    </div>   
                </div> 
                <div class="textareaContainer">
                    <span class="commentHeader">Comments on status update (optional)</span>
                    <apex:inputField value="{!bosscard.IPM_Bosscard_Approver_Comments__c}"  />
                    <span class="commentDesc">Goes to Charter Gate Document, sec 1.3-Feedback</span>
                </div>
            </div>
            <div class="ipmGetStartedContent" id="status_notapproved">
                <div class="sContainer">
                    <div class="StatusContent">  
                        <div class="col-xs-12 toolTipMsg notapprovePointer marginTop"><span class="statusToolTip">This selection indicates that the BOSSCARD is not approved.</span></div>       
                    </div>   
                </div>   
                <div class="textareaContainer">
                    <span class="commentHeader">Comments on status update (optional)</span>
                    <textarea />
                </div>  
            </div> 
            <div class="ipmGetStartedContent" id="status_discard">
                <div class="sContainer">
                    <div class="StatusContent">  
                        <div class="col-xs-12 toolTipMsg discardPointer marginTop"><span class="statusToolTip">This selection indicates that the BOSSCARD is discarded.</span></div>       
                    </div>   
                </div>  
                <div class="textareaContainer">
                    <span class="commentHeader">Comments on status update (optional)</span>
                    <textarea />
                </div> 
            </div> 
            <div class="statusButtonContainer pull-right">
                <apex:commandLink value="Cancel" styleClass="ipmButton" onclick="cancel();"/>
                <apex:commandLink action="{!updateStatus}" value="Change" styleClass="ipmButton primary" oncomplete="GotoBosscardParentPage()" reRender="refreshstatus"/>   
            </div>     
        </div>
    </div>
</div>
<apex:actionFunction name="updateBosscardStatus" action="{!setStatus}" reRender="">
<apex:param assignTo="{!bosscard.IPM_Bosscard_Status__c}" value="" name="param1"/>
</apex:actionFunction>
</apex:form>
 <!--<apex:selectRadio value="{!bosscard.IPM_Bosscard_Status__c }" onchange="checkstatus();" >
                    <apex:selectOptions value="{!StatusValue}">
                    </apex:selectOptions>
                </apex:selectRadio>
                <apex:actionfunction action="{!checkApproved}" name="checkstatus" reRender="app"/>
            <apex:outputPanel id="app">
                <apex:inputField value="{!bosscard.IPM_Bosscard_Approver_Comments__c}" rendered="{!isApproved}"/>
            </apex:outputPanel>
        <apex:commandLink value="Cancel" styleClass="ipmButton bosscardmright" onclick="cancel()"/>
        <apex:commandLink action="{!updateStatus}" value="Update" styleClass="ipmButton primary" oncomplete="GotoParentPage()" reRender="refreshstatus"/>-->
     <apex:includeScript value="{!URLFOR($Resource.ipmResourceRevamp, 'js/functions.js')}"/>
      <apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/ipmButtons.css')}"/>
    <apex:includeScript value="{!URLFOR($Resource.ipmResource, 'js/jquery.js')}"/>
    <apex:includeScript value="{!URLFOR($Resource.ipmResource, 'js/bootstrap.js')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResource, 'assets/font-awesome/css/font-awesome.min.css')}"/>
   
    <apex:outputPanel id="refreshstatus">
        <script>
         function cancel()
         {
             window.top.location.href='/apex/ipmbosscard_revamp?id={!bosscard.Id}';
         }
         function GotoBosscardParentPage()
         {
             var status='{!bosscard.IPM_Bosscard_Status__c}';
             if(status=='In Progress' || status=='Not Approved')
             {
                 window.top.location.href='/apex/ipmbosscard_revamp?id={!bosscard.Id}';
             }
             else if(status=='Approved')
             {
                 if('{!$CurrentPage.parameters.goto}'=='true'){
                      window.top.location.href='/apex/ipmProjectSetup?Pid={!project.Id}';
                 }else{
                     window.top.location.href='/apex/ipmHomeRevamp2';
                 }
             }
             else if(status=='In Progress' || status=='Discard')
             {
                 window.top.location.href='/apex/ipmHomeRevamp2';
             }
         } 
         //For Changing the Bosscard Status
         function changeBosscardStatus(status)
         {
             updateBosscardStatus(status);
         }   
        </script>
    </apex:outputPanel>
    <script>
             var jq=jQuery.noConflict();
         jq(document).ready(function(){
            jq('#ipmUpdateStatusTab').parent().find('.ipmGetStartedContent').hide();
                jq('#ipmUpdateStatusTab .ipmStatusTabs li:first').addClass('active'); 
            jq('#ipmUpdateStatusTab').parent().find('.ipmGetStartedContent:first').show(); 
            jq('#ipmUpdateStatusTab .ipmStatusTabs li:first').find('input:radio').prop("checked","true"); 
                jq('#ipmUpdateStatusTab .ipmStatusTabs li').on('click', function(e){ 
                    e.preventDefault();
                    jq('#ipmUpdateStatusTab .ipmStatusTabs li').removeClass('active'); 
                    var getId = jq(this).attr('class');
                    jq(this).addClass('active').find('input:radio').prop("checked","true");  
                    jq('#ipmUpdateStatusTab').parent().find('.ipmGetStartedContent').hide();
                    jq('#'+getId).show();           
                });
            });
        </script>
</apex:page>