<apex:page showHeader="false" sidebar="false" standardStylesheets="true" docType="html-5.0" controller="Oblix_SOWCreateController" action="{!checkUserHasPermissionToSOW}">

	<link rel="stylesheet" type="text/css" href="{!URLFOR($Resource.Oblix_SwopAssets, 'Oblix_SwopAssets/css/unilever-style.css')}" />

	<apex:composition template="Oblix_OuterPageTemplate">

		<apex:define name="top_breadcrumb">
			<a href="/apex/oblix_sowmain">SWOP Home</a>&nbsp;<span>&#9658;</span>&nbsp;{!IF(isEdit, selected_sow.Name, 'Create New SOW')}
		</apex:define>	

        <apex:define name="header_text">
            <apex:outputText rendered="{!isEdit == false}">Create New SOW</apex:outputText>
            <apex:outputText rendered="{!isEdit == true}">Edit {!selected_sow.Name}</apex:outputText>
        </apex:define>

        <apex:define name="body_content">
    		<div class="row" hidden="hidden">
    			<div class="col-lg-8 col-md-8 mandatory_form_info_missing mandatory_form_info_missing_message">
    				<label for="Error" class="create_SOW_form_titles">Please fill in missing information:</label>
    			</div>
    		</div>
    		<div class="row new_sow_form">
            	<div class="col-lg-4 col-md-4">
                    <div class="form-group" id="SOWName">
                        <label for="SOWName" class="create_SOW_form_titles">SOW Name*</label>
                        <apex:inputField value="{!selected_sow.Name_Prefix__c}"  styleClass="form-control" required="true" id="sowName"/>
                    </div>
                    <apex:actionRegion >
	                    <div class="form-group " id="Brand">
	                        <label for="SOWName" class="create_SOW_form_titles">Brand*</label>
	                        <div class="SOW_create_display_flex">
	                            <!--input type="text" class="form-control" id="Brand" placeholder="" /-->
	                            <apex:inputField value="{!selected_sow.OblixBrand__c}"  required="true" id="oblixBrand">
	                            	<apex:actionSupport event="onchange" action="{!getCategoryBrand}" rerender="sowNewIdWrapper"/>
	                            </apex:inputField>
	                        </div>
	                    </div>
	                    <apex:outputPanel id="sowNewIdWrapper">
		                    <div class="form-group" id="BigCategory">
		                        <p class="create_SOW_form_titles">Big Category*</p>
		                        <div class="SOW_create_display_flex">
		                            <apex:inputField value="{!selected_sow.BigOblixProductCategory__c}" id="bigC"/>
		                        </div>
		                    </div>
		                    <div class="form-group" id="SmallCategory" >
		                        <p class="create_SOW_form_titles">Small Category*</p>
		                        <div class="SOW_create_display_flex">
		                            <apex:inputField value="{!selected_sow.SmallProductCategory__c}" id="smallC"/>
		                        </div>
		                    </div>
	    				</apex:outputPanel>
    				</apex:actionRegion>
                    <div class="form-group" id="FinancialYear" >
                        <p class="create_SOW_form_titles">Financial Year*</p>
                        <apex:selectList size="1" value="{!selected_sow.Financial_Year__c}" html-placeholder="{!$ObjectType.Marketing_SOW__c.fields.Financial_Year__c.label}" id="financialYear" styleClass="Oblix_picklist">
                            <apex:selectOptions value="{!FYSelectOptions}"></apex:selectOptions>
                        </apex:selectList>
                    </div>
            	</div>
	            <div class="col-lg-4 col-md-4">
                    <div class="form-group " id="agency">
                        <label for="Agency" class="create_SOW_form_titles">Agency*</label>
                        <div class="SOW_create_display_flex">
                            <apex:inputField value="{!selected_sow.Oblix_AgencyEstimate__c}" id="agencyField" styleClass="" required="true" />
                        </div>
                    </div>
                    <div class="form-group " id="inlineRadioBD">
                        <label for="BDBB" class="create_SOW_form_titles SOW_create_display_block">BD/BB*</label>
                        <apex:inputField value="{!selected_sow.BB_or_BD__c}" id="bdbb" />
                    </div>
                    <div class="form-group" id="AgencyContact" >
                        <p>Agency Contact&nbsp;<span class="form_bracket_text">(Optional)</span>
                        </p>
                        <div class="SOW_create_display_flex SOW_create_contact_box_width" >
                            <apex:inputField value="{!selected_sow.Agency_Contact__c}" styleClass=""/>
                        </div>
                    </div>
                    <div class="form-group" id="UnileverContact" >
                        <p>Unilever Contact&nbsp;<span class="form_bracket_text">(Optional)</span>
                        </p>
                        <div class="SOW_create_display_flex SOW_create_contact_box_width">
                            <apex:inputField value="{!selected_sow.Unilever_Lead__c}"  styleClass=""/>
                        </div>
                    </div>
                    <!--<div class="form-group">
                    	<p>Attachment&nbsp;<span class="form_bracket_text">(Optional)</span></p>
                    	<apex:inputFile value="{!pageAttachment.body}" filename="{!pageAttachment.name}" id="file" styleclass="v3 add_attachment_input" rendered="{!IF(can_add_attachment,true,false)}" />
                        <apex:commandButton styleClass="btn btn-primary btn_plus btn_asset_add" action="{!uploadAttachment}" value="ADD" onclick="return validateFormEntries();" rendered="{!IF(can_add_attachment,true,false)}"/>
                        <br/>
                        <br/>
                        <apex:actionRegion >
                            <apex:outputPanel id="attachmentsBlock">
    	                        <apex:repeat value="{!liso_attachments}" var="eachAttachment">
                                    <div id="attachmentContainer">
                                		<apex:outputPanel rendered="{!IF(can_delete_attachment,true,false)}">
                                            <apex:commandLink styleClass="attachment_item" action="{!deleteAttachment}" reRender="attachmentsBlock,page_message_id">&nbsp;
                                                <apex:param name="attId" value="{!eachAttachment.Id}" assignTo="{!deleteAttachmentId}"/>
                                            </apex:commandLink>
                                        </apex:outputPanel>
                                        <a href="/servlet/servlet.FileDownload?file={!eachAttachment.Id}" target="_blank"> {!eachAttachment.Name}</a>
                                    </div>
    	                        </apex:repeat>
                            </apex:outputPanel>
                        </apex:actionRegion>
                        <apex:outputPanel id="attachment_createmode" rendered="{!isEdit == false && selected_sow.Id == null}">
                    		<div class="alert alert-info" role="alert">SOW will be automatically saved when you upload an attachment</div>
                    	</apex:outputPanel>
                    </div>-->
                    <div class="SOW_create_buttons">
                        <apex:commandButton value="SAVE SOW" action="{!saveAndClose}" title="{!$Label.Oblix_lbl_UIUX_Save_Sow}" onclick="return validateFormEntries();" styleClass="btn btn-primary btn-sm pull-right btn_check btn_save_sow" immediate="false" rendered="{!IF(can_edit,true,false)}"/>
                        <apex:commandButton value="CANCEL" action="{!cancelAction}" title="Cancel" styleClass="btn btn-sm pull-right btn_cross btn_cancel" immediate="true" html-formnovalidate="formnovalidate"/>
                        
                    </div>
	            </div>
	        </div>
        </apex:define>

        <apex:define name="page_scripts">
        	<script type="text/javascript" src="{!URLFOR($Resource.Oblix_SwopAssets, 'Oblix_SwopAssets/js/Oblix_SOWCreate.js')}"/>
        </apex:define>

	</apex:composition>
	
</apex:page>