<apex:page standardController="TMS_Shipment_Items__c" extensions="TMS_Popup_unloadLoadDone_CC" sidebar="false" showHeader="false">
   <apex:form >
     <script language="JavaScript" type="text/javascript">
        function CloseWindow(){  
            if(window.parent){
                window.parent.opener.location.href = window.parent.opener.location.href;
                window.parent.close();
                window.parent.reload();
            }   
            else{
                window.opener.location.href = "{!JSENCODE($CurrentPage.parameters.tmsloadid)}"
                window.close();   
            }   
        }
    </script>
    <apex:pageBlock >
    <apex:pageMessages ></apex:pageMessages>
        <apex:pageBlockSection >
            <apex:pageBlockTable value="{!Tsentryload}" var="ts" columns="2">
                <apex:column headerValue="Truck Number">
                    {!ts.Vehicle_Number__c}
                </apex:column>
                <apex:column headerValue="Bay">
                    {!ts.Bay_Number__c}
                </apex:column>
            </apex:pageBlockTable>
            </apex:pageBlockSection>
            <br/>
            <apex:pageBlockSection >
                <apex:pageBlockTable value="{!shipItem}" var="p">
                    <apex:column headerValue="Shipment Number">
                        {!p.TMS_Shipment__r.Name}
                    </apex:column>
                    <apex:column headerValue="Item No">
                        {!p.Item_No__c}
                    </apex:column>
                    <apex:column headerValue="Material Description">
                        {!p.Material_Description__c}
                    </apex:column>
                    <apex:column headerValue="Quantity Received" >
                        <apex:inputField value="{!p.Quantity_Rcvd__c}" style="width:75px;" rendered="{!IF(p.UOM__c == 'EA' || p.UOM__c == 'PC' || p.UOM__c == 'CS',True,False)}"/>
                    </apex:column>
                    <apex:column headerValue="Choose">
                        <apex:inputField value="{!p.Choose_ShipItem__c}"/> 
                    </apex:column>
                </apex:pageBlockTable>
                
        </apex:pageBlockSection>
            <apex:pageBlockButtons >
            <apex:commandButton action="{!save}" value="Save" oncomplete="CloseWindow()"/>
            <apex:commandButton value="Cancel" onclick="CloseWindow()"/>
            </apex:pageBlockButtons>
    
    </apex:pageBlock>
 </apex:form>
</apex:page>