<!-- 
***********************************************
*@Description: Â User is able to update project details from landing page of the core parameter.
*@Author: Cognizant
*@Created Date: 17/02/2015 
*@Copyright Â© 2015  Unilever 
************************************************
--> 
<apex:page standardController="IPM_Project__c" extensions="IPM_ProjectSetUpController,IPM_GetHelpDoc" showHeader="false" sidebar="false" standardStylesheets="true" docType="html-5.0">  
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/jquery-ui.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_Modal1.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_Buttons.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'assets/font-awesome/css/font-awesome.min.css')}"/>   
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/bootstrap.min.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_Checkbox.css')}"/> 
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_RadioButton.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_EditProject.css')}"/> 
    <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_ProjectSetupDesign.css')}"/>
    
    <div class="container-fluid">
        <apex:form >   
            <div class="col-sm-12 editProTop">
            <apex:outputPanel rendered="{!!project.IPM_IsSaved__c}">
                <div class="row">    
                    <div class="col-sm-12">
                        <apex:outputPanel layout="inline" styleClass="newProjinfo" rendered="{!isEditable}" >{!$Label.IPM_ESSENTIAL_INFFORMATION}</apex:outputPanel>
                    </div>
                </div>
                <apex:outputPanel layout="block" id="Container5">
                    <apex:outputPanel styleClass="oprtnTopAlertContainer" layout="block" >
                        <apex:outputLabel styleClass="oprtnTopAlertLabel" value="{!$Label.IPM_ProjectTypeAndCompany_ReadOnly}"  />
                    </apex:outputPanel>
                </apex:outputPanel>
                <apex:outputPanel id="formMessage" styleClass="proSuccessMsg" layout="block" >
                    <apex:pageMessages />
                </apex:outputPanel>
            </apex:outputPanel>
                <apex:actionFunction name="callBackFunction1" reRender="teamMemberPanel" action="none"/>
                <div class="row">
                    <div class="col-sm-12">
                        <div class="col-sm-2 noPadleft noPadright">
                            <div class="panel">
                                <div class="panel-body imageBorder">
                                    <apex:actionFunction name="deleteProjectImage" action="{!removeProjectLogo}" reRender="imgpn"/>                                                            
                                    <apex:actionFunction name="callsave" action="{!saveProceed}" reRender="isID,formMessage">
                                        <apex:param assignTo="{!skipValidation}" value="true" />
                                    </apex:actionFunction> 
                                    <apex:outputPanel id="imgpn">                                                           
                                        <apex:outputPanel id="isID" > 
                                            <div value="{!$Page.IPM_ImageUpload}?isProject=true&id={!project.id}" title="{!$Label.IPM_CLICK_TO_UPLOAD_IMAGE}" onClick="callsave();" class="uploadImage upImageContainer" data-target="#ipmUploadImage" data-toggle="modal" data-keyboard="false" data-backdrop="static">
                                                <apex:image styleClass="ipmImage" value="{!URLFOR($Resource.IPM_Resource, 'images/pro_placeholder.png')}" rendered="{!If(AND(OR(ImageId=='',ImageId==null),OR(project.IPM_Project_Logo__c==null,project.IPM_Project_Logo__c=='')),true,false)}" title="{!$Label.IPM_CLICK_TO_UPLOAD_IMAGE}"/>
                                                <apex:image url="/servlet/servlet.FileDownload?file={!ImageId}" styleClass="ipmImage" rendered="{! if(AND(ImageId !='',ImageId !=null),true,false)}" /> 
                                                <apex:outputfield value="{!project.IPM_Project_Logo__c}" rendered="{! if(AND(OR(ImageId=='',ImageId==null),OR(project.IPM_Project_Logo__c!='',project.IPM_Project_Logo__c!=null)),true,false)}"/>
                                            </div>
                                            <apex:outputPanel layout="block" rendered="{!project.IPM_Project_Logo__c!=null}">
                                                <div class="imgHoverContainer">
                                                    <div class="imgHbuttonContainer">
                                                       <span value="{!$Page.IPM_ImageUpload}?id={!project.id}&isProject=true&isEdit=true" title="{!$Label.IPM_CLICK_TO_UPLOAD_IMAGE}" class="uploadImage" data-target="#ipmUploadImage" data-toggle="modal" data-keyboard="false" data-backdrop="static">
                                                           <apex:commandLink value="Update" styleClass="imgUpdateButton" action="{!save}" reRender="none" rendered="{!project.IPM_Project_Logo__c!=null}">
                                                                
                                                           </apex:commandLink>
                                                       </span>
                                                       <span class="imgDelButton" data-target="#deleteImgPop" data-toggle="modal" data-keyboard="false" data-backdrop="static">Delete</span>
                                                    </div>
                                                </div>
                                            </apex:outputPanel> 
                                        </apex:outputPanel> 
                                    </apex:outputPanel>                                      
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-9">
                            <div class="col-sm-11 noPadleft">                            
                            
                                <apex:outputPanel id="ProjectNamePanel" styleClass="inputField oneCol">
                                    <apex:outputPanel layout="block"  styleClass="required proNameContainer">
                                        <apex:outputLabel value="{!$Label.IPM_PROJECT_NAME}" styleClass="bsFieldLabel" />
                                        <span class="mandatorycolor">*</span>
                                        <span class="SecButtonSet infoMarTop">
                                            <a class="icoButton info" title="{!$Label.IPM_ProjectNameHelpText}"></a>        
                                        </span>
                                        <apex:inputText value="{!project.IPM_Project_Name__c}" id="proname"  styleClass="brandautocomplete proNameBox"  onkeyup="var u=this.value.toUpperCase();if(this.value!=u){this.value=u;};dupProjectName();"  maxlength="14" rendered="{!AND(isEditable,OR(project.IPM_Phase__c=null,project.IPM_Phase__c='',project.IPM_Phase__c!='PLE'),project.IPM_Project_Type__c!=isRollout)}" />
                                        <apex:actionfunction name="dupProjectName" action="{!searchDuplicateProject}" rerender="refreshProjectName"/>
                                        <apex:outputpanel id="refreshProjectName" >
                                            <apex:outputpanel layout="block" styleClass="autoContainer" rendered="{!!isProjectNameBlank}">
                                                <apex:repeat value="{!listofprojectname}" var="proList">          
                                                    <apex:outputLabel styleClass="bcAuto" value="{!proList.IPM_Project_Name__c}"/>         
                                                </apex:repeat> 
                                            </apex:outputpanel> 
                                        </apex:outputpanel>
                                        
                                        <apex:outputField rendered="{!OR(!isEditable,project.IPM_Phase__c='PLE',project.IPM_Project_Type__c=isRollout)}" value="{!project.IPM_Project_Name__c}"/>
                                        <apex:outputPanel id="nameMsg">
                                            <apex:outputText value="{!$Label.IPM_ENTER_PROJECT_NAME}" rendered="{!AND(isBusinessError,CONTAINS(businessErrorField,'IPM_Project_Name__c'))}" styleClass="ErrMsg"/>
                                            <apex:outputText value="{!$Label.IPM_DO_NOT_SPECIAL_CHAR}" rendered="{!isContainSpecialChars}" styleclass="projDescErrMsg"/>
                                            <apex:outputText value="{!$Label.IPM_Project_Name_Exists}" rendered="{!isDupProjectname}" styleclass="projDescErrMsg"/>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                    <apex:outputPanel layout="block"  styleClass="inputField">  
                                        <apex:outputLabel value="{!$Label.IPM_PROJECT_DESCRIPTION}" styleClass="bsFieldLabel descTop" />
                                        <apex:inputTextarea id="projDesc" value="{!project.IPM_Project_Description__c}" rendered="{!isEditable}"  styleClass="limitdesc BosscardNameInputBox"  />
                                        <apex:outputPanel id="DescMsg" styleClass="proDescLabel" >
                                            <apex:outputText value="{!$Label.IPM_ENTER_PROJECT_DESCRIPTION}" rendered="{!AND(isBusinessError,CONTAINS(businessErrorField,'IPM_Project_Description__c'))}" styleClass="projDescErrMsg"/>   
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleClass="proDescLabel"  >
                                            <apex:outputField value="{!project.IPM_Project_Description__c}" rendered="{!!isEditable}"/>
                                        </apex:outputPanel>
                                        <apex:outputPanel layout="block" styleClass="txtRight" rendered="{!isEditable}"> 
                                            <span id="charCountRemainingText"> {!$Label.IPM_CHAR_REMAINING} </span> 
                                            <span id="charCountRemaining">{!$Label.IPM_CHAR_70}</span>
                                        </apex:outputPanel>
                                    </apex:outputPanel>     
                                </apex:outputPanel>
                                <div class="row">
                                    <div class="col-sm-6 proMarginbottom">
                                        <apex:outputPanel id="CompanyCardPanel" styleClass="inputField">
                                            <div class="bsFieldLabel"><apex:outputlabel value="Company" /><span class="mandatorycolor"> *</span></div>
                                            <label class="ipmSelect">
                                                <apex:actionRegion >
                                                    <apex:outputPanel >
                                                        <apex:selectList size="1" value="{!project.IPM_Company_Card__c}" onchange="callCompanyCard();" styleClass="selCompany" disabled="{!OR(ISBLANK(project.Id),project.IPM_IsSaved__c,NOT(isEditable))}">  
                                                            <apex:selectOptions value="{!Allcompanycard}" />
                                                        </apex:selectList>
                                                    </apex:outputPanel>
                                                    <apex:actionfunction name="callCompanyCard" onComplete="callBrandPos();" action="{!populateCategory}" reRender="ProjectSubTypePanel,WhiteSpaceFastTrackPanel,fastTrackPanel,whiteSpacePanel,gateKeepingPanel,questionCharter,categoryPanel,BrandPositionPanel,pos,selectNextTabScript,multiBPositions" status="refreshCategory" />
                                                    <apex:actionfunction name="callBrandPos" action="{!none}" reRender="BrandPositionPanel,multiBPositions" status="refreshCategory" />
                                                                                
                                                </apex:actionRegion>
                                            </label>
                                            <apex:outputPanel layout="block" id="CompanyMsg">
                                                <apex:outputText value="{!$Label.IPM_Company_Card_Mandatory}" rendered="{!AND(isBusinessError,CONTAINS(businessErrorField,'IPM_Company_Card__c'))}" styleClass="brandErrMsg"/>
                                            </apex:outputPanel>
                                        </apex:outputPanel>      
                                    </div>    
                                    <div class="col-sm-6 proMarginbottom rightColumn">
                                        <apex:outputPanel id="categoryPanel" styleClass="inputField">
                                            <apex:outputLabel value="{!$Label.IPM_CATEGORY}" styleClass="bsFieldLabel" /><span class="mandatorycolor"> *</span>                                                                       
                                            <label class="ipmSelect custSelectWidth">
                                                <apex:actionRegion >
                                                    <apex:actionStatus startText="" id="refreshCategory" startStyleClass="proInit"/>
                                                    <apex:selectList value="{!project.IPM_Category_Text__c}" multiselect="false" size="1" id="cat" disabled="{!IF(OR(!isEditable,AND(isEditable,project.IPM_Phase__c!=projectMetadata.IPM_DefaultPhase__c,project.IPM_Phase__c !=null)),true,false)}" styleClass="selCategory">
                                                        <apex:actionSupport event="onchange" action="{!none}" reRender="BrandPositionPanel,selectNextTabScript" status="refreshPos" />  
                                                        <apex:selectOptions value="{!Category}"></apex:selectOptions>
                                                    </apex:selectList>
                                                </apex:actionRegion>
                                            </label>
                                            <apex:outputPanel id="CateMsg">
                                                <apex:outputText value="{!$Label.IPM_SELECT_CATEGORY}" rendered="{!AND(isBusinessError,CONTAINS(businessErrorField,'IPM_Category_Text__c'))}" styleClass="categoryErrMsg"/>
                                            </apex:outputPanel>
                                        </apex:outputPanel>     
                                    </div>
                                </div>      
                                <div class="row">
                                    <apex:outputPanel id="ProjectSubTypePanel" styleClass="col-sm-12">
                                        <apex:outputPanel layout="block" styleClass="inputField"  rendered="{!projectSubTypes.size > 0}"> 
                                            <apex:outputPanel layout="block" styleClass="inputField oprtnRadioContainer" >
                                                <apex:outputLabel value="{!$Label.IPM_SelectProjectType}" styleClass="bsFieldLabel" /><span class="mandatorycolor"> *</span>                                                                     
                                                <div class="ipmRadioButton oprtnRadiobtn">                                                                                      
                                                    <apex:selectRadio styleClass="{!IF(project.IPM_IsSaved__c == true,'disable','')}" value="{!project.IPM_ProjectSubType__c}"  disabled="{!OR(project.IPM_IsSaved__c,NOT(isEditable))}" > 
                                                        <apex:actionSupport event="onchange" action="{!populateProjectInformation}" reRender="BrandPositionPanel,gateKeepingPanel,questionCharter,WhiteSpaceFastTrackPanel,selectNextTabScript" status="refreshPos" />  
                                                        <span><apex:selectOptions value="{!projectSubTypes}"></apex:selectOptions></span>
                                                    </apex:selectRadio>
                                                </div>
                                                <apex:variable value="{!1}" var="rowNum"/>
                                                <apex:repeat value="{!projectSubTypes}" var="subProjectType" rendered="{!OR(NOT(project.IPM_IsSaved__c),isEditable)}">
                                                    
                                                    <div class="radioTooltip{!rowNum} toolTipMsg oprtnToolTipMsg" data-toggle="tooltip" selectedValue="{!subProjectType.value}" > 
                                                        <span>{!$Label[HelpTextProjectSubType[subProjectType.value]]}</span>
                                                    </div>
                                                    <apex:variable var="rowNum" value="{!rowNum + 1}"/>
                                                </apex:repeat>                                 
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" rendered="{!OR(NOT(project.IPM_IsSaved__c),isEditable)}" >
                                                <apex:outputText value="{!$Label.IPM_SELECT_PROJECTSUBTYPE}" rendered="{!AND(isBusinessError,CONTAINS(businessErrorField,'IPM_ProjectSubType__c'))}" styleClass="brandErrMsg"/>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                </div>
                                <div class="row brandPosContainer">
                                    <div class="col-sm-6"> 
                                        <apex:outputPanel id="BrandPositionPanel" layout="block" styleClass="inputField">
                                            <apex:outputLabel value="{!$Label.IPM_BRAND_POSITIONING}" styleClass="bsFieldLabel" /><span class="mandatorycolor"> *</span>
                                            <apex:actionStatus startText="" id="refreshPos" startStyleClass="proInit"/>    
                                            <apex:outputPanel id="SingleBrandPanel" rendered="{!NOT(projectMetadata.IPM_MultipleBrandPosApplicable__c)}">
                                                <label class="ipmSelect custSelectWidth">
                                                    <apex:selectList value="{!project.IPM_Brand_Positioning__c}" multiselect="false" size="1" disabled="{!IF(OR(!isEditable,AND(isEditable,project.IPM_Phase__c!=projectMetadata.IPM_DefaultPhase__c,project.IPM_Phase__c !=null)),true,false)}"  styleClass="selBrandPos" >
                                                        <apex:selectOptions value="{!brandPos}"></apex:selectOptions>
                                                    </apex:selectList>
                                                </label>
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" rendered="{!AND(projectMetadata.IPM_MultipleBrandPosApplicable__c)}" styleClass="noPadright noPadleft dropdown brandposListContainer ipmDropDown" >    
                                                
                        <apex:outputPanel rendered="{!IF(OR(!isEditable,AND(isEditable,project.IPM_Phase__c!=projectMetadata.IPM_DefaultPhase__c,project.IPM_Phase__c !=null)),true,false)}"  >
                            <apex:OutputText value="{!project.IPM_Brand_Positioning__c}" id="brandPosDisableField"/>
                        </apex:outputPanel>
                        
                        <apex:outputpanel rendered="{!IF(OR(!isEditable,AND(isEditable,project.IPM_Phase__c!=projectMetadata.IPM_DefaultPhase__c,project.IPM_Phase__c !=null)),false,true)}">
                        
                        <apex:outputPanel html-data-toggle="dropdown" layout="block" styleClass="clickCmiList" >
                                                    <div class="ipmDropDownSelect">
                                                        <span class='brandSelValues'>Select</span>
                                                        <a class="listArrow"></a>    
                                                    </div>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" styleClass="dropdown-menu pull-right ipmDropDownList brandposList" >
                                                    <apex:inputText value="{!project.IPM_Brand_Positioning__c}" id="brandHiddenField" styleClass="hiddenBrand" />
                                                    <apex:dataList value="{!brandPos}" var="cou" id="brandposListUL" styleClass="cccmiList">                                                               
                                                        <div class="col-xs-1 ipmCheckbox">
                                                            <input class="brandPosListbox" type="checkbox" value="{!cou.value}" id="{!cou.value}" />
                                                            <label for="{!cou.value}"></label>
                                                        </div>
                                                        <div class="col-xs-8 noPadleft brandPosLabel">{!cou.label}</div>                                                                
                                                    </apex:dataList>
                                                    <apex:outputPanel rendered="{!isEditable}" >
                                                        <li class="filterActionscc">
                                                            <div class="ipmButtonGroup noPadleft noPadright col-xs-6 pull-left">
                                                                <a value="Done" class="ipmDropbuttonscc" onClick="">Done</a>
                                                            </div>
                                                            <div class="ipmButtonGroup noPadleft noPadright col-xs-6 pull-left">   
                                                                <a value="Reset" class="ipmDropresetcc">Reset</a>
                                                            </div>
                                                        </li>
                                                    </apex:outputPanel>
                                                </apex:outputPanel>  
                        </apex:outputPanel>
                                            </apex:outputPanel>
                        
                                            <apex:outputPanel layout="block">
                                                <apex:outputText value="{!$Label.IPM_SELECT_BRAND_POSITIONING}" rendered="{!AND(isBusinessError,CONTAINS(businessErrorField,'IPM_Brand_Positioning__c'))}" styleClass="brandErrMsg"/>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </div>
                                    <div class="col-sm-6 rightColumn">
                                        <apex:outputPanel layout="block" id="TargetDatePanel" styleClass="inputField launchPeriod" >
                                            <div class="tldLabel"><apex:outputLabel value="{!$Label.IPM_TARGET_LAUNCH_DATE}" styleClass="bsFieldLabel" /><span class="mandatorycolor"> *</span></div>
                                            <apex:inputField value="{!project.IPM_Target_Launch_Dates__c}" styleClass="dateInputBox tldBox calendar" rendered="{!And(isEditable,isTLDFieldEditable)}" onfocus="DatePicker.pickDate(true, this , false);" onchange="TLDDateCheck()"/>                                                              
                                            <apex:outputField value="{!project.IPM_Target_Launch_Dates__c}" rendered="{!OR(!isEditable,!isTLDFieldEditable)}"/>
                                            <apex:outputLabel value="{!project.IPM_Target_Launch_Date__c} [In Bosscard]" styleClass="tldQ" rendered="{!IF(project.IPM_Target_Launch_Date__c !='','true','false')}"/>
                                            <apex:outputPanel id="TLDPMsg">
                                                <apex:outputText value="{!$Label.IPM_SELECT_TLD}" rendered="{!AND(isBusinessError,CONTAINS(businessErrorField,'IPM_Target_Launch_Dates__c'))}" styleClass="TldErrMsg"/>
                                                <apex:outputText value="{!$Label.IPM_TLD_SHOULD_BE_GREATER_THAN_TODAY}" rendered="{!isTLDLessThnSixMnth}" styleClass="TldErrMsg"/>
                                                <apex:outputText value="{!$Label.IPM_TLD_SHOULD_BE_GREATER_THAN_TODAYDate}" rendered="{!isTLDLessThnToday}" styleClass="TldErrMsg"/>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-sm-12"> 
                                        <apex:outputPanel layout="block" styleClass="inputField"  id="questionCharter" >                                              
                                            <apex:outputPanel layout="block" styleClass="inputField oprtnRadioContainer contractContainer" rendered="{!projectMetadata.IPM_Charter_Question_Applicable__c}">
                                                <apex:outputLabel value="{!$Label.IPM_WHO_WILL_APPROVE_CHARTER_GATE}" styleClass="bsFieldLabel editDspBlock" />
                                                <apex:outputPanel layout="inline" styleClass="mandatorycolor" rendered="{!CONTAINS(projectMetadata.IPM_MadatoryFields__c,'IPM_Charter_Question_Applicable__c')}"></apex:outputPanel>
                                                <div class="ipmRadioButton gcltquestions">  
                                                    <apex:selectRadio styleClass="{!IF(OR(!isEditable,AND(isEditable,project.IPM_Phase__c!=projectMetadata.IPM_DefaultPhase__c,project.IPM_Phase__c !=null)),'disable','')}" value="{!project.IPM_Approver_of_Charter__c}" disabled="{!IF(OR(!isEditable,AND(isEditable,project.IPM_Phase__c!=projectMetadata.IPM_DefaultPhase__c,project.IPM_Phase__c !=null)),true,false)}" >
                                                        <apex:selectOptions value="{!charterApprovers}"></apex:selectOptions>
                                                    </apex:selectRadio>
                                                </div>
                                                <apex:variable value="{!1}" var="rowNum"/>
                                                <apex:repeat value="{!charterApprovers}" var="charterQues">
                                                    <div class="radioTooltip{!rowNum} toolTipMsg charterQuesMsg" data-toggle="tooltip" selectedValue="{!charterQues.value}" > 
                                                        <span>{!$Label[HelpTextCharterQuestions[charterQues.value]]}</span>
                                                    </div> 
                                                    <apex:variable var="rowNum" value="{!rowNum + 1}"/>
                                                </apex:repeat>                                 
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" rendered="{!OR(NOT(project.IPM_IsSaved__c),isEditable)}" >
                                                <apex:outputText value="{!$Label.IPM_SELECT_GATEKEEPING}" rendered="{!AND(isBusinessError,CONTAINS(businessErrorField,'IPM_GateKeeping_Model__c'))}" styleClass="brandErrMsg"/>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-sm-12"> 
                                        <apex:outputPanel layout="block" styleClass="inputField"  id="gateKeepingPanel" >                                              
                                            <apex:outputPanel layout="block" styleClass="inputField oprtnRadioContainer contractContainer" rendered="{!projectMetadata.IPM_GatekeepingModelsApplicable__c}">
                                                <apex:outputLabel value="{!$Label.IPM_WHO_WILL_APPROVE_CONTRACT_MR}" styleClass="bsFieldLabel editDspBlock"/>
                                                <apex:outputPanel layout="inline" styleClass="mandatorycolor" rendered="{!CONTAINS(projectMetadata.IPM_MadatoryFields__c,'IPM_GateKeeping_Model__c')}"></apex:outputPanel>
                                            
                                                <div class="ipmRadioButton gateKeepingModel">
                                                    <apex:selectRadio styleClass="{!IF(OR(!isEditable,AND(isEditable,project.IPM_Phase__c!=projectMetadata.IPM_DefaultPhase__c,project.IPM_Phase__c !=null)),'disable','')}" value="{!project.IPM_GateKeeping_Model__c}"  disabled="{!IF(OR(!isEditable,AND(isEditable,project.IPM_Phase__c!=projectMetadata.IPM_DefaultPhase__c,project.IPM_Phase__c !=null)),true,false)}" >
                                                        <apex:selectOptions value="{!gateKeepingModels}"></apex:selectOptions>
                                                    </apex:selectRadio>
                                                </div>
                                                <apex:variable value="{!1}" var="rowNum"/>
                                                <apex:repeat value="{!gateKeepingModels}" var="gateKeeperModel">
                                                    <div class="radioTooltip{!rowNum} toolTipMsg gateKModel" data-toggle="tooltip" selectedValue="{!gateKeeperModel.value}" > 
                                                        <span>{!$Label[HelpTextGateKeeping[gateKeeperModel.value]]}</span>
                                                    </div>
                                                    <apex:variable var="rowNum" value="{!rowNum + 1}"/>
                                                </apex:repeat>                                 
                                            </apex:outputPanel>
                                            <apex:outputPanel layout="block" rendered="{!OR(NOT(project.IPM_IsSaved__c),isEditable)}" >
                                                <apex:outputText value="{!$Label.IPM_SELECT_GATEKEEPING}" rendered="{!AND(isBusinessError,CONTAINS(businessErrorField,'IPM_GateKeeping_Model__c'))}" styleClass="brandErrMsg"/>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </div>
                                </div>
                                      
                                <div class="row">
                                    <div class="col-sm-12"> 
                                        <apex:outputPanel id="WhiteSpaceFastTrackPanel">
                                        <apex:outputPanel rendered="{!OR(projectMetadata.IPM_FastTrackApplicable__c,projectMetadata.IPM_WhiteSpaceApplicable__c)}"> 
                                        <div class="col-sm-12 yellowBox noPadleft">
                                            <apex:outputPanel id="fastTrackPanel" styleClass="fastTrackBox" >
                                                <apex:outputPanel rendered="{!projectMetadata.IPM_FastTrackApplicable__c}" > 
                                                    <apex:inputCheckbox styleClass="fastTrackcheck" value="{!project.IPM_Fast_Track_Project__c }" disabled="{!IF(OR(!isEditable,AND(isEditable,project.IPM_Phase__c!=projectMetadata.IPM_DefaultPhase__c,project.IPM_Phase__c!='Feasibility',project.IPM_Phase__c!='Capability')),true,false)}"/>
                                                    <span class="projectraLabel">{!$Label.IPM_FAST_TRACK}</span>
                                                    <apex:actionSupport event="onchange" reRender="FastTrackHelpTextpanel"  />
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                            <apex:outputPanel id="whiteSpacePanel" styleClass="whiteSpaceBox" >
                                                 <apex:outputPanel rendered="{!projectMetadata.IPM_WhiteSpaceApplicable__c}" >
                                                    <apex:inputCheckbox styleClass="fastTrackcheck" value="{!project.IPM_White_Space_Project__c}" disabled="{!IF(OR(!isEditable,AND(isEditable,project.IPM_Phase__c!=projectMetadata.IPM_DefaultPhase__c)),true,false)}"/>
                                                    <apex:actionSupport event="onchange" reRender="WhiteSpaceHelpTextpanel"  />
                                                    <span class="projectraLabel">{!$Label.IPM_White_Space}</span>
                                                    <apex:actionSupport event="onchange" reRender="WhiteSpaceHelpTextpanel"  />
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                        </div>
                                        <apex:outputPanel id="FastTrackHelpTextpanel">
                                            <apex:outputPanel styleClass="col-sm-12 toolTipMsg radioTooltip10 marginT20" layout="block" rendered="{!AND(project.IPM_Fast_Track_Project__c,isEditable)}" >
                                                <apex:outputText value="{!$Label.IPM_FastTrack_HelpText}" />
                                             </apex:outputPanel>
                                        </apex:outputPanel>
                                        <apex:outputPanel id="WhiteSpaceHelpTextpanel">
                                            <apex:outputPanel styleClass="col-sm-12 yellowBox" layout="block" rendered="{!AND(project.IPM_White_Space_Project__c,isEditable)}" >
                                            <apex:outputText value="{!$Label.IPM_WhiteSpace_HelpText}" />
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:outputPanel>
                                    </div>
                                </div>
                                <div class="col-sm-12 noPadleft">
                                    <span class="fieldnote"><span class="mandatorycolor">*</span> {!$Label.IPM_MARKED_FIELDS_MANDATORY}</span>
                                </div>
                            </div>
                        </div>
                        <!-- To place the help symbol in the top right hand corner of page -->
                        <div class="col-sm-1">
                            <div class="row">
                            <apex:outputPanel layout="block" styleClass="SecButtonSet delete pull-right" >
                                <apex:outputLink value="{!URL}" id="theLink" styleClass="icoButton question" target="_blank" title="{!$Label.IPM_Help}">?</apex:outputLink>
                            </apex:outputPanel> 
                            </div>
                        </div>                      
                    </div>
                </div> 
               
            </div>
            <div class="col-sm-12">
                <div class="pull-right renderBtnset txtAlignright">
                    <apex:actionStatus startText="" id="Loading" startStyleClass="proInit"/>
                    <apex:commandLink value="{!$Label.IPM_Update}"  action="{!saveProceed}" rendered="{!AND(isEditable,project.IPM_Phase__c!=null)}" styleClass="coreparameters custMarginbottom ipmButton primary"  reRender="CompanyCardPanel,ProjectNamePanel,Container5, refreshquit,miles,selectNextTabScript,categoryPanel,ProjectSubTypePanel,gateKeepingPanel,questionCharter,WhiteSpaceFastTrackPanel,CompanyCardPanel,BrandPositionPanel,TargetDatePanel,formMessage,editProjectAction" oncomplete="Closepopup();">
                    </apex:commandLink>
                </div>
                <div class="proSetupButton pull-right">
                    <a class="ipmButton" onClick="pagerefresh()">{!$Label.IPM_Reset}</a>
                </div>    
            </div>
        </apex:form>
    </div>
    <div id="deleteImgPop" tabindex="-1" data-backdrop-limit="1" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <div class="modal-title">{!$Label.IPM_Delete_Image}</div>
                </div>
                <div class="modal-body">
                    <div class="removeapprpopup">
                        <span class="removeApprText">{!$Label.IPM_Image_Removal}</span>
                        <div class="remvButtonContainer pull-right">  
                            <div class="pull-left buttonMarginRight noPadright">
                                <input type="button" class="ipmButton" data-dismiss="modal" value="Cancel"/>
                            </div>
                            <div class="buttonMarginRight noPadright pull-left" >
                                <span class="ipmButton primary" data-dismiss="modal" onClick="deleteProjectImage();">Delete</span>
                            </div>
                        </div>
                    </div>        
                </div>
            </div>
        </div>
    </div> 
    <div id="ipmUploadImage" tabindex="-1" data-backdrop-limit="1" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" onClick="closeimagepopup()" aria-hidden="true">&times;</button>
                    <div class="modal-title">{!$Label.IPM_UPLOAD_IMAGE}
                    </div>
                </div>
                <div class="modal-body">
                    
                </div>
            </div>
        </div>
    </div>  

<!-- Modal -->
    <div id="tldWarningDialog" tabindex="-1" data-backdrop-limit="1" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <div class="modal-title">{!$Label.Business_Case_Update_Needed}</div>
                </div>
                <div class="modal-body">
                    <div class="removeapprpopup">
                        <span class="removeApprText">{!$Label.Business_Case_Update_Needed_Value}</span>
                        <div class="remvButtonContainer pull-right">  
                            <div class="pull-left buttonMarginRight noPadright">
                                <input type="button" class="ipmButton" data-dismiss="modal" value="{!$Label.Cancel_and_Revert}" onClick="revertTLDValue();"/>
                            </div>
                            <div class="buttonMarginRight noPadright pull-left" >
                                <!-- <span class="ipmButton primary" data-dismiss="modal" >Agree and Proceed</span> 
                    <apex:commandLink value="{!$Label.Agree_and_Proceed}"  rendered="{!AND(isEditable,project.IPM_Phase__c!=null)}" styleClass="coreparameters custMarginbottom ipmButton primary"  oncomplete="hideTldWarningDialog();" >
                    </apex:commandLink> -->
                    <a class="coreparameters custMarginbottom ipmButton primary" onClick="hideTldWarningDialog()">{!$Label.Agree_and_Proceed}</a>
                        
                            </div>
                        </div>
                    </div>        
                </div>
            </div>
        </div>
    </div>
    
    <script src="{!URLFOR($Resource.IPM_Resource, 'js/jquery.js')}" type="text/javascript"></script>    
    <script src="{!URLFOR($Resource.IPM_Resource, 'js/bootstrap.min.js')}" type="text/javascript"></script>      
    <script src="{!URLFOR($Resource.IPM_Resource, 'js/jquery-ui.min.js')}" type="text/javascript"></script> 
    <script src="{!URLFOR($Resource.IPM_Resource, 'js/IPM_functions.js')}" type="text/javascript"></script>
    <script src="{!URLFOR($Resource.IPM_Resource, 'js/IPM_Limiter.js')}" type="text/javascript"></script>
    <apex:outputPanel id="editProjectAction">               
    <script>
        var IPMAppEP = { corePage:'{!URLFOR($Page.IPM_CoreParameters)}', projectId:'{!projectId}',proSelectlabel:'{!$Label.IPM_ProjectSetup_SELECT}' };
    jq(".info").tooltip({ position: { my: 'center top', at: 'center bottom+10' }});     
    var apexAccountList =[];                        
    <apex:repeat value="{!listofprojectname}" var="proList">                
        apexAccountList.push('{!proList.IPM_Project_Name__c}');                 
    </apex:repeat>      
    jq(".brandautocomplete").autocomplete({     
       source : apexAccountList,        
       select: function (event, ui) {       
           selectedObj = ui.item;       
       },                           
       minLength: 1         
    });
        function Closepopup() {
            if ({!saveSuccess } == true) {  window.top.location.href = IPMAppEP.corePage + '?id=' + IPMAppEP.projectId; }
        }; 
        jq('.gateKeepingModel input[type=radio]').each(function(e){ 
       jq(this).click(function()
          {
              var selectedGKModel =  jq(this).attr("value");      
              jq(".gateKModel").hide();
              jq('.gateKeepingModel').parents('.oprtnRadioContainer').children('.gateKModel').each(function(e)
              {
                  if(jq(this).attr('selectedValue') == selectedGKModel)
                  {
                      jq(this).show(); 
                  }
              });
          });  
    }); 
   
    jq('.gateKeepingModel input[type=radio]').each(function(){            
       var selectedGKModel = jq('.gateKeepingModel input[type=radio]:checked').attr("value");
       jq('.gateKeepingModel').parents('.oprtnRadioContainer').children('.gateKModel').each(function(e){
           if(jq(this).attr('selectedValue') == selectedGKModel){
               jq(this).show(); 
           }
       });
    });
   
    jq('.gcltquestions  input[type=radio]').each(function(e){ 
       jq(this).click(function()
          {
              var selectedSubProjectType =  jq(this).attr("value");        
              jq(".charterTipMsg").hide();
              jq('.gcltquestions').parents('.oprtnRadioContainer').children('.charterTipMsg').each(function(e){
                  if(jq(this).attr('selectedValue') == selectedSubProjectType){
                      jq(this).show(); 
                  }
              });
          });  
    }); 
   
    jq('.gcltquestions input[type=radio]').each(function(){            
       var selectedSubProjectType = jq('.gcltquestions input[type=radio]:checked').attr("value");
       jq('.gcltquestions').parents('.oprtnRadioContainer').children('.charterTipMsg').each(function(e){
           if(jq(this).attr('selectedValue') == selectedSubProjectType){
               jq(this).show(); 
           }
       });
    }); 
    function TLDDateCheck(){
        var newTLDValue = jq('.dateInputBox').val();
        if(newTLDValue != tldOrignalValue){
            jq('#tldWarningDialog').modal('show'); 
            return false;
        }
        return true;
    }
    function revertTLDValue(){
        jq('.dateInputBox').val(tldOrignalValue);
    }
    function hideTldWarningDialog(){
        jq('#tldWarningDialog').modal('hide'); 
    }
    const tldOrignalValue = jq('.dateInputBox').prop("defaultValue");   
    </script>
    </apex:outputPanel>
     <script src="{!URLFOR($Resource.IPM_Resource, 'js/IPM_EditProject.js')}" type="text/javascript"></script>
</apex:page>