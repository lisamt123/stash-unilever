<apex:page sidebar="false" controller="Oblix_Ctrl06SOWView_CC" docType="html-5.0">

  <apex:form id="jqueryId">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
    <script src="//cdn.datatables.net/1.10.0/js/jquery.dataTables.js"></script>
    <script type="text/javascript" src="{!URLFOR($Resource.Oblix_jquerydataTablescolumnFilter)}"></script>
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.0/css/jquery.dataTables.css" />
    
    <link rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.css" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css"/>
    <script src="{!URLFOR($Resource.Oblix_JQueryBlockUI)}" ></script>
    
    <script type="text/javascript" src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highstock/2.1.9/themes/sand-signika.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
    <script src="{!URLFOR($Resource.Oblix_SOWViewJS)}" ></script>
     <script>
  
        var redirectToAttachment = function (attachmentId){
            'use strict';
            window.open('/servlet/servlet.FileDownload?file=' + attachmentId);      
        }
        $(document).ready(function() {
                preparePH();
                $.unblockUI();
        });
    </script>
   
    <script type="text/javascript">
        var table = $('#example').DataTable();
        table.settings()[0] = { "aoColumnDefs": [{ "bSearchable": false, "aTargets": [ 0 ] }]};
   </script>  
    
    <script>
          $ = jQuery.noConflict(); 
           $(document).ready(function(){            
                    var table = $('#example').DataTable();
                    table.settings()[0] = {
                        "aoColumnDefs": [
                            { "bSearchable": false, "aTargets": [ 0 ] }
                        ]
                    };
                    $('#example tbody').on( 'click', 'tr', function () {
                    if ( $( this ).hasClass( "camp" ) ) { blockme();
                    $(this).toggleClass('selected');
                    $(this).addClass('bg_selected');
                    
                     var ids = $.map(table.rows('.selected').data(), function (item) {
                        return item[0];
                    });
                       //alert(ids);
                    ViewProject(ids);
                    }else {alert('This is a non campaign, pleas select a campaign');}
                } );
                
              });
     </script>
   
     <apex:actionFunction name="SaveAttachments" action="{!SaveAttachments}" rerender="accountTable, pageMessages">
         <apex:param value="{!allFileList}" assignTo="{!allFileList}" name="allFileList"/>
     </apex:actionFunction>
     <apex:actionFunction name="ViewProject" action="{!ViewProject}" rerender="accountTable, pageMessages">
         <apex:param value="{!selectedProjectId}" assignTo="{!selectedProjectId}" name="ids"/>
     </apex:actionFunction>
     <apex:actionFunction name="deleteSOW" action="{!DeleteAction}"/>
      <apex:actionFunction name="getCategoryBrandRec" action="{!getCategoryBrand}" rerender="sowNewId" oncomplete="unblockUI();">
          <apex:param value="{!selSow.OblixBrand__c}" name="brandId"/>
      </apex:actionFunction>
     

     <style>
           /**** Header and container CSS ****/
        
       <!-- center and header --> 
    .feedSearch{
        display: none !important;
    }
    
    .Oblix_table tr{
       cursor:pointer;
    }
      .cnter {
    text-align: center;
    }
    .cnter > div, .cnter > table /* insert any other block-level elements here */ {
        margin-left: auto;
        margin-right: auto;
    }
        .darkGreen{color: #44883E;}
        .mainGreen{color: #6BA539;}
        h2{ font-size: 120%;}
        h3{font-size: 12px;}

        .Oblix_Container{
            background-image : url("{!URLFOR($Resource.Oblix_assetUI,'bg_pattern_2.png')}");
            background-repeat: no-repeat;
            position:relative;
            top: -11px;
        }
        .Oblix_header_logo{
            position:relative;
            top:5px;
        }
        
        .Oblix_header_title{
            font-family: DIN, Arial;
            font-size: 30px;
            margin: 4px;           
            position: relative;
            top: 5px;   
            text-decoration:none;           
        }
           
        
       .Oblix_header_arrowTitle{
            font-family: DIN, Arial;
            font-size: 18px;
            margin: 4px;   
            padding-top: 24px;
            text-align: center;
            
            
        }
        .Oblix_header a{
            text-decoration:none;
            cursor:pointer; 
            color:white;            
        }
        .Oblix_header a:hover{
            text-decoration:none;
            cursor:pointer; 
            color:white;          
        }
        
        .Oblix_header_activeArrow{ 
            background-color: transparent;      
            background-image : url("{!URLFOR($Resource.Oblix_assetUI,'currentlevel_arrow_down.png')}");
            background-repeat: no-repeat;
             font-family: DIN, Arial;
            color:white;
            padding-left: 10px;
            width:160px;
            height: 90px;
            text-align: center;
            position: absolute;          
        }
       .Oblix_header_Arrow_none{ 
            background-color: transparent;      
            background: initial;
            background-repeat: no-repeat;
            font-family: DIN, Arial;
            color:white;
            padding-left: 10px;
            width:160px;
            height: 90px;
            text-align: center;
            position: absolute;
        }
       .Oblix_header_Arrow{ 
            background-color: transparent;      
            background-image : url("{!URLFOR($Resource.Oblix_assetUI,'currentlevel_arrow.png')}");
            background-repeat: no-repeat;
            font-family: DIN, Arial;
            color:white;
            padding-left: 10px;
            width:160px;
            height: 90px;
            text-align: center;
            position: absolute;
        }
        .Oblix_header_Arrow:active, .Oblix_header_Arrow:hover {
            background-color: transparent;
            background-image : url("{!URLFOR($Resource.Oblix_assetUI,'arrow_hover.png')}");
            background-repeat: no-repeat;

          }
        .Oblix_header_previousArrow{ 
            background-color: transparent;      
            background-image : url("{!URLFOR($Resource.Oblix_assetUI,'previouslevel_arrow.png')}");
            background-repeat: no-repeat;
            font-family: DIN, Arial;
            color:white;
            padding-left: 10px;
            width:160px;
            height: 90px;
            text-align: center;
            position: absolute;
       }
       .Oblix_header_previousArrow:active, .Oblix_header_previousArrow:hover {
            background-image : url("{!URLFOR($Resource.Oblix_assetUI,'arrow_hover.png')}");
            background-repeat: no-repeat;

          }
         .header_pos_1 {
            top: 2px;
            left:113px;
            }
        .header_pos_2 {
            top: 2px;
            left:270px;
            }
        .header_pos_3 {
            top: 2px;
            left:427px;
                       }
        .Oblix_header{
            background-image : url("{!URLFOR($Resource.Oblix_assetUI,'header_panel.png')}");
            background-size: 100% 100%;
            background-position: center bottom;
            background-repeat: no-repeat;
            height: 90px;
            position: relative;
            /* line-height: 65%; */
            width:95%;
            letter-spacing: 1px;
            margin-left: auto;
            margin-right: auto;         
        }
        .Oblix_header_desc{
            text-align:center;
            /* line-height: 140%; */
            position:relative;
            font-size: 10px;
            top:-10px;

        }
        .Oblix_header td{
             font-family: DIN, Arial;
        }

        /**** Content CSS ****/
               
        .Oblix_sowDetail{
             display: block;
            padding: 9.5px;
            margin: 0 58px 23px;
            line-height: 1.42857143;
            color: #333;
            word-break: normal;
            word-wrap: break-word;
            border: 2px solid;
            border-color: rgba(107,165,57,0.5);
            background-color: rgba(240,250,240,0.9);
            border-radius: 15px;
            font-family: DIN, Arial,'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif !important;
            font-size: 120%;
            }
        
        .bg_selected{
            background-color:#44883E !important;
        }
        table tr th h1{
            font-size: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        #tabs-centre h1{
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            background: transparent !important;
            padding-left: 26px;
            top: 22px;
            position: relative;
         }
         #tabs-centre{
            background: transparent !important;
         }
        .topAlign tr{
            vertical-align: top;
        }
        .Oblix_sowDashboard{
            height:300px;
        }
        .Oblix_tableDetails tr h1{
            font-size:16px;
        }
        .search_init{
            transition: all .2s linear;
            background: #fff;
            padding: 5px 9px;
            margin: 0;
            border-radius: 4px;
            width: 100%;
            font-size: 13px;
            height: 32px;
        }        
        .Oblix_mapApprovedment{
            width:85%;
        }
        .column1,.column2 {
            float: left;
        }
        .column3{
            width: 100%; 
            float: left;
        }   
        .column5{
            float: right;
        }
        .column4{
            float: left;
        }
        .column4 h1{
             font-size:17px;
        }
        .columnMiddle{vertical-align:middle}
        .Oblix_Dash{
                display:{!if(seriesProject == '' || seriesProject == '[]','none','block')};
               display: block;
                padding: 9.5px;
                margin: 0 58px 23px;
                font-size: 13px;
                line-height: 1.42857143;
                word-break: normal;
                word-wrap: break-word;
                background-color: #fff;
                border: 2px solid;
                border-color: rgba(107,165,57,0.5);
                border-radius: 15px;
        }
        .topAlign tr{
            vertical-align: top;
        }
         .Oblix_table{
            display: block;
            padding: 9.5px;
            margin: 0 58px 23px;
            font-size: 13px;
            line-height: 1.42857143;
            word-break: normal;
            word-wrap: break-word;
            background-color: #F5F5F5;
            border: 2px solid;
            border-color: rgba(107,165,57,0.5);
            border-radius: 15px;
        }
  
        /**** Button CSS ****/
        .btnDisabled {
          background-color: #6BA539;
            color: #fff;
            opacity: .5;

        }
        
     <!-- green buttons -->
      input.btn, .Oblix_large_btn, .Oblix_btn  {
            background: #6BA539;
            background-image: none;
            color: #fff;
            padding: 4px 10px 3px 10px  !important;
            height: 30px;

        }
        input.btn:active, input.btn:hover, button:hover, .Oblix_large_btn:hover, .Oblix_btn:hover {
             background: #44883E;
             color: #fff;
        }
        
         .disabled, input.btn:disabled, input.btn:disabled, button:disabled, .Oblix_large_btn:disabled, .Oblix_btn:disabled {
             background: #6BA539;
             opacity: 0.5;
             color: #fff;

        }

        
        .medGreenB{
             background-color: #6BA539;
             color: #fff;
        }
 
           .medGreenB:active, .medGreenB:hover{
             background-color: #00573F;
             color: #fff;
        }
        
         .GreenB{
             background-color: #44883E;
             color: #fff;
        }
 
           .GreenB:active, .GreenB:hover{
             background-color: #00573F;
             color: #fff;
        }
        
        .tintGreenB{
             background-color: #C2DBB6;
             color: #000;
        
        }
        
        .tintGreenB:active, .tintGreenB:hover{
             background-color: #00573F;
             color: #fff;
        }
         .Oblix_large_btn{
            border-style:none;
            width: 180px !important;
            height: 30px;
            background-position: 0 0;
            border : 1px solid rgb(158, 145, 145);
          }       
        .Oblix_large_btn:hover{
           border-style:none;
            border : 1px solid rgb(223, 213, 213);
            background-position: 0 0;
        }
        .Oblix_large_btn:active{
            border-style:none;
            border : 1px solid rgb(223, 213, 213);
            background-position: 0 0;
        }
         .Oblix_btn{
            border-style:none;
            width: 90px !important;
            height: 30px;
            background-position: 0 0;
            border : 1px solid rgb(158, 145, 145);
        }
        
        .Oblix_btn:hover{
            border-style:none;
            border : 1px solid rgb(223, 213, 213);
            background-position: 0 0;
        }
        .Oblix_btn:active{
            border-style:none;
            border : 1px solid rgb(223, 213, 213);
            background-position: 0 0;
        }
        .Oblix_notes{
            PADDING-right: 5px;
            max-height: 15em;
            overflow: auto;
        }
        .Oblix_attachment{
            width:85%;
        }
        .Oblix_filter_btn{
           color: #fff;
            border: 1px solid #b5b5b5 !important;
            display: inline-block;
            padding: 4px 12px !important;
            width:100px;
            margin-bottom: 0;
            font-weight: normal;
            line-height: 1.42857143;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            -ms-touch-action: manipulation;
            touch-action: manipulation;
            cursor: pointer;
            -webkit-user-select: none;
        }
       
        .Oblix_filter_btn:hover, .Oblix_filter_btn:active{
           background: #44883E !important;
           border: 1px solid #C2DBB6 !important;
       } 
       .Oblix_projects_btn{
            color: #333;
            background-color: #6BA539;
            border: 1px solid #b5b5b5 !important;
            display: inline-block;
            padding: 4px 12px !important;
            width:200px;
            margin-bottom: 0;
            font-weight: normal;
            line-height: 1.42857143;
            text-align: center;
            white-space: nowrap;
            vertical-align: middle;
            -ms-touch-action: manipulation;
            touch-action: manipulation;
            cursor: pointer;
            -webkit-user-select: none;
         }    
       /**** ui tooltip CSS ****/
       .ui-tooltip, .arrow:after {
        background: black;
        border: 2px solid white;
      }
      .ui-tooltip {
        padding: 10px;
        color: white;
        width:150px;
        border-radius: 2px;
        border-color:black;
        font-size:12px;
        box-shadow: 0 0 2px black;
        text-align:center;
      }
      .arrow {
        width: 70px;
        height: 16px;
        overflow: hidden;
        position: absolute;
        left: 50%;
        border-color:black;
        margin-left: -35px;
        bottom: -16px;
      }
      .arrow.top {
        top: -16px;
        bottom: auto;
      }
      .arrow.left {
        left: 20%;
      }
      .input_init{
            transition: all .2s linear;
            padding: 5px 9px;
            margin: 0;
            font-size: 13px;
        }
      .arrow:after {
        content: "";
        position: absolute;
        left: 20px;
        top: -20px;
        width: 25px;
        height: 25px;
        border-color:black;
        box-shadow: 6px 5px 9px -9px black;
        -webkit-transform: rotate(45deg);
        -ms-transform: rotate(45deg);
        transform: rotate(45deg);
      }
      .arrow.top:after {
        bottom: -20px;
        top: auto;
      }

    /* for 900px or less */
    @media screen and (max-width: 1200px) {
     
        .column1,.column2,.column3,.column4,.column5{
            width: 100%;
        }
    }
    /* Toggle Chart/Table CSS */
     .ui-widget-header {
        border: 0px;
        background: #E8E8E8;
    }
    
    .ui-widget-content {
        border: 0px;
    }
   
    .ui-tabs .ui-tabs-panel {
        display: block;
        border-width: 0;
        padding: 1em 1.4em;
        background: #E8E8E8;
        cursor: pointer;
    }
    .ui-tabs {
       padding:0em;
    } 
    .ui-tabs .ui-tabs-nav li {
        border-bottom-width: 1px;
    }  
   
      
    .textArea_init{
            transition: all .2s linear;
            background: #fff;
            padding: 5px 9px;
            margin: 0;
            width: 93%;
            min-height:80px;
            font-size: 13px;
            height: 32px;
        }
    #tabs-centre .ui-tabs-nav { 
        height: 2.35em; 
        text-align: center; 
    } 
    #tabs-centre .ui-tabs-nav li { 
        display: inline-block; 
        float: none; 
        top: 0px; 
        margin: 0em; 
        padding-bottom: 0px; 
    }
    #tabs-centre .ui-widget-header {
        background: whitesmoke!important;
    }
     #tabs-centre .ui-tabs-panel {    
        background: whitesmoke!important;
    }
    #tabs-centre .ui-corner-all, .ui-corner-top, .ui-corner-right, .ui-corner-tr,.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{
        border-top-left-radius :0 !important;
        border-top-right-radius :0 !important;
    }
    .Oblix_picklist{
        width: 137px;
        height: 23px;
    }
    h2{ font-size: 120%;}
    h3{font-size: 12px;}
    a.Oblix_btn:hover{
        text-decoration: none;
    }
    a.Oblix_btn{
        text-decoration: none;
        background: #6BA539 none repeat scroll 0% 0%;
        color: #FFF;
        padding: 4px 10px 3px !important;
        height: 30px;
        font-weight: bold;
        font-size: 0.9em;
        border-radius: 3px;
        border-width: 1px;
        border-style: solid;
        border-color: #B5B5B5 #B5B5B5 #7F7F7F;
        -moz-border-top-colors: none;

        -moz-border-bottom-colors: none;
        -moz-border-left-colors: none;
        border-image: none;
        margin: 1px;
        display:block;
        width: 68px !important;
        height: 20px;
        text-align: center;
        float: right;
    }
    .SOWName{
        cursor:pointer;
    }  
    .required{
        cursor: auto;
        border-width: 2px;
        border-style: solid;
        border-top-color: rgb(153, 153, 153);
        border-right-color: rgb(153, 153, 153);
        border-bottom-color: rgb(153, 153, 153);
        border-left-color: red !important;
    } 
    a{
        border:none !important;
    } 
    </style>
  
     </apex:form>
     
          <apex:form id="att">
         <div id="xdialogAddAtt" title="{!$Label.Oblix_lbl_UIUX_New_Attachment}" style=" display:none; width:100%; position: absolute; z-index: 100000; left:40%; right:30%; top: 30%; ">   
          <div style="background: #fff; width: 400px; height: 100px; border: 2px solid rgba(107,165,57,0.5); border-radius: 15px;  padding-left: 30px;">
          <table width="90%" height="90%">
            <tr>
                
               
                <td><br/><h3 class="darkGreen">{!$Label.Oblix_lbl_UIUX_Choose_Attachment}</h3><br/></td>
            </tr>
            <tr>    
                <td>
                 <apex:inputFile value="{!attachment.body}" filename="{!attachment.name}" id="file"  styleclass="v3"/> 
                </td>
                <td>
                 <apex:commandButton action="{!uploadeAttachment}" value="{!$Label.Oblix_lbl_UIUX_Save}" immediate="true" />
                </td>
                <td>
               
                <!--   <input type="submit" value="Cancel" onclick="closeAtt();"/>  -->
                     <apex:commandButton action="{!cancel}"  value="{!$Label.Oblix_lbl_UIUX_Cancel}" onclick="closeAtt();return false"/>
                </td>
           </tr>
         </table></div>
           
   </div>
   
   </apex:form>
   
    <div class="Oblix_Container">
    <!-- Popup attachment -->
    <div id="PopupAddAttachmnt" title="{!$Label.Oblix_lbl_UIUX_Choose_Countries}" style="display:none">  
    <apex:form > 
      <apex:pageMessages id="MSG"/>
           <apex:outputLabel value="{!$Label.Oblix_lbl_UIUX_How_Many_Files}"/>
            <apex:actionFunction name="ChangeCount" action="{!ChangeCount}"/> 
            <apex:selectList onchange="ChangeCount() ;" multiselect="false" size="1" value="{!FileCount}">
                <apex:selectOption itemLabel="--None--" itemValue=""/>
                <apex:selectOptions value="{!filesCountList}"/>
            </apex:selectList>
            <apex:repeat value="{!allFileList}" var="AFL">
                <apex:inputfile value="{!AFL.body}" filename="{!AFL.Name}" />
            </apex:repeat>
       </apex:form>     
   </div>
   <apex:form >
   <apex:actionFunction name="removeAttachmentsBack" action="{!init}" reRender="sowDetailId"/>
   <div id="dialog" title="{!$Label.Oblix_lbl_UIUX_Attachment_List}" style="display:none">   
      <apex:pageBlock >
       <apex:pageBlockTable value="{!lstAttachements}" var="attach">
           <apex:column headerValue="{!$Label.Oblix_lbl_UIUX_Name}">
               <apex:outputText value="{!attach.Id}">{!attach.Name}</apex:outputText>
           </apex:column>
            <apex:column headerValue="{!$Label.Oblix_lbl_UIUX_Parent_Name}">
                 <apex:outputField value="{!attach.Parent.Name}"/>
           </apex:column>
           <apex:column headerValue="Created By">
                 <apex:outputField value="{!attach.CreatedBy.Name}"/>
           </apex:column>
           <apex:column headerValue="Created Date">
                 <apex:outputField value="{!attach.CreatedDate}"/>
           </apex:column>
           <apex:column headerValue="View">
                <apex:commandButton value="View" onclick="redirectToAttachment('{!attach.Id}')"/>     
           </apex:column>
           <apex:column headerValue="To Delete">
                <input type="checkbox" data-attachment-id="{!attach.Id}" />
           </apex:column>
       </apex:pageBlockTable>
       <br/>
       <apex:commandButton value="Delete" onclick="removeAttachments(); return false;"/>
     </apex:pageBlock>
   </div>
   </apex:form>
   <!-- end Popup attachment -->
    <div class="cnter">
     
  <div class="Oblix_header">
  <!-- 3 levels Oblix_header_activeArrow=inactive level user is on,  Oblix_header_Arrow=first button from the left, Oblix_header_previousArrow=second button-->
       <div style="postion: relative; top:-200px; background: transparent;width: 95%;margin-left: auto;margin-right: auto;">
         <table width="95%" height="100%">
            <tr>
                <td width="50px" class="Oblix_header_logo">
                <apex:image value="{!$Resource.Oblix_Unilever_logo}" width="60px" height="60px" />
                </td>
                <td class="Oblix_header_Arrow header_pos_1">
                <a href="/apex/Oblix_VF05_SOWDetailsV"> <div class="Oblix_header_title">{!$Label.Oblix_lbl_UIUX_SWOP}</div></a><br/>
                <span class="Oblix_header_desc">{!$Label.Oblix_lbl_UIUX_Scope_of_Work}<br/>
                {!$Label.Oblix_lbl_UIUX_Online_Planner}</span>
                </td>
                <td>
                <div class="Oblix_header_activeArrow header_pos_2">
                <div class="Oblix_header_arrowTitle">
                    <apex:outputPanel rendered="{!sowId == null}" > {!$Label.Oblix_lbl_UIUX_Create_SOW} <br/></apex:outputPanel>
                    <apex:outputPanel rendered="{!sowId != null}" > {!$Label.Oblix_lbl_UIUX_View_SOW}<br/></apex:outputPanel>
                </div>
                </div>
                
                <div class="Oblix_header_Arrow_none header_pos_3">
                <div class="Oblix_header_arrowTitle"></div>
                </div>
                </td>
                <td>
                <div style="float:right;"><p>{!$Label.Oblix_lbl_UIUX_Hi} {!userConnected.Name} !</p></div>
                </td>
            </tr>
        </table></div>
    </div>
    
    </div>
    <br/>
    
    <div class="Oblix_sowDetail">
    <apex:form styleclass="showForm" id="showForm">
       <apex:pageMessages id="MSG"/> 
       <apex:outputPanel rendered="{!sowId != null && isEdit == false}" Id="sowDetailId">
            <table width="100%" class="topAlign">
             <tr>
                      <td colspan="6" style="border-bottom: 1px solid #6BA539; text-align:top; padding-bottom:20px;">
                      <h2 class="darkGreen SOWName">{!selSow.Name}</h2>
                    </td>
                 </tr>
            <tr class="SOWDetail">
            <td width="25%">
            <section class="column1">
               <table width="100%" class="Oblix_tableDetails topAlign">
                   
                 <tr>
                     <td width="50%" align="left"><strong>{!$ObjectType.Marketing_SOW__c.fields.BB_or_BD__c.label} </strong></td>
                     <td width="50%" align="left">{!selSow.BB_or_BD__c}</td>
                 </tr>   
                 <tr><td colspan="2">&nbsp;</td></tr>
                 <tr>
                     <td><strong>{!$ObjectType.Marketing_SOW__c.fields.Oblix_AgencyEstimate__c.label}</strong></td>
                     <td>{!selSow.Oblix_AgencyEstimate__r.name}</td>
                 </tr>
                 <tr><td colspan="2">&nbsp;</td></tr>   
                 <tr>
                     <td><strong>{!$ObjectType.Marketing_SOW__c.fields.OblixBrand__c.label} </strong></td>
                     <td>{!selSow.OblixBrand__r.Name}</td>
                 </tr>
                 <tr><td colspan="2">&nbsp;</td></tr>   
                 <tr>
                     <td><strong>{!$ObjectType.Marketing_SOW__c.fields.SmallProductCategory__c.label} </strong></td>
                     <td>{!selSow.SmallProductCategory__r.name}</td>
                 </tr>
                 <tr><td colspan="2">&nbsp;</td></tr>   
                 <tr>
                     <td><strong>{!$ObjectType.Marketing_SOW__c.fields.BigOblixProductCategory__c.label} </strong></td>
                     <td>{!selSow.BigOblixProductCategory__r.name}</td>
                 </tr>
               </table>
           </section>
           </td>
           <td width="25%">
           <section class="column2">
               <table width="100%" class="Oblix_tableDetails topAlign"> 
                   <tr>    
                      <td width="50%"><strong>{!$ObjectType.Marketing_SOW__c.fields.Agency_Contact__c.label} </strong></td>
                      <td>{!selSow.Agency_Contact__r.name}</td>
                   </tr>
                   <tr><td colspan="2">&nbsp;</td></tr>   
                   <tr>
                      <td><strong>{!$ObjectType.Marketing_SOW__c.fields.Unilever_Lead__c.label}</strong></td>
                      <td>{!selSow.Unilever_Lead__r.name}</td>
                   </tr>
                   <tr><td colspan="2">&nbsp;</td></tr>   
                   <tr>
                     <td><strong>{!$ObjectType.Marketing_SOW__c.fields.Financial_Year__c.label}</strong></td>
                     <td>{!selSow.Financial_Year__c}</td>
                   </tr> 
                    <tr><td colspan="2">&nbsp;</td></tr>                      
                    <tr>
                     <td colspan="2"><h2 class="darkGreen">{!$Label.Oblix_lbl_UIUX_Approved} &nbsp;</h2> <strong>
                     €&nbsp; 
                      <apex:outputText id="mapApprovedId" value="{0, number,###,###,##0}">
                         <apex:param value="{!ROUND(mapApproved[selSow.id], 0)}"/>
                     </apex:outputText>
                     <!--<apex:outputLabel id="mapApprovedId" value="{!ROUND(mapApproved[selSow.id], 0)}"/>-->
                     </strong></td>
                   </tr>
                   <tr>
                     <td colspan="2"><h2 class="mainGreen">{!$Label.Oblix_lbl_UIUX_Current} &nbsp; &nbsp; &nbsp; </h2><strong>
                      €&nbsp;
                      <apex:outputText value="{0, number,###,###,##0}">
                         <apex:param value="{!ROUND(selSow.Oblix_Current_FY_Total__c, 0)}"/>
                     </apex:outputText>
                      </strong></td>
                   </tr>
               </table>
           </section> 
           </td>
           <td width="20%">
           <section class="column3">   
              <strong>Notes</strong><br/>
              <p class="Oblix_notes">
                  {!noteAsset.body}
                  <!--<apex:repeat value="{!notes}" var="note"> 
                      {!note.body}<br/>
                  </apex:repeat>-->
              </p> 
              <br/>          
           
                 <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Add_Attachments}" title="Add New Attachment "  onclick="openAtt();return false" styleClass="Oblix_large_btn Oblix_attachment" />
                            
               <br/>
                <apex:commandButton value="View {!lstAttachements.size} Attachments" title="View list of Attachment " onclick="Popup();return false" styleClass="Oblix_large_btn Oblix_attachment" rendered="{!lstAttachements.size<>0}"/> 
                
           </section>
           </td>
           <td width="10%">
           <section class="column4">
               <table width="100%" class="topAlign">  
                   <tr> 
                      <td width="50%" colspan="2"><span style="text-decoration: underline;">{!$Label.Oblix_Lbl_UIUX_Updated}</span> &nbsp;<apex:outputText value="{0,date,MM'/'dd'/'yyyy}"><apex:param value="{!selSow.LastModifiedDate}" /></apex:outputText><br/> by {!selSow.LastModifiedBy.Name}</td>
                   </tr>
                   <tr><td colspan="2">&nbsp;</td></tr>    
                   <tr><td colspan="2">&nbsp;</td></tr>    

                   <tr>
                       <td colspan = "2" style="position: relative; top:-10px;"><h3><div class="cnter"><br/>{!selSow.SOW_Status__c}</div></h3></td>
                   </tr>
              </table>
          </section>
         </td>
         <td class="columnMiddle cnter">
          <section class="column5">
             <div class="cnter">
                     <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Back_To_Dashboard}"  title="{!$Label.Oblix_lbl_UIUX_Back_To_Dashboard}"  action="{!backAction}" styleClass="Oblix_large_btn Oblix_view_btn"/><br/>
                     <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Edit}"  title="{!$Label.Oblix_lbl_UIUX_Go_back_to_the_edit_mode}"  action="{!EditAction}" onclick="blockme()" oncomplete="$('[id$=mlktp]').hide();$.unblockUI(); turnOnValidation(true)" styleClass="Oblix_large_btn" reRender="showForm"/><br/>
                     <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Clone}"  title="{!$Label.Oblix_lbl_UIUX_Clone_SOW_Title}"  action="{!CloneAction}" onclick="blockme()" oncomplete="$('[id$=mlktp]').hide();$.unblockUI()" styleClass="Oblix_large_btn" reRender="showForm,projectForm"/><br/>
                     <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Delete}"  title="{!$Label.Oblix_lbl_UIUX_Delete_SOW_Title}"  onclick="confirmDelete(); return false" styleClass="Oblix_large_btn"/><br/>
                     <apex:commandButton value="{!$Label.Oblix_Lbl_UIUX_Export}" onclick="" title="{!$Label.Oblix_lbl_UIUX_View_PDF_format}"  styleClass="Oblix_btn" disabled="true"/>
                     <apex:outputLink value="{!reportFolderURL}" title="Reporting" styleClass="Oblix_btn" target="_blank" disabled="{!reportFolderURL == ''}">Reporting</apex:outputLink><br/>
                     <!--<apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Reporting}" onclick="" disabled="true" title="{!$Label.Oblix_lbl_UIUX_View_PDF_format}"  styleClass="Oblix_btn"/>-->
                     <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Approval}" title="{!$Label.Oblix_lbl_UIUX_Approval}"  onclick="" styleClass="Oblix_large_btn" disabled="true"/>
             </div>  
          </section>   
          </td>
          </tr>
          </table>
       </apex:outputPanel>
       <apex:outputPanel id="sowNewIdWrapper">
       <apex:outputPanel rendered="{!sowId == null || isEdit == true}" id="sowNewId">
       
            <table cellspacing="10px" width="95%;margin-left:2%">
            <tr>
            <td width="25%">
            <section class="column1">
              
               <table width="100%" class="Oblix_tableDetails">
                 <tr>
                  <!--    <td width="40%"><strong>{!$ObjectType.Marketing_SOW__c.fields.Name.label}  * </strong></td>  -->
                      <td><apex:inputField value="{!selSow.Name}" html-placeholder="{!$ObjectType.Marketing_SOW__c.fields.Name.label}" styleClass="required input_init "/></td>
                 </tr>
                 <tr>
                 <!--    <td><strong>{!$ObjectType.Marketing_SOW__c.fields.BB_or_BD__c.label}  * </strong></td> -->
                     <td><apex:inputField value="{!selSow.BB_or_BD__c}"  styleClass="Oblix_picklist"   html-placeholder="{!$ObjectType.Marketing_SOW__c.fields.BB_or_BD__c.label} "  /></td>
                 </tr>
                 <tr>
                    <!-- <td><strong>{!$ObjectType.Marketing_SOW__c.fields.Oblix_AgencyEstimate__c.label} *</strong></td>  -->
                     <td><apex:inputField value="{!selSow.Oblix_AgencyEstimate__c}"  required="true" html-placeholder="{!$ObjectType.Marketing_SOW__c.fields.Oblix_AgencyEstimate__c.label} " styleClass="required input_init " /></td>
                 </tr>   
                 <tr>
                  <!--   <td><strong>{!$ObjectType.Marketing_SOW__c.fields.OblixBrand__c.label}  *</strong></td>  -->
                     <td><apex:inputField value="{!selSow.OblixBrand__c}"  required="true" html-placeholder="{!$ObjectType.Marketing_SOW__c.fields.OblixBrand__c.label} " styleClass="required input_init ">
                            <apex:actionSupport event="onchange" action="{!getCategoryBrand}" rerender="sowNewIdWrapper"/>
                         </apex:inputField>
                     </td>
                 </tr>
                 <tr>
                  <!--   <td><strong>{!$ObjectType.Marketing_SOW__c.fields.BigOblixProductCategory__c.label}</strong></td>  -->
                     <td><apex:inputField value="{!selSow.SmallProductCategory__c}"  html-placeholder="{!$ObjectType.Marketing_SOW__c.fields.SmallProductCategory__c.label} " styleClass="input_init " /></td>
                 </tr>
                 <tr>
                   <!--  <td><strong>{!$ObjectType.Marketing_SOW__c.fields.SmallProductCategory__c.label}</strong></td> -->
                     <td><apex:inputField value="{!selSow.BigOblixProductCategory__c}"  html-placeholder="{!$ObjectType.Marketing_SOW__c.fields.BigOblixProductCategory__c.label}"  styleClass="input_init " /></td>
                 </tr>
               </table>
             
            </section>
        </td>
        <td width="25%">
            <section class="column2">
               <table width="100%"> 
                   <tr>    
                      <td width="40%" colspan="2">
                         <!--  <strong>{!$ObjectType.Marketing_SOW__c.fields.Agency_Contact__c.label}</strong>    -->
                          <apex:inputField value="{!selSow.Agency_Contact__c}" styleClass="cmplex"  />
                      </td>
                   </tr>
                   <tr>
                      <td colspan="2">
                     <!-- <strong>{!$ObjectType.Marketing_SOW__c.fields.Unilever_Lead__c.label}</strong> -->
                      <apex:inputField value="{!selSow.Unilever_Lead__c}"  styleClass="complex "  />
                      </td>
                   </tr>
                   <tr>
                  <!--   <td><strong>{!$ObjectType.Marketing_SOW__c.fields.Financial_Year__c.label} * </strong></td>  -->
                     <td><apex:selectList size="1" value="{!selSow.Financial_Year__c}" html-placeholder="{!$ObjectType.Marketing_SOW__c.fields.Financial_Year__c.label}"   styleClass="Oblix_picklist required">
                            <apex:selectOptions value="{!FYSelectOptions}"></apex:selectOptions>
                         </apex:selectList></td>
                   </tr>                 
                   <tr>
                     <td colspan="2"><strong class="darkGreen">{!$Label.Oblix_lbl_UIUX_Approved} &nbsp;</strong> <strong>
                     €&nbsp;
                      <apex:outputPanel rendered="{!selSow.id != null}"> 
                         <apex:outputText value="{0, number,###,###,##0}">
                                             <apex:param value="{!ROUND(mapApproved[selSow.id], 0)}"/>
                         </apex:outputText>
                     </apex:outputPanel>  
                      </strong></td>
                   </tr>
                    <tr>
                     <td colspan="2"><strong class="mainGreen">{!$Label.Oblix_lbl_UIUX_Current} &nbsp; &nbsp; &nbsp; </strong><strong>
                      €&nbsp; 
                       <apex:outputText value="{0, number,###,###,##0}">
                                 <apex:param value="{!ROUND(selSow.Oblix_Current_FY_Total__c, 0)}"/>
                         </apex:outputText>
                        </strong></td>
                   </tr>
                   <tr>
                   </tr>
               </table>
               <script> 
               preparePH();
               </script>
           </section> 
           </td>
           <td>
           <section class="column3" style="position:relative; left: 4%;">   
              <strong>Notes</strong><br/>
              <div class='warning'></div>
              <p class="Oblix_notes">
                 <apex:inputField value="{!noteAsset.body}" styleclass="textArea_init"/>
              </p>               
            <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Add_Attachments}" title="{!$Label.Oblix_lbl_UIUX_Add_New_Attachment}"  onclick="openAtt();return false" styleClass="Oblix_large_btn Oblix_attachment" rendered="{!selSow.Id <> null}"/>
           </section>
           </td>
           <td width="20%">
           <section class="column4">
               <table width="100%" >  
                   <tr> 
                      <td></td>
                   </tr>                  
                   <tr>
                     <td><br/></td>
                   </tr>
                   <tr>
                     <td><br/></td>
                   </tr>
                   <tr>
                       <td><h1 style="position:relative; top:-10px;"><div class="cnter"><br/></div></h1></td>
                   </tr>
              </table>
          </section>
         
          <section class="column5" style="position:relative; left: -10%;">
             <div class="cnter">
                 <apex:actionRegion >
                     <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Back}" immediate="true" action="{!backAction}"  title="{!$Label.Oblix_lbl_UIUX_Back_to_SOW}" styleClass="Oblix_large_btn" onclick="turnOnValidation()"/><br/><br/>
                 </apex:actionRegion>
                     <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Approval}" onclick="" disabled="true" title="{!$Label.Oblix_lbl_UIUX_Comming_Soon}"  styleClass="Oblix_large_btn"/><br/><br/>
                     <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Save}"   action="{!SaveSOW}" title="{!$Label.Oblix_lbl_UIUX_Save_Sow}"  reRender="showForm,projectButtonId,mapApprovedId" styleClass="Oblix_large_btn" onclick="turnOnValidation()"/><br/><br/>
                 
             </div>  
          </section>   
          </td>
          </tr>
          </table>
          
       </apex:outputPanel>
     </apex:outputPanel>
     </apex:form>
     <script>
    // notes
     </script>
     <style type="text/css">
     .warning {
        color: red;
        display: none;
     }
     .warning.show {
        display: block;
     }
     </style>
     </div><!-- SowDetail -->
     <!-- Chatter Feed -->
     <apex:form styleClass="projectForm" id="projectForm">
         <apex:outputPanel rendered="{!IF(sowId == null, false, true)}" id="sowFeed">
          <div class="Oblix_table padding_remove">
             <div class="Oblix_projects_container">  
                <table width="100%">
                <tbody>   
                 <tr class="Oblix_projects_header">
                    <th>
                        <table width="100%">
                            <tr>
                                <td width="20%" class="Oblix_title_H1">
                                    {!$Label.Oblix_lbl_UIUX_Chatter_Feed_for} {!selSow.Name} 
                                </td>
                                <td>
                                </td>
                                <td width="10%">
                                   
                                </td>
                                <td width="6%" class="Oblix_icon">
                                    {!countOfUpdatesFeed} {!$Label.Oblix_lbl_UIUX_Updates} &nbsp;
                                    <i class="fa fa-2x fa-sort-desc"></i>
                                </td>
                            </tr>
                        </table>
                    </th>   
                </tr>
                <tr>
                       <td width="100%">
                           <chatter:feedWithFollowers entityId="{!sowID}"/>
                       </td>
                       
                </tr>
                </tbody>
                </table>
            </div>
         </div>
     </apex:outputPanel>
 
    <div class="Oblix_table" id="Oblix_DashId">
          
         <apex:outputPanel id="projectButtonId">
                <table width="100%" class="Oblix_TableTitle">
                    <tr>
                        <td width="50%">
                            <table style="margin-left:20px;display:{!IF(sowId == null, 'none', 'block')}">
                                <tr><td><strong>Campaign Total : </strong></td>
                                
                                <td> <strong>€ </strong>
                                    <apex:outputText value="{0, number,###,###,##0}">
                                         <apex:param value="{!ROUND(selSow.Total_Campaigns_This_FY__c, 0)}"/>
                                     </apex:outputText>
                                </td>
                                
                                </tr>
                                <tr><td><strong>Non Campaign Total :</strong></td><td><strong> € </strong>
                                     <apex:outputText value="{0, number,###,###,##0}">
                                         <apex:param value="{!ROUND(selSow.OblixTotalOtherItemsFees__c, 0)}"/>
                                     </apex:outputText>
                                </td>
                                </tr>
                            </table>
                            
                        </td>
                        <td  width="15%">
                            
                                <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Non_Campaign_items}" title="new btn"  action="{!msDetail}" styleClass="Oblix_projects_btn" disabled="{!IF(sowId == null, true, false)}"/><br/>
                           
                        </td>
                        
                        <td  width="15%">
                            
                                <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Add_Campaign}" title="{!$Label.Oblix_lbl_UIUX_Add_Campaign}"  action="{!AddProject}" styleClass="Oblix_projects_btn" disabled="{!IF(sowId == null, true, false)}"/><br/>
                           
                        </td>
                        <td  width="15%">
                           
                                <apex:commandButton value="{!$Label.Oblix_lbl_UIUX_Add_Non_Campaign}" title="{!$Label.Oblix_lbl_UIUX_Add_Non_Campaign}" styleClass="Oblix_projects_btn" action="{!createNonCamp}" disabled="{!IF(sowId == null, true, false)}"/><br/>
                            
                        </td>
                    </tr>
                </table>
         </apex:outputPanel>
         
        <apex:outputPanel rendered="{!thousandBlocks.size<>0}" id="lstProj">
            <div id="tabs-centre">
                   <h1>{!$Label.Oblix_lbl_UIUX_All_SOW_Items}</h1>
               <ul>

                <li><a href="#tabs-centre-1">{!$Label.Oblix_lbl_UIUX_View_as_list}</a></li>
                <li><a href="#tabs-centre-2">{!$Label.Oblix_lbl_UIUX_View_Campaign_TimeLine}</a></li>
              </ul>
              <div id="tabs-centre-1">
                <table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
                 <thead>
                  <tr>
                    <th style="display:none;width:0px !important">{!$Label.Oblix_lbl_UIUX_Project_Id}</th>
                    <th>{!$ObjectType.Oblix_SOW_Projects__c.fields.Name.label} </th>
                    <th>Type</th>
                    <th>{!$ObjectType.Oblix_SOW_Projects__c.fields.OblixRegion__c.label}</th>
                    <th>{!$ObjectType.Oblix_SOW_Projects__c.fields.Platform__c.label}</th>
                    <th>Status</th>
                    <th>Completed Stage</th>
                    <th>Current</th>                   
                  </tr>
                </thead>
                <tbody>
                   <apex:repeat value="{!thousandBlocks}" var="block">
                    <apex:repeat value="{!block.lstProjects}" var="projOtherItem">
                        <apex:outputPanel rendered="{!projOtherItem.objName == 'Campaign'}">
                             <tr class="odd gradeX Oblix_view_btn camp" >
                                <td style="display:none;width:0px !important">{!projOtherItem.objectDyn['Id']}</td>
                                <td>{!projOtherItem.objectDyn['Name']}</td>
                                <td>{!projOtherItem.objName}</td>
                                <td>{!projOtherItem.objectDyn['OblixRegion__c']}</td>
                                <td>{!projOtherItem.objectDyn['Platform__c']}</td>
                                <td>{!projOtherItem.objectDyn['Campaign_Status__c']}</td>
                                <td>{!projOtherItem.objectDyn['Project_Stage__c']}</td>
                                <td>€&nbsp;
                                <apex:outputText value="{0, number,###,###,##0}">
                                     <apex:param value="{!projOtherItem.objectDyn['Value_to_be_paid_in_Current_FY__c']}"/>
                                </apex:outputText>
                                </td>
                            </tr>
                        </apex:outputPanel>
                        <apex:outputPanel rendered="{!projOtherItem.objName == 'Non Campaign'}">
                             <tr class="odd gradeX Oblix_view_btn">
                                <td style="display:none;width:0px !important">{!projOtherItem.objectDyn['Id']}</td>
                                <td>{!projOtherItem.objectDyn['Name']}</td>
                                <td>{!projOtherItem.objName}</td>
                               <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>€&nbsp;
                                  <apex:outputText value="{0, number,###,###,##0}">
                                     <apex:param value="{!projOtherItem.objectDyn['OblixOtherItemFee__c']}"/>
                                </apex:outputText>
                                </td>                              
                            </tr>
                        </apex:outputPanel>
                    </apex:repeat>
                  </apex:repeat>  
                </tbody>                
              </table>  
              </div>
              <div id="tabs-centre-2" >
                    <div id="lease-gantt-chart" style="margin: 0 58px 23px; width:90%"></div>
              </div>            
            </div>          
     </apex:outputPanel>
     </div> 
</apex:form>
</div><!--  End Container 
</apex:form>-->

    <div id="dialog-confirm" title="Confirm Delete" style="display:none;">
      <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>This SOW will be deleted, together with its campaign and other related items. Are you sure?</p>
    </div>

 <script>   
    
  
      $('.SOWName').click(function(){
            $('.SOWDetail').slideToggle("slow");
     });  
     var leaseData = {!seriesProject};
 </script>  
<script src="{!URLFOR($Resource.Oblix_HightChartJS)}" ></script>
</apex:page>