<apex:page controller="isll_BrainResultsController" sidebar="false" docType="html-5.0" standardStylesheets="false">
    <!--
      jQuery library
    -->
    <apex:includeScript value="{!URLFOR($Resource.isll_VidComp, 'lib/jquery-1.9.1.min.js')}" />
 <apex:includeScript value="{!URLFOR($Resource.bootstrap, 'bootstrap.min.js')}" />
 
 
  <apex:includeScript value="{!URLFOR($Resource.ISLL_Sustainable_Living_Lab, 'Java Script(ISLL)/isll_BrainResults_Page.js')}" />
  
  
  
 <apex:stylesheet value="{!URLFOR($Resource.bootstrap, 'modal.css')}"/>
    <style type="text/css">
        html, body
        {
            padding: 0;
            margin: 0;
        }
        
        #library, #people, #chatterResults
        {
            display: block;
        /*    background-color: #999;*/
            font-size: 18px;
            font-weight: bold;
            padding: 10px;
            padding-left: 20px;
            width: 90px;
        }
        
        #library:hover, #people:hover, #chatterResults:hover
        {
         /*   background-color: lightgrey;*/
            cursor: pointer;
        }
        
        .DetailContent
        {
            padding-top: 20px;
            padding-left: 20px;
            min-width: 895px;
            background-color: #e1e1e1 !important;
            float:left;
            margin-bottom:30px;
        }
        
        .DetailContent.chatter {        
            background-color: #fff !important;
        }
        
        #firstColumn
        {
            width: 900px !important;
        }
        
        .entry
        {
            clear: both;
            
            /*background-color: #666;*/
            
            padding: 0;
            margin: 0;
            text-align: center;
        }
        
        .entry > a > img
        {
            height: 80px;
            width: 80px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        .entryInfo
        {
            display: block;
            
            float:left;
            margin-left: 20px;
            
            width: 80px;
            height: 150px;
            
            text-align: center;
            font-weight: bold;
            /*text-transform: uppercase;*/
            font-size: 11px;
            color: #343434;
            
            word-wrap: break-word !important;
        }
        
        .entryInfo:hover
        {
         /*   background-color: #BBB;*/
            cursor: pointer;
        }
        
        .active
        {
        /*    background-color: lightgrey !important;*/
            color: #dc6b2e;
        }
        
        .brainresult
        {
            width:375px !important;
            margin-bottom:20px !important;
        }
        
        .shareBox
        {
            padding: 6px 15px 6px 5px;
            margin: 3px;
            margin-bottom: 5px;
            margin-left: 0;
            height: 12px;
        }
        
        .shareBox texarea
        {
            border:1px solid #2a2e31;
            background-color:#2d3035;
            color:#505358;
        }
        
        .shareButton
        {
            -moz-box-shadow:inset 0px 1px 0px 0px #a4e271;
            -webkit-box-shadow:inset 0px 1px 0px 0px #a4e271;
            box-shadow:inset 0px 1px 0px 0px #a4e271;
            background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #89c403), color-stop(1, #77a809) );
            background:-moz-linear-gradient( center top, #89c403 5%, #77a809 100% );
            filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#89c403', endColorstr='#77a809');
            background-color:#89c403;
            -moz-border-radius:6px;
            -webkit-border-radius:6px;
            border-radius:6px;
            border:1px solid #74b807;
            display:inline-block;
            color:#ffffff;
            /*font-family:arial;*/
            font-size:15px;
            font-weight:bold;
            padding:5px 16px;
            text-decoration:none;
            text-shadow:1px 1px 0px #528009;
            position: relative;
            top:-9px;
        }
        
        .shareButton:hover
        {
            background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #77a809), color-stop(1, #89c403) );
            background:-moz-linear-gradient( center top, #77a809 5%, #89c403 100% );
            filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#77a809', endColorstr='#89c403');
            background-color:#77a809;
            cursor: pointer;
        }
        
        .shareButton:active
        {
            position:relative;
            top:-8px;
        }
        
        .even
        {
            background-color:#d2d2d2;
        }
        
        .libraryTable
        {
            width: 99%;
        }
        
        .libraryTable th
        {
            font-size: 14px;
        }
        
        .libraryTable td,th
        {
            font-weight: bold;
            padding: 0 7px;
        }
  
        .newFile
        {
            color: #00B388;
            font-weight: bold;
            font-size:14px;
        }
        
        .askLink
        {
            font-weight: bold;
            font-size: 15px;
            position: relative;
            bottom: 14px;
            text-decoration: none;
        }
        
        .chatterInput
        {
            border-radius: 7px;
            background-color: lightgrey;
            border: none;
            outline: none;
            margin-top: 3px;
            width: 390px;
            margin-right: 10px;
            height: 19px;
            font-size: 12px;
            resize: vertical;
            position: relative;
            bottom: 4px;
            padding-top: 8px;
            padding-left: 23px;
        }
        
       .styled-select select {
            color: #333435;
           background: transparent;
           width: 150px;
           padding: 0px 0px 0px 5px;
           line-height: 1;
           border: 0;
           border-radius: 0;
           height: 20px;
           -webkit-appearance: none;
       }
       
       .styled-select {
           width: 120px;
           height: 23px;
           overflow: hidden;
           background: url(/img/arrowDown.gif) no-repeat right #eee;
         /*  border: 1px solid #ccc;*/
       }
        
    </style>
    

    

     <apex:form >
         <apex:actionFunction name="shareFile" action="{!Share}" rerender="theTable">
            <apex:param name="firstParam" assignTo="{!a_contentVersionId}" value=""/>
        </apex:actionFunction>
    
  <!-- Modal -->
  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true" onclick = "closeModal();">&times;</button>
          <h4 class="modal-title">Share a File</h4>
        </div>
        <div class="modal-body">
                <br/>
                <div>
                    This file will be posted to the ISLL chatter group
                     <apex:inputTextArea value="{!a_chatterController.postText}" style="margin-top:3px; width:100%; height:78px; font-size:12px; resize:vertical;" />
                </div>
        </div>
        <div class="modal-footer">
       
          <button type="button" class="btn btn-default" data-dismiss="modal" onclick = "closeModal();">Close</button>
          <button type="button" class="btn btn-primary" onClick = "initShareFile();">Share</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
    </apex:form>
    <apex:composition template="isll_TemplateMain">
        <apex:define name="firstColumn">
            <apex:outputPanel layout="block" style="float:left;">
                <apex:outputPanel layout="block" style="float:left; width:400px;">
                     <c:isll_SearchBarComponent style="width:250px;" isSideBar="false" />&nbsp;
                </apex:outputPanel>
                <apex:outputPanel layout="block" style="float:right;">
                    <apex:form id="form1">
                        <apex:outputPanel layout="block" id="postPanel" style="float:left;">
                            <div id="shareSuccess" style="display:none; float:left; padding-left:20px;">
                                <apex:outputPanel layout="block" rendered="{!a_postSucceeded}" style="color:green; font-weight:bold;">Shared...</apex:outputPanel>
                                <apex:outputPanel layout="block" rendered="{!!a_postSucceeded}" style="color:red; font-weight:bold;">An unexpected error occurred... . Please try again or contact your administrator.</apex:outputPanel>
                            </div>
                            <apex:outputPanel layout="block" style="clear:both;" />
                            <apex:inputTextArea id="chatterInput"  styleClass="chatterInput" value="{!a_postText}"/>
                            <apex:commandLink styleClass="askLink" action="{!Post}" rerender="postPanel" oncomplete="ShowShareResult();">ASK</apex:commandLink>
                        </apex:outputPanel>
                        <apex:outputPanel layout="block" style="clear:both;">
                            <c:isll_CmsContentComponent cmsContentName="Brain Search DL Link" editable="true"/>
                        </apex:outputPanel>
                    </apex:form>
                </apex:outputPanel>
            </apex:outputPanel>
            
            <apex:outputPanel layout="block" style="clear:both;" />
            <apex:form >
                <apex:actionFunction name="ResetElementList" action="{!ResetElementList}" rerender="DetailContent, libraries, peoples, chatters" status="loadingStatus">
                    <apex:param name="firstParam" value="" assignTo="{!a_displayContent}" />
                </apex:actionFunction>
                
                <div id="tabPanel" class = "tabPanel">
                    <a href="javascript:void(0);" onclick="changeTab('libraries');">
                        <div id="library" style="float:left; margin-right:2px; width : 90px;" class="tab-panel {!IF(a_displayContent='library', 'active', '')}">Library</div>
                    </a>
                    <a href="javascript:void(0);" onclick="changeTab('peoples');">
                        <div id="people" style="float:left; margin-right:2px; width : 90px;" class="tab-panel {!IF(a_displayContent='people', 'active', '')}">
                        <span id = "peopleHelp" class = 'helpClass' rel="popover" data-content="The primary contacts of Sustainable Living experts will be shown at the top, people's location is shown by the flag, click + to follow via Chatter, or click on them to see their profile"  data-original-title="People Results">People</span></div>
                    </a>
                    <a href="javascript:void(0);" onclick="changeTab('chatters');">  
                        <div id="chatterResults" style="float:left;" class="helpClass tab-panel {!IF(a_displayContent='chatter', 'active', '')}" rel="popover" data-content="These are feeds found matching your search, these are chatter files matching your search"  data-original-title="Chatter Results">
                            Chatter
                        </div>    
                    </a>
                </div>
                
                <div style="clear:both;"></div>
                
                <apex:actionStatus id="loadingStatus">
                    <apex:facet name="start">
                        <apex:outputPanel layout="block" styleClass="active">
                            <div style="border: 1px solid black; vertical-align:middle; background-color: #fff; margin: 5px; padding: 3px; display: inline-block; padding-bottom: 0; "><apex:image value="../img/loading.gif" /></div>&nbsp;Please wait while loading...
                        </apex:outputPanel>
                    </apex:facet>
                    
                    <apex:facet name="stop">
                        <apex:outputPanel layout="block" id="DetailContent" styleclass="DetailContent {!a_displayContent}">
                            <apex:outputPanel id="libraries" layout="block" rendered="{!a_displayContent='library'}">
                                <apex:outputPanel id="librariesContent" layout="block">
                                    <apex:outputPanel layout="block" id="docfilter" rendered="{!a_librarySize>0}">
                                        <span  class = "helpClass"  id = "fileSortHelp" rel="popover" data-content="Cick to sort"  data-original-title="Results Sort">
                                        
                                        <apex:outputPanel layout="block" style="float:left; padding-bottom:5px; margin-right: 10px;">
                                            <div style="margin-bottom: 3px;">&nbsp;<b>Order by</b></div>
                                            <div class="styled-select">
                                                <apex:selectList id="fields" value="{!a_selectedOrderField}" multiselect="false" size="1">
                                                    <apex:selectoptions value="{!a_orderFields}" />
                                                </apex:selectList>
                                            </div>
                                        </apex:outputPanel>
                                        
                                        <apex:outputPanel layout="block" style="float:left; margin-right: 10px;">
                                            <div style="margin-bottom: 3px;">&nbsp;<b>Direction</b></div>
                                            <div class="styled-select">
                                                <apex:selectList id="fileTypes" value="{!a_selectedOrderDirection}" multiselect="false" size="1">
                                                    <apex:selectoptions value="{!a_orderDirection}" />
                                                </apex:selectList>
                                            </div>
                                        </apex:outputPanel>

                                        <apex:outputPanel layout="block" style="float:left; vertical-align:bottom;">
                                            <div style="margin-bottom: 3px;">&nbsp;</div>
                                            <apex:commandButton id="cbtneditlogin" action="{!UpdateLibraryList}" rerender="librariesContent" status="loadingStatus"
                                                style="background-color:transparent;background-image:url({!URLFOR($Resource.isll_images,'refresh.png')});height:25px;width:25px;border-width:0px;background-repeat:no-repeat;cursor:pointer;"/>
                                        </apex:outputPanel>

                                  </span> 

                            </apex:outputPanel>

                                <apex:outputPanel layout="block" style="clear:both;" />
                                <hr style="width:95%;"/>

                                <apex:actionRegion >
                                <apex:outputPanel id="librariesRepeater" layout="block" style="height:400px; overflow:auto; margin-bottom:20px;">
                                    <apex:dataTable value="{!a_libraries}" var="elem" rowClasses="odd,even" styleClass="libraryTable">
                                         <apex:column style="width:10px" >
                                            <apex:outputPanel rendered="{!elem.isNewFile}" >
                                                <div class = "newFile">NEW</div>
                                            </apex:outputPanel>
                                        </apex:column>
                                        <apex:column >
                                            <apex:outputLink value="/{!elem.contentVersion.Id}" target="_blank" >
                                                <apex:image value="/sfc/images/docicons/{!elem.contentVersion.ExternalDocumentInfo1}.png" />
                                            </apex:outputLink>
                                        </apex:column>
                                        
                                        <apex:column >
                                            <apex:outputLink value="/{!elem.contentVersion.Id}" style="text-decoration:none;" target="_blank" >
                                                <apex:outputText value="{!LEFT(elem.contentVersion.Title, 25)} {!IF(LEN(elem.contentVersion.Title)>25,'...','')}" />
                                            </apex:outputLink>
                                        </apex:column>
                                        
                                        <apex:column >
                                            <apex:outputText value="{!LEFT(elem.contentVersion.Description, 40)}&nbsp;{!IF(LEN(elem.contentVersion.Description)>40,'...','')}" escape="false" />
                                        </apex:column>
                                        
                                        <apex:column >
                                                <apex:outputLink style="text-decoration: none;" value="/{!elem.contentVersion.Id}" target="_blank">
                                                    <apex:image value="{!URLFOR($Resource.isll_images, 'infoButton.png')}" style="width: 20px; height: 20px;" />
                                                </apex:outputLink>
                                            
                                        </apex:column>
                                        
                                        <apex:column >
                                            <apex:outputField value="{!elem.contentVersion.CreatedDate}" />
                                        </apex:column>
                                        
                                        <apex:column >
                                            <a data-toggle="modal" href="#myModal" onClick = "setID('{!elem.contentVersion.id}');">
                                                 <apex:image id="shareLink" value="{!URLFOR($Resource.isll_images, 'shareButton.png')}" style="height:20px; width:20px;" />
                                            </a>
                                        </apex:column>
                                        
                                        <apex:column id="AddToLibraryColumn">
                                           
                                                <apex:outputPanel rendered="{!!a_contentInUserLibraryMap[elem.contentVersion.id]}">
                                                    <apex:commandLink action="{!AddToMyLibrary}" rerender="AddToLibraryColumn">
                                                        <apex:image value="{!URLFOR($Resource.isll_images, 'plus.png')}" style="width: 20px; height: 20px;" />
                                                        <apex:param name="contentId" value="{!elem.contentVersion.id}" assignTo="{!a_contentVersionId}" />
                                                    </apex:commandLink>
                                                </apex:outputPanel>
                                        </apex:column>
                                        
                                        <apex:column >
                                            
                                                <apex:outputLink value="/sfc/servlet.shepherd/version/download/{!elem.contentVersion.Id}">
                                                    <apex:image value="{!URLFOR($Resource.isll_images, 'download.png')}" style="width: 20px; height: 20px;" />
                                                </apex:outputLink>
                                            
                                        </apex:column>
                                    </apex:dataTable>
                                     <script>


                                       //info   
                                    if($('.libraryTable tr:eq(0) td:eq(4)').html() != undefined ){
                                     $('.libraryTable tr:eq(0) td:eq(4)').append('<div  class = "helpClass"  id = "fileInfoHelp" rel="popover" data-content="See more information"  data-original-title="Information">');
                                    }

                         
                                       
                                     </script>
                                </apex:outputPanel>
                                </apex:actionRegion>
                                <apex:actionStatus id="loadingLibrariesStatus">
                                    <apex:facet name="start">
                                        <apex:outputPanel >
                                            <apex:commandButton value="{!$Label.isllBrain_Loading}" disabled="true" rendered="{!librariesBatchNumber > 1}" status="loadingLibrariesStatus"/>
                                            <apex:commandButton value="{!$Label.isllBrain_Loading}" disabled="true" status="loadingLibrariesStatus"/>
                                            <apex:commandButton value="{!$Label.isllBrain_Loading}" disabled="true" status="loadingLibrariesStatus"/>
                                            <apex:commandButton value="{!$Label.isllBrain_Loading}" disabled="true" status="loadingLibrariesStatus"/>
                                            <apex:commandButton value="{!$Label.isllBrain_Loading}" disabled="true" status="loadingLibrariesStatus"/>
                                            <apex:commandButton value="{!$Label.isllBrain_Loading}" disabled="true" rendered="{!hasNextLibrariesBatch}" status="loadingLibrariesStatus"/>
                                        </apex:outputPanel>
                                    </apex:facet>
                                    
                                    <apex:facet name="stop">
                                        <apex:outputPanel rendered="{!hasPreviousLibraries || hasNextLibraries || hasNextLibrariesBatch}">
                                            <apex:commandButton action="{!previousLibrariesBatch}" value="{!$Label.isllBrain_Previous_Batch}" rerender="librariesRepeater,loadingLibrariesStatus" rendered="{!librariesBatchNumber > 1}" status="loadingLibrariesStatus" />
                                            <apex:commandButton action="{!firstLibraries}" value="{!$Label.isllBrain_First}" rerender="librariesRepeater,loadingLibrariesStatus" disabled="{!(!hasFirstLibraries)}" status="loadingLibrariesStatus" />
                                            <apex:commandButton action="{!previousLibraries}" value="{!$Label.isllBrain_Previous}" rerender="librariesRepeater,loadingLibrariesStatus" disabled="{!(!hasPreviousLibraries)}" status="loadingLibrariesStatus" />
                                            <apex:commandButton action="{!nextLibraries}" value="{!$Label.isllBrain_Next}" rerender="librariesRepeater,loadingLibrariesStatus" disabled="{!(!hasNextLibraries)}" status="loadingLibrariesStatus" />
                                            <apex:commandButton action="{!lastLibraries}" value="{!$Label.isllBrain_Last}" rerender="librariesRepeater,loadingLibrariesStatus" disabled="{!(!hasNextLibraries)}" status="loadingLibrariesStatus" />
                                            <apex:commandButton action="{!nextLibrariesBatch}" value="{!$Label.isllBrain_Next_Batch}" rerender="librariesRepeater,loadingLibrariesStatus" rendered="{!hasNextLibrariesBatch}" status="loadingLibrariesStatus" />
                                        </apex:outputPanel>
                                    </apex:facet>
                                </apex:actionStatus>      
                                </apex:outputPanel>
                                <div style = "padding-left : 603px">
                                    <c:isll_LibraryKey />
                                </div>
                            </apex:outputPanel>
                            
                            <apex:outputPanel id="peoples" layout="block" style="min-height:400px;">
                                <apex:outputPanel rendered="{!a_showExperts}">
                                    <apex:outputPanel layout="block" style="clear:both; font-weight:bold; font-size:18px; margin:15px; color: #343434">
                                        <apex:outputText value="Sustainability Experts" />
                                    </apex:outputPanel>
                                    
                                    <apex:outputPanel layout="block" style="clear:both;">
                                        <apex:repeat value="{!a_experts}" var="elem">
                                            <apex:outputPanel >
                                                <apex:outputPanel layout="block" styleClass="entryInfo" style="height:165px;">
                                                    <apex:outputPanel layout="block" styleClass="entry">
                                                        <apex:outputLink value="/{!elem.id}" target="_blank">
                                                            <c:isll_UserpicWithFlagV2 user="{!elem}" width="75" height="75" style="display: block; margin-left: auto; margin-right: auto;" />
                                                        </apex:outputLink>
                                                    </apex:outputPanel>
                                                    <apex:outputPanel layout="block" style="text-align:right; color:black; font-size:8px;" rendered="{!$User.Id <> elem.id}">
                                                        <apex:outputPanel rendered="{!!a_followingUserMap[elem.id]}">
                                                            <apex:commandLink action="{!Follow}" rerender="peoples">
                                                                <apex:image value="{!URLFOR($Resource.isll_images, 'chatterAddButton.png')}" style="width: 20px; height: 20px;" />
                                                                <apex:param name="UserId" value="{!elem.id}" assignTo="{!a_userId}" />
                                                            </apex:commandLink>
                                                       </apex:outputPanel>
                                                    </apex:outputPanel>
                                                    <div style="text-align:left;">
                                                        <apex:outputPanel >
                                                            <apex:outputLink value="/{!elem.id}" target="_blank" style="text-decoration:none;">
                                                                <apex:outputText value="{!elem.Name}" />
                                                            </apex:outputLink>
                                                        </apex:outputPanel>
                                                    </div>
                                                    <div style="text-align:left; font-size:9px; color:#666;">
                                                        <apex:outputText value="{!elem.Title}" />
                                                    </div>
                                                </apex:outputPanel>
                                            </apex:outputPanel>
                                        </apex:repeat>
                                    </apex:outputPanel>
                                    
                                    <apex:outputPanel layout="block" style="clear:both; border-bottom: 1px solid black; margin:10px;">
                                        
                                    </apex:outputPanel>
                                </apex:outputPanel>
                                
                                <apex:outputPanel layout="block" style="clear:both;">
                                    <apex:repeat value="{!a_people}" var="elem">
                                        <apex:outputPanel >
                                            <apex:outputPanel layout="block" styleClass="entryInfo" style="height:165px;">
                                                <apex:outputPanel layout="block" styleClass="entry">
                                                    <apex:outputLink value="/{!elem.id}" target="_blank">
                                                        <c:isll_UserpicWithFlagV2 user="{!elem}" width="75" height="75" style="display: block; margin-left: auto; margin-right: auto;" />
                                                    </apex:outputLink>
                                                </apex:outputPanel>
                                                <apex:outputPanel layout="block" style="text-align:right; color:black; font-size:8px;" rendered="{!$User.Id <> elem.id}">
                                                    <apex:outputPanel rendered="{!!a_followingUserMap[elem.id]}">
                                                        <apex:commandLink action="{!Follow}" rerender="peoples">
                                                            <apex:image value="{!URLFOR($Resource.isll_images, 'chatterAddButton.png')}" style="width: 20px; height: 20px;" />
                                                            <apex:param name="UserId" value="{!elem.id}" assignTo="{!a_userId}" />
                                                        </apex:commandLink>
                                                   </apex:outputPanel>
                                                </apex:outputPanel>
                                                <div style="text-align:left;">
                                                    <apex:outputPanel >
                                                        <apex:outputLink value="/{!elem.id}" target="_blank" style="text-decoration:none;">
                                                            <apex:outputText value="{!elem.Name}" />
                                                        </apex:outputLink>
                                                    </apex:outputPanel>
                                                </div>
                                                <div style="text-align:left; font-size:9px; color:#666;">
                                                    <apex:outputText value="{!elem.Title}" />
                                                </div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:repeat>
                                </apex:outputPanel>
                            </apex:outputPanel>
                            
                            
                            <apex:outputPanel id="chatters" layout="block" style="display: inline; vertical-align:top !important;">
                                <apex:actionRegion >
                                <apex:outputPanel id="contentsRepeater" layout="block" style="width:380px; min-height:400px; padding-right:50px; display: inline-block; vertical-align:top; background:#e1e1e1">
                                    <table style="border:0;">
                                        <apex:repeat value="{!a_contents}" var="elem">
                                            <tr>
                                                <td>
                                                    <apex:outputLink value="/_ui/core/userprofile/UserProfilePage?u={!elem['actor']['id']}" target="_blank">
                                                        <c:isll_UserpicWithFlagV2 user="{!a_userInfoMap[elem['actor']['id']]}" width="64" height="64" style="display: block; margin-left: auto; margin-right: auto;" />
                                                    </apex:outputLink>
                                                </td>
                                                
                                                <td style="vertical-align:top; width:350px;">
                                                    <div style="float:left; width:150px; font-weight:bold; font-size:13px; color:#787878; margin: 0 0 0 10px;">
                                                        <apex:outputText value="{!elem['actor']['firstName']} {!elem['actor']['lastName']}" />
                                                    </div>
                                                    <div style="text-align:right;">
                                                        <apex:outputLink value="/{!elem.id}" target="_blank" style="text-decoration:none;">
                                                            <apex:outputText value="{0,date,h:mm a dd/MM/yy}" style="font-size:10px;">
                                                                <apex:param value="{!elem.createdDate}" />
                                                            </apex:outputText>
                                                        </apex:outputLink>
                                                    </div>
                                                    <div style="clear:both; margin-bottom:10px;"></div>
                                                    <div style="color:#787878; margin: 0 0 0 10px;">
                                                        <apex:outputText value="{!elem['body']['text']}" />
                                                    </div>
                                                </td>
                                            </tr>
                                        </apex:repeat>
                                    </table>
   
                                </apex:outputPanel>

                                <apex:outputPanel id="filesRepeater" layout="block" style="width:450px; display: inline-block; vertical-align:top;">
                                    <apex:repeat value="{!a_files}" var="elem">
                                        <apex:outputPanel >
                                            <apex:outputPanel layout="block" styleClass="entryInfo">
                                                <apex:outputPanel layout="block" styleClass="entry">
                                                    <apex:outputLink value="/{!elem.Id}" target="_blank">
                                                        <apex:image value="/sfc/images/docicons/{!a_contentVersionFileTypeMap[elem.versionid]}.png"/>
                                                    </apex:outputLink>
                                                </apex:outputPanel>
                                                <div style="text-align:right; color:black; font-size:8px;">
                                                       <a data-toggle="modal" href="#myModal" onClick = "setID('{!elem.id}');">
                                                         <apex:image id="shareLink" value="{!URLFOR($Resource.isll_images, 'shareButton.png')}" style="height:20px; width:20px;" />
                                                      </a>

                                                    <apex:outputPanel rendered="{!!a_contentInUserLibraryMap[elem.versionid]}">
                                                        <apex:commandLink action="{!AddToMyLibrary}" rerender="chatters">
                                                            <apex:image value="{!URLFOR($Resource.isll_images, 'plus.png')}" style="width: 20px; height: 20px;" />
                                                            <apex:param name="contentId" value="{!elem.versionid}" assignTo="{!a_contentVersionId}" />
                                                        </apex:commandLink>
                                                    </apex:outputPanel>
                                                    <apex:outputLink value="/sfc/servlet.shepherd/version/download/{!elem.Id}">
                                                        <apex:image value="{!URLFOR($Resource.isll_images, 'download.png')}" style="width: 20px; height: 20px;" />
                                                    </apex:outputLink>
                                                </div>
                                                <div style="text-align:left; word-break: break-all;"><apex:outputText value="{!LEFT(elem.Title, 25)} {!IF(LEN(elem.Title)>25,'...','')}" /></div>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
                                    </apex:repeat>
                                    
                                </apex:outputPanel>
                                </apex:actionRegion>
                                
                                <apex:actionStatus id="loadingChatterStatus">
                                    <apex:facet name="start">
                                        <apex:outputpanel >
                                            <apex:commandButton value="{!$Label.isllBrain_Loading}" disabled="true" status="loadingChatterStatus" rendered="{!tmp_feedItemPage.nextPageToken != null}"/>
                                            <apex:commandButton value="{!$Label.isllBrain_Loading}" disabled="true" status="loadingChatterStatus" rendered="{!moreChatterCounter > chattersPagesToClear}"/>
                                        </apex:outputpanel>
                                    </apex:facet>
                                    
                                    <apex:facet name="stop">
                                        <apex:outputpanel >
                                            <apex:commandButton action="{!findMoreChatter}" value="{!$Label.isllBrain_FindMore}" rerender="contentsRepeater,filesRepeater,loadingChatterStatus" rendered="{!findMoreChatterDisable}" status="loadingChatterStatus" />
                                            <apex:commandButton action="{!clearAndFindMoreChatter}" value="{!$Label.isllBrain_ClearAndFindMore}" rerender="contentsRepeater,filesRepeater,loadingChatterStatus" rendered="{!clearAndFindMoreChatterDisable}" status="loadingChatterStatus" />
                                            <apex:commandButton action="{!clearChatter}" value="{!$Label.isllBrain_StartOver}" rerender="contentsRepeater,filesRepeater,loadingChatterStatus" rendered="{!moreChatterCounter > chattersPagesToClear}" status="loadingChatterStatus" />
                                        </apex:outputpanel>
                                    </apex:facet>
                                </apex:actionStatus>                                

                                 <div style = "padding-left : 603px">
                                        <c:isll_LibraryKey />
                                    </div>
                            </apex:outputPanel>
                            
                        </apex:outputPanel>
                    </apex:facet>
                </apex:actionStatus>
            </apex:form>
        </apex:define>
    </apex:composition>
</apex:page>