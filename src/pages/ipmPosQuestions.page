<apex:page controller="IPM_GateDocumentRiskManagement" sidebar="false" showHeader="false">
<apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/bootstrap.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/ipmButtons.css')}"/>       
    <apex:includeScript value="{!URLFOR($Resource.ipmResourceRevamp, 'js/jquery.js')}"/> 
    <apex:includeScript value="{!URLFOR($Resource.ipmResourceRevamp, 'js/bootstrap.js')}"/>    
    <apex:includeScript value="{!URLFOR($Resource.ipmResourceRevamp, 'js/jquery-ui.js')}"/>   
    <apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/jquery-ui.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'css/ipmModal1.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.ipmResourceRevamp, 'assets/font-awesome/css/font-awesome.min.css')}"/>
    <style>
        .marginTop{margin-top:20px;}
        .inputField{margin-bottom:15px;}
        .inputField input, .inputField select{width:100%;height:30px;border-radius: 3px; border: 1px #a8a8a8 solid;}
        .input-group-addon{padding: 0px;margin-top: -3px;width: 1px;background:none; border:none;color: #007dbb;font-size: 1.3em;}
        /*.fa-calendar:before{margin-left: -41px;}*/
        .middlePanel{background:#f9f9f9; border-top:1px #d7e1e0 solid; border-bottom:1px #d7e1e0 solid;margin-bottom: 10px;padding-top: 5px;}
        .fieldFont{font-size:0.8em; color:#555555;} 
        .fieldLabel{padding-top:10px; padding-bottom:10px; font-weight:bold;}
        .modal-backdrop.in {opacity: 0.7;}
        .date input{height:30px;border-radius: 4px;border: 1px #ddd solid;width:41%;}
        .input-group .input-group-addon {position: absolute;top: 53px;left: 36%;} 
        .input-group.date{width:100%;padding:20px 0;}
        .input-group.date label{display:block;}
         div[class^="col-xs-"]{padding:5px 10px;} 
        .changeStatusPage textarea{width:100%;}
        .changeStatusPage {/*background:#f9f9f9; border-bottom:1px #d7e1e0 solid;*/padding-bottom:10px;}
        
        /*ipmButton Styles */
        .ipmButton{padding: 7px 0;font-size: 1em;border-radius: 2px;color: white;border: 1px #406b14 solid;text-transform: capitalize;padding-left:5px; padding-right:5px;height: 30px;text-decoration: none;}
        .ipmButton.green{background:#81bf42 !important;}
        .ipmButton.green:hover{background:#56843b !important;}
         #changeStatus .ipmButtonGroup{padding-bottom: 4%;padding-right: 6px;} 
         .SecButtonSet .icoButton {display:inline-block;width:30px; margin: 0px 5px; height:30px;border:1px solid #1568b6;border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%;}
        
        /*slider styles*/
        .sliderStat {margin-bottom:20px;display:block;}
        .sliderStat1 {margin-bottom:20px;display:block;}
        /*.sliderStat::before {content:"";display:block;position:absolute;left:0; top:-5px; border:1px solid #589e0d; background:#fff; width:5px; height:16px; border-radius:5px; -webkit-border-radius:5px; -webkit-border-radius:5px;}
        .sliderStat::after {content:"";display:block;position:absolute;right:0; top:-5px; border:1px solid #589e0d; background:#fff; width:5px; height:16px; border-radius:5px; -webkit-border-radius:5px; -webkit-border-radius:5px;}*/
        .legendSld {position:relative; top:20px;}
        .legendSld label {float:left; cursor:pointer; position:relative; font-size:0.8em;font-weight:normal;}
        .legendSld:after {content:""; display:block; clear:both; visibility:hidden;}
        .legendSld label[for=s0] {text-align:left;left:0px; width:16.6666666666667%;}
        .legendSld label[for=s1] {text-align:center; width:33.3333333333333%;}
        .legendSld label[for=s2] {text-align:center; width:33.3333333333333%;}
        .legendSld label[for=s3] {text-align:right;right:0px; width:16.6666666666667%;}
        .legendSld label[for=s4] {text-align:left;left:0px; width:10%;}
        .legendSld label[for=s5] {text-align:center; width:20%;}
        .legendSld label[for=s6] {text-align:center; width:20%;}
        .legendSld label[for=s7] {text-align:center; width:20%;}
        .legendSld label[for=s8] {text-align:center; width:20%;}
        .legendSld label[for=s9] {text-align:right;right:0px; width:10%;}
        /*.legendSld label[for=s1]:before, .legendSld label[for=s2]:before {content:"";display:block;position:absolute;left:49.5%; top:-25px; border:1px solid #589e0d; background:#fff; width:5px; height:16px; border-radius:5px; -webkit-border-radius:5px; -webkit-border-radius:5px;}*/
        .legendSld label:before {content:"";display:block;position:absolute;left:49.5%; top:-25px; border:1px solid #252525; background:#fff; width:5px; height:16px; border-radius:5px; -webkit-border-radius:5px; -webkit-border-radius:5px;}
        .legendSld label[for=s3]:before, .legendSld label[for=s9]:before {left:100%!important;}
        .legendSld label[for=s0]:before, .legendSld label[for=s4]:before {left:0%!important;}    
        .slider3 .legendSld label[for=s2]:before {display:none!important;}
        .sliderDiv{margin-top:20px;} 
        .sliderDiv:after {display:block; clear:both: content:" "; visibility:hidden;}   
        #changeStatus{margin:20px 0 0 0;padding:0 15px;}       
        .infoMsg{padding:10px;font-size:0.82em;background:#e5f8ff;border:1px #1568b6 solid;color:#007dbb; border-radius:2px;}       
        .toolTipMsg{background:#fafafa;border:1px #c9c9c9 solid; border-radius:2px;color:#364354;font-size:0.82em;position:relative;}          
        .toolTipMsg::before { left: 5%;top: -8px; position: absolute; border-top: 1px #c9c9c9 solid;border-right: 1px #c9c9c9 solid;background: #fafafa;content: " ";height: 15px;width: 15px;transform: rotate(-45deg);-moz-transform: rotate(-45deg);-webkit--transform: rotate(-45deg);-ms-transform: rotate(-45deg); }
        .toolTipMsg label {font-weight:normal;}
        .ui-slider-handle {border-radius:50%!important;-moz-border-radius:50%!important;-webkit-border-radius:50%!important;background:#EDEDED !important;border:1px solid #8F8F8F !important;}
        .ui-slider-horizontal {height:0.4em!important; border:none!important;background:#DCDCDC !important;width:90%!important; margin:0 auto;}
        .ui-slider-horizontal .ui-slider-handle {top:-0.6em!important;}
        .ui-slider .ui-slider-handle {width:1.6em!important; height:1.6em!important;}

        .messageBox .SecButtonSet {margin-top:0!important; position:relative; top:2px;}
        .messageBox .SecButtonSet .icoButton {width:16px!important;height:16px!important;top: -3px; }
        .messageBox .SecButtonSet a {display:block; float:left; border:1px solid #015ba7; cursor:default; border-radius:50%; -moz-border-radius:50%; -webkit-border-radius:50%;}
        .messageBox .SecButtonSet span.msgTxt {position: relative; top: -2px; display:block; margin-left:25px;}
    
        /* Box styling */
        .fa{cursor:pointer;}
        .addLink{padding-right:10px !important;float:left; text-align:right; color:#007DBB; font-size:0.7em; cursor:pointer;}
        .addLinkText{margin-left:1px;font-size: 1.4em;font-weight: bold;}
        .riskheading{font-size:1em; font-weight:bold;}
        .blue{color:#253b78 !important;}
        .questionBox{border:1px solid #ddd;padding:10px;margin:10px 0px;}
        .modal-body{padding:0px !important;}
        .questionnaire{margin:10px 15px;}
        .noPadleft{padding-left:0px !important;}
        .noPadright{padding-right:0px !important;}
        .questions{margin-bottom:40px;color:#253b78;}
        .sliderStat,.sliderStat1{margin-bottom:50px;}
        .marginTop{margin-top:20px;}
        
        .proceedButton{padding-right:15px !important;}
        .proceedButton > a {width:100%;}
        .tooltip > .tooltip-inner {-webkit-box-shadow: 1px 4px 5px 2px rgba(0,0,0,0.15);-moz-box-shadow: 1px 4px 5px 2px rgba(0,0,0,0.15);box-shadow: 1px 4px 5px 2px rgba(0,0,0,0.15);margin-left:100px;font-weight:normal;background-color: #00b1a5;border-radius:2px;text-align:left;width:500px;}
        .tooltip > .tooltip-arrow {border-top-color:#00b1a5!important;}
        .tooltip.bottom .tooltip-arrow {border-bottom-color:#00b1a5!important;}
        #showQues {display:none;}
        .delButton{width: 25px !important;display: block;height: 25px;border: 1px solid;border-radius: 50px;padding: 15px;}        
        /* add question part */
        .inputField input, .inputField select{width: 100%;height: 30px;border-radius: 3px;border: 1px #a8a8a8 solid;
        .mBottom{margin-bottom:10px;}
        .commentArea textarea{width:100%;}
        .riskMheading{margin-bottom:10px;}
        .mb20 {margin-bottom:20px!important;}
        
</style>
     
<div id="showQues">  
    <apex:form id="frm" >

<!-- POS Questions List -->
        <apex:includeScript value="{!URLFOR($Resource.ipmResource, 'js/bootstrap.js')}"/>
        <apex:outputPanel id="qPanel">
        <apex:outputPanel id="qPanel1" rendered="{!IF(AND(posComplete==false,isAdd==false),true,false)}" >
        <div class="container-fluid">
          <div class="questionnaire">  
          <div class="row mb20">
               <div class="col-sm-3 riskheading noPadleft blue ipmPanelHeading width3">
                  <apex:outputText value="Probability Of Success"/>
               </div>
            </div> 
            <apex:repeat value="{!posQuestionsList}" var="pr">  
            <div class="row">
               <div class="col-sm-12 riskheading noPadleft blue ipmPanelHeading width3">
                  <apex:outputText value="{!pr.IPM_POS_Question_Type__c}"/>
               </div>
            </div>

            <div class="row">
               <div class="col-sm-12 questionBox">
                 <div class="questions">
                   <apex:outputText value="{!pr.IPM_Sequence_Number__c}"/>.&nbsp;
                   <apex:outputText value="{!pr.IPM_Question__c}"/>
                 </div>
               
                 
                 <apex:outputPanel rendered="{! if(isEditableUser=='true','true','false')}">
                 <input name="scoreDB" value="{!pr.IPM_Score__c}" class="scoreDB" style="display:none;"/>
                 <apex:outputPanel id="slide" styleClass="sliderStat" > 
                 <div class="legendSld">
                   <label for="s0" onclick="changeScore('{!pr.Id}',0);">Select</label>
                   <input type="radio" name="posAns" id="s0" value="0"  />
                   
                   <label for="s1" onclick="changeScore('{!pr.Id}',1);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!pr.IPM_HelpText_Yes__c}">1</label>
                   <input type="radio" name="posAns" id="s1" value="1"   />
                   
                   <label for="s2" onclick="changeScore('{!pr.Id}',3);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!pr.IPM_HelpText_No__c}">3</label>
                   <input type="radio" name="posAns" id="s2" value="3"  />
                   
                   <label for="s3" onclick="changeScore('{!pr.Id}',5);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!pr.IPM_HelpText_Partly__c}">5</label>
                   <input type="radio" name="posAns" id="s3" value="5"  />
                 </div>
                   </apex:outputPanel>
                 </apex:outputPanel> 
                 <apex:outputText value="{!pr.IPM_Score__c}" rendered="{! if(isEditableUser=='false','true','false')}"/>
              </div>
            </div>
           </apex:repeat> 
          </div> 
        </div>
        <div class="col-xs-2 marginTop ipmButtonGroup pull-right proceedButton">
          <apex:commandLink value="Proceed" styleClass="ipmButton green" action="{!proceed}" reRender="frm" oncomplete="initSlider1()"/>
        </div>
        </apex:outputPanel>
        </apex:outputPanel>
        <apex:actionFunction name="callChangeScore" action="{!saveScore}" reRender="" oncomplete="initSlider1()" >
        <apex:param name="Qid" assignTo="{!qId}" value=""/>  
        <apex:param name="score" assignTo="{!score}" value=""/> 
        </apex:actionFunction>
       <!-- <apex:outputText id="test" value="{!score}">asdasdassdfassfassfassfa</apex:outputText>-->
        <!---------------------------------------------------------------------------------------------->
        <!-- RQS Questions List  -->
        <apex:outputPanel id="rPanel">
        <apex:outputPanel id="rPanel1" rendered="{!posComplete}" >
        <div class="container-fluid">
          <div class="questionnaire"> 
              <div class="row mb20">
                <div class="noPadright">
                <div class="col-sm-6 riskheading noPadleft blue ipmPanelHeading width3">
                   <apex:outputText value="Risk Quick Scan Questions"></apex:outputText> 
               </div>
                  <div class="col-sm3-6 pull-right noPadright addLink">
                   
                <!--    <div class="SecStatusUpdate openModal" modalTitle="RISK QUICK SCAN(RQS) QUESTIONNAIRE" data-toggle="modal" data-target="#ipmModal" value="/apex/ipmAddQuestion?id={!projectId}&gateType={!projDocType}" data-backdrop="static" data-keyboard="false" title="RISK QUICK SCAN(RQS) QUESTIONNAIRE">
            <span class="addLinkText">Add Question</span>
         </div> -->
         
         <apex:outputPanel rendered="{! if(isEditableUser=='false','false','true')}">
          <span class="fa fa-plus"></span>
         <span class="addLinkText"><apex:commandLink value="Add Question" action="{!changeQuestionView}" reRender="addQues,rPanel"/></span>
         </apex:outputPanel>
                  </div> 
                </div>
              </div>
            <apex:repeat value="{!rqsQuestionsList}" var="rq">   
              <div class="row">
                 <div class="riskheading noPadleft blue ipmPanelHeading width3">
                   <apex:outputText value="{!rq.IPM_RQS_Question_Type__c}"/>
                   <apex:outputPanel layout="block" rendered="{!rq.IPM_Is_Added_Question__c}" styleClass="SecButtonSet pull-right">                   
                        <a class="icoButton delete" value="{!rq.Id}" onclick="delQuestion('{!rq.Id}')" title="Delete"/>
                        <!--<apex:commandLink action="{!deleteQuestion}"  reRender="rPanel" oncomplete="initSlider1()" styleClass="delButton icoButton delete">
                        <apex:param name="quesId" value="{!rq.Id}" assignTo="{!quesId}"/>    
                        </apex:commandLink>-->                     
                   </apex:outputPanel>
                 </div>
              </div>

              <div class="row">
                 <div class="col-sm-12 questionBox">
                    <div class="questions">
                       <apex:outputText value="{!rq.IPM_Sequence_Number__c}"/>.&nbsp;
                       <apex:outputText value="{!rq.IPM_Question__c}"/>
                    </div>
                    <apex:outputPanel rendered="{! if(isEditableUser=='true','true','false')}">   
                    <input type="hidden" id="quest" name="quest" value="{!rq.IPM_Score__c}" style="display:none"/>
                   <apex:outputPanel id="slide" styleClass="sliderStat1" >
                    <div class="legendSld">
                      <label for="s4" onclick="changeScore1('{!rq.Id}',0);">Select</label>
                      <input type="radio" name="rqsScore" id="s4" value="0"  />
                      <label for="s5" onclick="changeScore1('{!rq.Id}',1);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!rq.IPM_Question_Help_Text__c}">1</label>
                      <input type="radio" name="rqsScore" id="s5" value="1"   />
                      <label for="s6" onclick="changeScore1('{!rq.Id}',2);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!rq.IPM_HelpText_Yes__c}">2</label>
                      <input type="radio" name="rqsScore" id="s6" value="2"  />
                      <label for="s7" onclick="changeScore1('{!rq.Id}',3);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!rq.IPM_HelpText_No__c}">3</label>
                      <input type="radio" name="rqsScore" id="s7" value="3"  />
                      <label for="s8" onclick="changeScore1('{!rq.Id}',4);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!rq.IPM_HelpText_Partly__c}">4</label>
                      <input type="radio" name="rqsScore" id="s8" value="4"  />
                      <label for="s9" onclick="changeScore1('{!rq.Id}',5);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!rq.IPM_HelpText_Five__c}">5</label>
                      <input type="radio" name="rqsScore" id="s9" value="5"  />
                    </div>
                  </apex:outputPanel>
                  </apex:outputPanel>
                  <apex:outputText value="{!rq.IPM_Score__c}" rendered="{! if(isEditableUser=='false','true','false')}"/>
                 </div>
              </div>
             </apex:repeat> 
          </div> 
        </div>      
        <div class="col-xs-4 marginTop ipmButtonGroup pull-right">
           <apex:commandLink value="Generate mitigation plan" styleClass="ipmButton green" action="{!generateMitigationPlan}" oncomplete="GotoParentPage();" rendered="{!AND(isEditableUser='true',projDocType!='Contract')}" /> 
            <apex:commandLink styleClass="ipmButton" value="Back" action="{!backToPos}" reRender="qPanel,rPanel" oncomplete="retainValues();"  rendered="{!projDocType!='Contract'}"/>
        </div>  
        </apex:outputPanel>
        </apex:outputPanel>
        <!--------------------------------------------------------------->
        <!--------------Corporate Risk Questions------------------------->
        
        <apex:outputPanel id="crPanel">
        <apex:outputPanel id="crPanel1" rendered="{!AND(posComplete=true,projDocType='Contract')}" >
        <div class="container-fluid">
          <div class="questionnaire"> 
              <div class="row mb20">
                <div class="noPadright">
                    <div class="col-sm-6 riskheading noPadleft blue ipmPanelHeading width3">
                       <apex:outputText value="Corporate Risk Questions"></apex:outputText> 
                   </div>
                 
                </div>
              </div>
            <apex:repeat value="{!crQuestionsList}" var="crq">   
             
              <div class="row">
                 <div class="col-sm-12 questionBox">
                    <div class="questions">
                       <apex:outputText value="{!crq.IPM_Sequence_Number__c}"/>.&nbsp;
                       <apex:outputText value="{!crq.IPM_Question__c}"/>
                    </div>
                    <apex:outputPanel rendered="{! if(isEditableUser=='true','true','false')}">   
                    <input type="hidden" id="quest" name="quest" value="{!crq.IPM_Score__c}" style="display:none"/>
                   <apex:outputPanel id="slide" styleClass="sliderStat1" >
                    <div class="legendSld">
                      <label for="s4" onclick="changeScore1('{!crq.Id}',0);">Select</label>
                      <input type="radio" name="rqsScore" id="s4" value="0"  />
                      <label for="s5" onclick="changeScore1('{!crq.Id}',1);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!crq.IPM_Question_Help_Text__c}">1</label>
                      <input type="radio" name="rqsScore" id="s5" value="1"   />
                      <label for="s6" onclick="changeScore1('{!crq.Id}',2);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!crq.IPM_HelpText_Yes__c}">2</label>
                      <input type="radio" name="rqsScore" id="s6" value="2"  />
                      <label for="s7" onclick="changeScore1('{!crq.Id}',3);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!crq.IPM_HelpText_No__c}">3</label>
                      <input type="radio" name="rqsScore" id="s7" value="3"  />
                      <label for="s8" onclick="changeScore1('{!crq.Id}',4);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!crq.IPM_HelpText_Partly__c}">4</label>
                      <input type="radio" name="rqsScore" id="s8" value="4"  />
                      <label for="s9" onclick="changeScore1('{!crq.Id}',5);" data-toggle="tooltip" data-placement="bottom" data-original-title="{!crq.IPM_HelpText_Five__c}">5</label>
                      <input type="radio" name="rqsScore" id="s9" value="5"  />
                    </div>
                  </apex:outputPanel>
                  </apex:outputPanel>
                  <apex:outputText value="{!crq.IPM_Score__c}" rendered="{! if(isEditableUser=='false','true','false')}"/>
                 </div>
              </div>
             </apex:repeat> 
          </div> 
        </div>      
        <div class="col-xs-4 marginTop ipmButtonGroup pull-right">
           <apex:commandLink value="Generate mitigation plan" styleClass="ipmButton green" action="{!generateMitigationPlan}" oncomplete="GotoParentPage();" rendered="{!isEditableUser}" /> 
            <apex:commandLink styleClass="ipmButton" value="Back" action="{!backToPos}" reRender="qPanel,rPanel" oncomplete="retainValues();"  rendered="{!projDocType!='Contract'}"/>
        </div>  
        </apex:outputPanel>
        </apex:outputPanel>
        <!--------------------------------------------------------------->
        
        <!--Save Answers--->
        <apex:actionFunction name="callChangeScore1" action="{!saveRQSScore}"  reRender="" >
        <apex:param name="Qid" value="" assignTo="{!qId}"/>  
        <apex:param value="" name="score1" assignTo="{!score}"/> 
        </apex:actionFunction>
        <apex:actionFunction name="retainValues" action="{!getPosList}" reRender="qPanel,rPanel" oncomplete="initSlider();"/>        
        <!------------------------------------------------------------------------------->
        <!---------------------------Add Question---------------------------------------->
          
        <apex:outputPanel id="addQues">
        <apex:outputPanel id="addQues1" rendered="{!isAdd}" >
        <apex:pageMessages />
        
        <div class="container-fluid">
            <div class="questionnaire"> 
                <div class="row">
                    <div class="col-sm-12 riskheading noPadleft blue ipmPanelHeading mBottom">
                        <apex:outputText value="Add Risk Quick Scan Question" styleClass="riskMheading "></apex:outputText>
                    </div>    
                    <div class="col-sm-12 riskheading noPadleft addQuestion ipmPanelHeading mBottom">
                        <apex:outputText value="Select type"></apex:outputText>
                        <div class="inputField mBottom">
                            <apex:inputField value="{!question.IPM_RQS_Question_Type__c}"/>
                        </div>
                    </div>
                    <div class="col-sm-12 riskheading noPadleft addQuestion ipmPanelHeading mBottom">
                        <span class="questTitle"><apex:outputText value="Question"></apex:outputText></span>
                            <div class="col-sm-12 noPadleft commentArea mBottom">
                                <apex:inputTextarea style="margin-top: 10px;width:51%;" value="{!question.IPM_Question__c}"/>
                            </div>    
                    </div>
                    <div class="col-xs-12 noPadleft">
                        <div class="noPadleft ipmButtonGroup">    
                            <apex:commandLink styleClass="ipmButton green" value="Add" action="{!addQuestion}" reRender="rPanel,crPanel,addQues" oncomplete="initSlider1()"/>
                            <apex:commandLink styleClass="ipmButton" value="Cancel" action="{!cancelQuestion}" reRender="rPanel,crPanel,addQues" oncomplete="initSlider1()"/>
                        </div>                       
                      
                    </div>
                </div>
            </div>        
        </div>               
        <style>
        .riskheading{margin-bottom:10px;display:block;}
        .addQuestion{color:#555555;}
        .addQuestion .inputField > select{font-weight:normal;width:50%;margin-top: 10px;}
        .questTitle(margin-bottom:10px !important;display:block;}
        </style> 
        </apex:outputPanel>
        </apex:outputPanel>
        <!------------------------------------------------------------------------------->
        <apex:actionFunction name="deleteQuestion" action="{!deleteQuestion}" reRender="rPanel" oncomplete="initSlider1()">
            <apex:param name="quesId" assignTo="{!quesId}" value=""/> 
        </apex:actionFunction>
         
         <!--<apex:commandLink action="{!deleteQuestion}"  reRender="rPanel" oncomplete="initSlider1()" styleClass="delButton icoButton delete">
                        <apex:param name="quesId" value="{!rq.Id}" assignTo="{!quesId}"/>    
                        </apex:commandLink>-->
    </apex:form>
    <div id="ipmDeleteModalDiv">
            <c:ipmConfirmModalRevamp />
    </div> 
</div>
<script>

                function changeScore(id,score)
                
                {
                    //alert('id='+id+'>>>score='+score);
                callChangeScore(id,score);
                }
                
                function changeScore1(id,score)
                {
                 //alert('2id='+id+'>>>score='+score);
                callChangeScore1(id,score);
                }
                function GotoParentPage()
                {
                    window.top.location.href='/apex/ipmProjectDocumentSectionEditorV1?Id={!projectId}&projDocSecId={!projDocSecId}'; 
                }    

                var jq = jQuery.noConflict();
                jq(document).ready(function(){
                     waitForElement(); 
                    
                });
                function waitForElement(){
                    
                        jq("#showQues").show();
                        initSlider();
                        initSlider1();
                    
                }
               function initSlider(){
               // console.log('initSlider')
               jq("[data-toggle=tooltip]").tooltip();
               // setTimeout(function(){               
                var itemsProposed = [ 'Select','1','3','5'];
                var s = jq(".sliderStat");                
                var score;
                var PointerT = 100 / (itemsProposed.length-1);                
                    
                  s.slider({
                  min:1,
                  max:itemsProposed.length,
                  animate:'slow',
                  stop: function(event, ui){   
                            
                            var pointer = ui.value-1;
                            jq('#s'+ ui.value).prop('checked', true); 
                            score=itemsProposed[pointer];
                      }
                });
                                
                jq(".legendSld label").on("click", function(){
                    var lpos = jq(".legendSld label").offset().left;
                   // jq(".legendSld label").css({'color':'#222222'});
                    jq(this).parent().find('label').css({'color':'#222222', 'font-weight':'normal'});
                    jq(this).css({'color':'#e98824', 'font-weight':'bold'});
                    jq("toolTipMsg:before").css("left",lpos+"px"); 
                        
                });
                jq("input[type=radio][id^='s']").hide(); 
                
                jq(".scoreDB").each(function(){  
                  var score=jq(this).val(); 
                    // console.log('score:' +score);   
                   if(score == "1"){                
                     jq(this).next(".sliderStat").find(".ui-slider-handle").css("left", "33.3333333333333%");
                     jq(this).next(".sliderStat").find("label[for=s1]").css({'color':'#e98824', 'font-weight':'bold'});
                    }
                    else if(score == "3"){
                     jq(this).next(".sliderStat").find(".ui-slider-handle").css("left", "66.6666666666667%");
                     jq(this).next(".sliderStat").find("label[for=s2]").css({'color':'#e98824', 'font-weight':'bold'});
                    }
                    else if(score == "5"){                
                     jq(this).next(".sliderStat").find(".ui-slider-handle").css("left", "100%");
                     jq(this).next(".sliderStat").find("label[for=s3]").css({'color':'#e98824', 'font-weight':'bold'});
                    }else{
                    jq(this).next(".sliderStat").find(".ui-slider-handle").css("left", "0");
                     jq(this).next(".sliderStat").find("label[for=s0]").css({'color':'#e98824', 'font-weight':'bold'});
                    }
                    
                    });
                 // }, 1000);                
                }
                
               function initSlider1(){
               setTimeout(function(){               
                var itemsProposed = [ 'Select','1','2','3','4','5'];
                var sp = jq(".sliderStat1");                
                var quest;
                var PointerT = 100 / (itemsProposed.length-1);                
                    
                  sp.slider({
                  min:1,
                  max:itemsProposed.length,
                  animate:'slow',
                  stop: function(event, ui){   
                            
                            var pointer = ui.value-1;
                            // alert(pointer);
                            jq('#s'+ ui.value).prop('checked', true); 
                            quest=itemsProposed[pointer];
                      }
                });
                                
                    jq(".legendSld label").on("click", function(){
                    var lpos = jq(".legendSld label").offset().left;
                    jq(this).parent().find('label').css({'color':'#555555','font-weight':'normal'});
                    jq(this).css({'color':'#e98824','font-weight':'bold'});
                    jq("toolTipMsg:before").css("left",lpos+"px"); 
                        
                });
                jq("input[type=radio][id^='s']").hide();    
                jq("[data-toggle=tooltip]").tooltip();
                
                jq("input[name=quest]").each(function(){  
                  var quest=jq(this).val();               
                   if(quest == "1"){                
                     jq(this).next(".sliderStat1").find(".ui-slider-handle").css("left", "20%");
                     jq(this).next(".sliderStat1").find("label[for=s5]").css({'color':'#e98824', 'font-weight':'bold'});
                    }
                    else if(quest == "2"){
                     jq(this).next(".sliderStat1").find(".ui-slider-handle").css("left", "40%");
                     jq(this).next(".sliderStat1").find("label[for=s6]").css({'color':'#e98824', 'font-weight':'bold'});
                    }
                    else if(quest == "3"){                
                     jq(this).next(".sliderStat1").find(".ui-slider-handle").css("left", "60%");
                     jq(this).next(".sliderStat1").find("label[for=s7]").css({'color':'#e98824', 'font-weight':'bold'});
                    }
                    else if(quest == "4"){                
                     jq(this).next(".sliderStat1").find(".ui-slider-handle").css("left", "80%");
                     jq(this).next(".sliderStat1").find("label[for=s8]").css({'color':'#e98824', 'font-weight':'bold'});
                    }
                    else if(quest == "4"){                
                     jq(this).next(".sliderStat1").find(".ui-slider-handle").css("left", "100%");
                     jq(this).next(".sliderStat1").find("label[for=s8]").css({'color':'#e98824', 'font-weight':'bold'});
                    }
                    else{
                    jq(this).next(".sliderStat1").find(".ui-slider-handle").css("left", "0%");
                     jq(this).next(".sliderStat1").find("label[for=s4]").css({'color':'#e98824', 'font-weight':'bold'});
                    }
                    
                    });             
                
                }, 1000);
                }
                function delQuestion(str) {  
                    jq('#ipmDeleteModal').modal({show:true, keyboard: false, backdrop:'static'});
                    jq('#ipmDeleteModal .modal-title').html("Remove Question");
                    jq('#ipmDeleteModal .confirmMsg').html('{!$Label.delete_milestone_msg}');
                    jq('#ipmDeleteModal .confirmAction').attr('value', str);
                    jq(".confirmAction").addClass("removeRiskQuestion");
                }
                jq(document).on('click', '#ipmDeleteModal .removeRiskQuestion', function(){
                    var questionId = jq(this).attr('value');
                    deleteQuestion(questionId);
                    jq("#ipmDeleteModal").modal('hide');
                });
    </script>
</apex:page>