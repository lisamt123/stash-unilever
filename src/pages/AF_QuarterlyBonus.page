<apex:page controller="AF_BonusQuarterly" showHeader="false" sidebar="false" docType="HTML-5.0">
 <style>
 th.headerRow {
text-align: center;
}
th.totalRow {
text-align: center;
}

 body .pbBody table.list tr th {
 background:#61A631;
 color: #FFFFFF;font-size: 16px;
font-weight: bold;
}
body .pbBody table.list tr td {
    background: none repeat scroll 0 0 #D3e6b8 !important;
    color: black !important;
    text-align: center;
}

 .submit_btn1{
background: none repeat scroll 0 0 #E400A7 !important;
border: 1px solid red!important;
border-radius: 5px !important;
color: #FFFFFF!important;
font-size: 14px!important;
height: 30px;
margin-top: 13px;
padding-bottom: 0;
padding-top: 0;
width: 100px;
/* margin-left: 966px !important; */
float: left;
margin-right: 5px!important;
 }
  .submit_btn2{
background: none repeat scroll 0 0 #E400A7 !important;
border: 1px solid red!important;
border-radius: 5px !important;
color: #FFFFFF!important;
font-size: 14px!important;
height: 30px;
margin-top: 13px;
padding-bottom: 0px;
padding-top: 0px;
width: 100px;
/* margin-left: 10px !important; */
float: left;
margin-right: 10px !important;
 }
 
 body .pbBody table.list tr.headerRow td, body .pbBody table.list tr.headerRow th{
background: #f2f3f3;
border-width: 0 0 1px 1px;
border-color: #e0e3e5;
color: #000;
font-size: 16px!important;
font-weight: bold;
padding: 5px 2px 4px 5px;
}
.list .headerRow th {
    white-space:normal!important;
}
.values1 {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 2px solid #74AE00;
    border-radius: 5px;
    color: #000000;
    font-size: 16px;
    height: 30px;
    margin-top: 10px;
    padding: 2px 0 0 5px;
    text-align: center;
    width: 120px !important;
}

.heading_main{
    margin-left: 0;
    margin-right: 0;
    margin-top: 0;
    padding-bottom:5px;
    padding-left: 0;
    padding-right: 0;
    width: 100%;
    }
.heading_text{
    color: black;
    font-size: 20px;
    margin-right: 20px;
    padding: 7px 1px 8px 8px;
}

body .pbBody table.list tr.headerRow td, body .pbBody table.list tr.headerRow th {
 background:#61A631;
 color: #FFFFFF;font-size: 16px;
font-weight: bold;
 }
 
body .bPageBlock {
    background: #F8F8F8 !important;
    border:none!important;

</style>
 <style>
    #salesFroceSource_StatusBox
    {
      top:230px !important;
    }
    </style>
 <script>
 
  function isNumberKey(evt)
       {
          var charCode = (evt.which) ? evt.which : event.keyCode;
          var result = false;
          var errorMsg = document.getElementById("regTitle");
         
          if ( charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57 ) && charCode != 45)
          {
             errorMsg.innerHTML = "<b>Please use numerical characters only.</b>";
             result = false;
          }
          else
          {
           errorMsg.innerHTML = "";
           result = true;         
          }             
          return result;
       }
 
  function emptybox(id)
     {
       var temp=document.getElementById(id).value;https://unilever--agfeescog--c.cs14.visual.force.com/s.gif
       var errorMsg = document.getElementById("regTitle");
       
       if(temp==null||temp==''){
         errorMsg.innerHTML = "<b>Please enter</b>";
         return false;
       }else{
         return true;
       }
     }
 </script>
 <apex:message />
 
  <div class="row">           
        <div class="col-lg-12 charttable1">         
            <apex:image url="{!$Resource.header_new}" style="width:100%;height:37px;" />            
        </div>          
    </div>
 <div class="heading_main">
       <h1 class="heading_text"> Enter Quantitative Results </h1>
      </div>
      
 <apex:pageMessages id="pmsg" >
 </apex:pageMessages>
 <apex:pageBlock id="pg1" rendered="{!showmainblock}">

 
 <apex:form id="frm">
 <apex:outputPanel >
 <div style="display:block; margin-bottom:10px;margin-bottom:5px; font-weight:bold;">
Please select Quarter below:
</div>
 <apex:outputLabel value="Quarter" for="Quarter" style="font-size:16px; font-weight:bold; display:inline-block; margin-bottom:20px;margin-right:7px; "  />
          <apex:selectList id="chooseColor"  size="1"  value="{!Quarterinfo}">
            <apex:selectOption itemValue="Q1" itemLabel="Q1" />
            <apex:selectOption itemValue="Q2" itemLabel="Q2"/>
            <apex:selectOption itemValue="Q3" itemLabel="Q3"/>
            <!--<apex:selectOption itemValue="Q4" itemLabel="Q4"/>-->
            <apex:actionsupport event="onchange" rerender="pbt,Trad_Digi,buttons,pmsg" action="{!CallBonusQuarterly}"/>
          </apex:selectList> 
 </apex:outputpanel>
<div style="clear:both;"></div>
<div style="font-size: 16px;font-weight: bold;float:left;">Bonusable Fees </div>

 <apex:outputPanel id="Trad_Digi">
  <div style="font-size: 16px;margin-left: 248px;font-weight:bold;">
     <!--   <apex:inputCheckbox value="{!isDigital}" Title="Digital" disabled="true"/> -->
      <span style="margin-left: 4px;">Digital 
        <span style="margin-left: 61px;">&euro;</span>
        <apex:outputText value="{0,number,###,###,###}"  >
        <apex:param value="{!Totals_BonusMeasureDigital}"/>
       </apex:outputText>
       
        </span> <br/>
  </div>
  <div style="font-size: 16px; margin-left: 248px;font-weight:bold;">
         <!-- <apex:inputCheckbox value="{!isTraditional}" title="Traditional" disabled="true"/>  -->
          <span style="margin-left: 2px;">Traditional
           <span style="margin-left: 30px;">&euro;</span>
         <apex:outputText value="{0,number,###,###,###}">
          <apex:param value="{!Totals_BonusMeasureTrad}"/>
       </apex:outputText>
       
        </span> 
  </div>
 
 </apex:outputPanel>
  


 <!--<div style="font-size: 16px;font-weight: bold;margin-bottom:10px;margin-top:15px;"> {!Bonus_Measure}</div>-->
  <div style="font-size: 16px;">
 
 <apex:pageblockTable value="{!QuartelyBonus}" var="QB" id="pbt" style="width:100%">
 <apex:column headerValue="Bonus Measure" style="width:115px!important;">
  <apex:outputText value="{!QB.Bonus_Threshold_Measure}"/>
 </apex:column>
 <apex:column headerValue="Country" style="width:115px!important;">
  <apex:outputText value="{!QB.Countryname}"/>
  <apex:facet name="footer">
    <apex:outputText value="Total"/>
  </apex:facet>
 </apex:column>
 <apex:column headerValue="Bonusable Fee (€)" style="width:50px!important;">
    <apex:outputText value="{0,number,###,###,###}" rendered="{!If(AND(NOT(QB.bonusResObj.AF_Locked__c),QB.countryCount==1),'true',false)}">
          <apex:param value="{!QB.total_bonus_fees}"/>
       </apex:outputText>
    <apex:inputText value="{!QB.total_bonus_fees}" rendered="{!IF(AND(QB.countryCount>1,NOT(QB.bonusResObj.AF_Locked__c)),'true','false')}">
    <apex:actionSupport event="onchange"  action="{!Calculate_Bonus}" reRender="bonusval1,bonusper1,bonus1,bonus2,totals,totalbonus,bonusper,bonusval,sumofbonusbase" >
    </apex:actionSupport>
 </apex:inputText>
    <apex:outputText value="{0,number,###,###,###}" rendered="{!If(QB.bonusResObj.AF_Locked__c,'true',false)}">
          <apex:param value="{!QB.bonusResObj.AF_Bonusable_Fees__c}"/>
       </apex:outputText>
        <apex:facet name="footer">
   <apex:outputText value="{0,number,###,###,###}" id="sumofbonusbase">
    <apex:param value="{!sum_of_bonus_basefee}"/>
     </apex:outputText>
     
   </apex:facet>
 </apex:column>
 <apex:column headerValue="Minimum (5%)" style="width:50px!important;">
  <apex:outputText value="{!QB.Minimum_bonus}"/>
 </apex:column>
 <apex:column headerValue="Stretching (10%)" style="width:50px!important;">
  <apex:outputText value="{!QB.Streching_bonus}"/>
 </apex:column>
 <apex:column headerValue="Outstanding (15%)" style="width:50px!important;">
  <apex:outputText value="{!QB.Outstanding_bonus}"/>
 </apex:column>
 
 <apex:column headerValue="Quant Result" rendered="{!IsEditable}" id="c1" style="width:50px!important;" >
 <!--<apex:facet name="footer">
    <apex:outputText value="Total Bonus Value"/>
  </apex:facet>-->
 <apex:outputPanel >
  <apex:outputField value="{!QB.bonusResObj.AF_Quant__c}"  id="txtquant1" rendered="{!AND(IsEditable,QB.bonusResObj.AF_Locked__c)}"/>
  <apex:inputfield value="{!QB.bonusResObj.AF_Quant__c}" onFocus="javascript:this.maxLength=4;"  id="txtquant" onkeypress="return isNumberKey(event)"  rendered="{!AND(IsEditable,NOT(QB.bonusResObj.AF_Locked__c),NOT(ISNULL(QB.total_bonus_fees)))}" style="text-align: center;width:60px;">
  <div style="font-family:arial;color:red;font-size:14px;text-align:center" id="regTitle"></div>
 <apex:actionSupport event="onchange" action="{!Calculate_Bonus}" reRender="bonusval1,bonusper1,bonus1,bonus2,totals,totalbonus,bonusper,bonusval,sumofbonusbase" >
 
 </apex:actionSupport>
 
  </apex:inputfield>
  </apex:outputPanel>
 </apex:column>
 
 <apex:column headerValue="Bonus (%)" style="width:50px!important;">
 <apex:facet name="footer">
   <apex:outputText value="{0,number,###,###,###}" id="bonusper1">
    <apex:param value="{!sum_of_bonus_per}" id="bonusper"/>
     </apex:outputText>
   </apex:facet>
 <apex:outputPanel id="bonus2">
  <apex:outputText value="{!QB.bonusResObj.AF_Quant_Bonus__c}"/>
  </apex:outputPanel>
 </apex:column>
 
 <apex:column headerValue="Bonus Value (€)" style="width:50px!important;">
 <apex:facet name="footer">
 <apex:outputText value="{0,number,###,###,###}" id="bonusval1">
          <apex:param value="{!sum_of_bonus_val}" id="bonusval"/>
       </apex:outputText>
  </apex:facet>
 <apex:outputpanel id="bonus1">
 <apex:outputText value="{0,number,###,###,###}">
  <apex:param value="{!QB.bonusResObj.AF_Quant_Bonus_Value__c}"/>
  </apex:outputText>
  </apex:outputpanel>
 </apex:column>
 <apex:column headerValue="Comment" style="width:50px!important;">
    <apex:outputtext value="{!QB.bonusResObj.AF_Comment__c}" title="{!QB.bonusResObj.AF_Comment__c}"  rendered="{!AND(IsEditable,QB.bonusResObj.AF_Locked__c)}" style="
   white-space: nowrap; width:100px; overflow: hidden; text-overflow: ellipsis; float:left; display:block"/>
    <apex:inputfield value="{!QB.bonusResObj.AF_Comment__c}"  rendered="{!AND(IsEditable,NOT(QB.bonusResObj.AF_Locked__c))}" style="text-align: center;width:150px;"/>
 </apex:column>
 
  
 </apex:pageblockTable>
 
 </div>
  <!--   <apex:outputPanel id="totals" >
        <div style="float: left;
    font-size: 16px;
    margin-left: 780px;
    margin-top: 25px;"> Total Bonus Value </div>
         <span style=" border: 2px solid #74AE00;
    border-radius: 5px;
    float: left;
    font-size: 16px;
    height: 20px;
    margin-left: 12px;
    margin-top: 20px;
    padding: 5px;
    text-align: center;
    width: 108px;"><apex:outputText id="totalbonus" value="{!sum_of_bonus_val}"/></span>
         <span style="border: 2px solid #74AE00;
    border-radius: 5px;
    float: left;
    font-size: 16px;
    height: 20px;
    margin-left: 25px;
    margin-top: 20px;
    padding: 5px;
    text-align: center;
    width: 107px;"><apex:outputText id="totalbonusper" value="{!sum_of_bonus_per}" /></span>
     </apex:outputPanel><br/>-->
 <br/>
 <div style="font-size:16px; float: left;"> Note: On Submit, these records will be locked. Please contact to CMCO Super User to unlock. </div>
 <br/> <br/>
 <apex:outputPanel rendered="{!IsEditable}" id="buttons">
 <apex:outputPanel rendered="{!isNoRecord}">
 <div id="Savebutton">
 <apex:commandButton id="UpdateBonus"  action="{!UpdateBonus}" Value="Save" reRender="pbt,pmsg" styleClass="submit_btn1" rendered="{!!IsLocked}"  status="status"/>
 </div>
 <apex:commandButton id="Confirm" action="{!ConfirmBonus}" value="Submit" reRender="pbt,pmsg" styleClass="submit_btn2" rendered="{!!IsLocked}" />
</apex:outputPanel>
</apex:outputPanel>


<apex:ActionStatus id="status" >
        <apex:facet name="start">
            <c:AF_Spinner BackColor="#efefef" borderColor="#efefef" borderSize="3" height="50px" width="180px" Message="Please wait" messageStyle="color:Darkred;font-size:10pt;font-family:arial;font-weight:bold;" ImageUrl="/img/loading.gif"/>
        </apex:facet>
        </apex:ActionStatus>
 </apex:form>
 
 </apex:pageBlock>
  <script>
  function calldisable(){
          
            document.getElementById('Savebutton').style.visibility = "hidden";
           
  }
  </script>
</apex:page>