<!-- 
*************************************************
*@Description: To Display Gate Document Sections
*@Author: Cognizant
*@Created Date: 13/05/2015
*************************************************
-->
<apex:page controller="IPM_GateDocumentController" sidebar="false" standardStylesheets="false" cache="false" extensions="IPM_GetHelpDoc">
<apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_Filter.css')}"/>
    <apex:composition template="IPM_TemplateRevamp"> 
        <apex:define name="body">
        <apex:stylesheet value="{!URLFOR($Resource.IPM_Resource, 'css/IPM_GateDocument.css')}"/>            
            <apex:form >
                <div class='cust-overlay'></div> 
                <apex:pageMessages />
                    <div class="gradientbg">  
                            <c:IPM_ProjectDetails project="{!project}" activeItem="gateDocument" />  
                    </div>
                
                <!-- - Ship to PLE Modal starts here------ -->
                <div id="shipToPLE" class="modal fade">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <div class="modal-title">{!$label.IPM_Confirm}</div>
                            </div>
                            <div class="modal-body">
                                <div class="container-fluid">
                                    <div class="row">    
                                        <div class="col-sm-12">
                                            <span class="tradeDesc">{!$label.IPM_Move_To_PLE_Details}</span>
                                        </div>
                                        <div class="tradeButtonContainer txtAlignright pull-right">
                                            <apex:outputPanel id="cancelPLEId">
                                                <div class="buttonMarginRight noPadright pull-left" >
                                                    <input type="button" data-dismiss="modal" class="ipmButton" value="Cancel" />
                                                </div> 
                                            </apex:outputPanel>
                                            <div class="pull-left noPadright">
                                                <apex:actionStatus startText="" id="confLoading" startStyleClass="proInit"/>
                                                <input type="button" onclick="movePLE();" class="ipmButton primary" value="Confirm" />
                                            </div> 
                                        </div>
                                    </div>  
                                </div>          
                            </div>
                        </div>
                    </div>
                </div>
                <!-- - Ship to PLE Modal ends here------ -->
                
                <div class="ipmContent">                                   
                    <!-- Page Head & Toolbar -->
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="panel-group pageHeadToolbar clearfix">
                                <div class="row">
                                    <div class="col-sm-6 pull-left noPadright headerLeft">
                                        <h2 class="pageTitle">
                                            {!projectDoc.IPM_GateDocuments__c} {!$Label.IPM_Document}
                                        </h2>
                                        <div class="SecFillProgress">
                                            <div class="fillProgress"><apex:outputText Value="{!IF(bDocStatusNotStartedOrApproved,filledInPer,project.IPM_FilledIn_Percentage__c)}"></apex:outputText><span>%</span></div>
                                            <div class="fillProgressTxt"> {!$Label.IPM_FILLED_IN}</div>
                                        </div>
                                        <div class="SecFillProgress olderDocLink" modalTitle="Older Gate Documents" data-toggle="modal" data-target="#ipmModal" value="{!$Page.IPM_GateDocAttchList}?id={!project.Id}" data-backdrop="static" data-keyboard="false" title="{!$Label.IPM_VIEW_OLDER_GATE_DOC}">
                                            {!$Label.IPM_VIEW_OLDER_GATE_DOC}
                                        </div>
                                    </div>
                                    <div class="col-sm-6 pull-right clearfix noPadleft noPadright headerRight">  
                                        <div class="SecButtonSet pull-right">
                                                <a class="icoButton history" data-toggle="modal" data-target="#ipmModal" value="{!$Page.IPM_ProjectDocumentSectionHistory}?Id={!project.Id}" data-backdrop="static" data-keyboard="false" title="View Update History" id="showHistory"></a>
                                                <!-- CR0434 -->
                                                <apex:commandLink action="{!exportToPdf}" styleClass="icoButton download" title="{!$Label.IPM_Download_with_Appendix}" rendered="{!isPDFDownload}">
                                                    <apex:param name="withAppendix" AssignTo="{!isWithAppendix}" Value="True"/>
                                                </apex:commandLink>
                                                <apex:commandLink action="{!exportToPdf}" styleClass="icoButton download-gate" title="{!$Label.IPM_Download_without_Appendix}" rendered="{!isDisplayWithoutAppendix}">
                                                    <apex:param name="withOutAppendix" AssignTo="{!isWithAppendix}" Value="False"/>
                                                </apex:commandLink>  
                                                <!-- CR0434 end here-->   
                                                
                                                <!-- To place the help symbol in the top right hand corner of page -->
                                                <apex:outputPanel styleClass="SecButtonSet delete pull-right" >
                                                    <apex:outputLink value="{!URL}" id="theLink" styleClass="icoButton question" target="_blank" title="{!$Label.IPM_Help}">?</apex:outputLink>
                                                </apex:outputPanel>
                                                
                                        </div>
                                        
                                        <!---New Requirement Approve with Edits----->
                                            <!-- Below panel will get render when job status of project is either "Eligible for processing" or "Processing"  -->                                    
                                            <apex:outputPanel layout="block" styleClass="SecButtonSet pull-right" rendered="{! OR(project.IPM_Project_Job_Status__c == 'Eligible For Processing',project.IPM_Project_Job_Status__c == 'Processing') }" >
                                                <div class="SecCurrentStatus pull-right"> 
                                                    
                                                    <span class="status">
                                                        <img alt="Idea"  src="{!URLFOR($Resource.IPM_Resource, 'images/Inprogress.svg')}" />
                                                        {!$Label.IPM_PHASECHAGE_INPROGRESS}
                                                    </span>
                                                </div>
                                            </apex:outputPanel>
                                            <!-- Below panel will get render when job status of project is neither "Eligible for processing" nor "Processing"  -->
                                            <apex:outputPanel layout="block" styleClass="SecButtonSet pull-right" rendered="{! AND(project.IPM_Project_Job_Status__c != 'Eligible For Processing',project.IPM_Project_Job_Status__c != 'Processing') }" >
                                            
                                                <apex:outputPanel layout="block" styleClass="SecButtonSet pull-right" rendered="{!projectDoc.IPM_Document_Status__c='Approved with Edits'}">
                                                    
                                                    <apex:actionStatus startText="" id="Loading" startStyleClass="proInit"/>
                                                    <div class="SecStatusUpdate removebutton statusButton pull-right" data-toggle="modal" data-target="#ipmMoveFeasibility"  data-backdrop="static" data-keyboard="false">
                                                        <span class="ipmButton Primary">{!$Label.IPM_MOVE_TO} {!IF(project.IPM_Phase__c= 'Ideas','Feasibility',IF(project.IPM_Phase__c='Feasibility','Capability',(IF(project.IPM_Phase__c='Capability','Market Ready','Market Deployment'))))}</span>   
                                                    </div>      
                                                </apex:outputPanel>
                                                
                                                <!---New Requirement Approve with Edits Ends----->
                                                <!-- Below panel get rendered when project document status is different from "Approved", "Approved with Edits" and "Not Started " -->
                                                <apex:outputPanel rendered="{!IF(AND(projectDoc.IPM_Document_Status__c!='Approved' && projectDoc.IPM_Document_Status__c!='Approved with Edits' && projectDoc.IPM_Document_Status__c!='Not Started' && IsUpdateStatus=true),True,False)}">
                                                    <div class="SecStatusUpdate statusButton pull-right openModal" modalTitle="Change current document status" data-toggle="modal" data-target="#ipmModal" value="{!$Page.IPM_ChangeCurrenDocumentStatus}?id={!project.Id}" data-backdrop="static" data-keyboard="false" title="{!$Label.IPM_UPDATE_STATUS}">
                                                        <input type="button" class="ipmButton" value="Change status"/>
                                                    </div>
                                                </apex:outputPanel>
                                            
                                            
                                                 <!---Design Idea:GateDocument Refactor Starts Here---->
                                                <apex:actionFunction name="fetchSection" action="{!getDynamicSection}" reRender="sectionContent" status="refreshCat" oncomplete="resetPanel();">
                                                    <apex:param name="secId" assignTo="{!parentSectionId}" value=""/>
                                                    <apex:param name="projDocSecId" assignTo="{!sectionId}" value=""/>
                                                 </apex:actionFunction>
                                                 
                                                 <apex:actionFunction name="fetchSubSection" action="{!getProjectSubSections}" reRender="subSection" status="refreshCat" oncomplete="resetPanelSub()">
                                                   <apex:param name="psecId" assignTo="{!parentSectionId}" value=""/>
                                                   <apex:param name="projDocSecId" assignTo="{!sectionId}" value=""/>
                                                 </apex:actionFunction>
                                                <apex:actionFunction name="fetchAttachment" action="{!showAttchSection}" reRender="attSection" status="refreshCat" oncomplete="dirApp()">
                                                        <apex:param name="projDocSecId" assignTo="{!sectionId}" value=""/>
                                                 </apex:actionFunction> 
                                             <!---Design Idea:GateDocument Refactor Ends Here---->
                                                     
                                            <!-- below panel renders when one of followings criteria meets -->
                                            <!-- 1. Project Document Status is "Approved", Phase is "Market Deployment" and span is "Local" -->
                                            <!-- 2. Project phase is "Market Ready" and project type is "Operational" -->         
                                            <apex:outputPanel rendered="{!IF(OR(AND(projectDoc.IPM_Document_Status__c='Approved'&& project.IPM_Phase__c='Market Deployment' && project.IPMProject_Span__c='Local'), AND (project.IPM_Phase__c='Market Ready' && project.IPM_Project_Type__c = 'Operational')),True,False)}">
                                                
                                                <div class="SecStatusUpdate dstatusButton shipTrade" data-toggle="modal" data-target="#shipToPLE"  data-backdrop="static" data-keyboard="false">
                                                    <input type="button" class="ipmButton" value="{!$Label.IPM_Ship_To_Trade_Button}" />
                                                </div>
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!projectDoc.IPM_Document_Status__c != $Label.IPM_APPROVED_WITH_EDITS}">
                                                <div class="SecCurrentStatus pull-right">
                                                    {!$Label.IPM_CURRENT_DOCUMENT_STATUS}<span class="{!IF(projectDoc.IPM_Document_Status__c='Not Started','greyFont','')}{!IF(projectDoc.IPM_Document_Status__c='Stopped','stopped','')} {!IF(OR(projectDoc.IPM_Document_Status__c='In Progress',projectDoc.IPM_Document_Status__c='Proposed',projectDoc.IPM_Document_Status__c='Postponed'),'status','')} {!IF(OR(projectDoc.IPM_Document_Status__c='Approved',projectDoc.IPM_Document_Status__c='Approved with Edits'),'completed','')}">{!projectDoc.IPM_Document_Status__c}</span>
                                                </div>
                                            </apex:outputPanel>
                                       </apex:outputPanel>                                
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--/ Page Head & Toolbar -->
                    
                    <!-- Page Content -->
                    <div class="row">
                        <div class="col-sm-12">
                            <div class="panel-group pageContent clearfix"> 
                                
                              
                                    <apex:actionStatus id="TypeDocs" startText="" startStyleClass="initFilter"></apex:actionStatus>
                                    <apex:actionStatus startText="" id="customStatus" startStyleClass="cust-overlay"/> 
                                
                                
                                <div class="col-sm-2 leftFilterBlock pull-left leftSideBar noPadleft">                    
                                    <div class="panel">
                                        <h4 class="gateFilterTitle">{!$Label.IPM_FILTERS}</h4>
                                           
                                            <apex:actionFunction name="movePLE" action="{!moveToPLE}" reRender="" oncomplete="shiptrade();"/>
                                            <apex:outputPanel layout="block" id="count" styleClass="gdFilterSection">
                                                <apex:actionStatus startText="{!$Label.IPM_CLICK_ON_APPLY_FILTER}" id="counterStatus" startStyleClass="gdFilter"/>
                                                <div class="expandTool">
                                                    <span class="filter expandAll">{!$Label.IPM_EXPAND_ALL}</span><span class="filter collapseAll">{!$Label.IPM_COLLAPSE_ALL}</span>
                                                </div>  
                                                <div class="ipmButtonGroup">
                                                    
                                                    <input type="button" class="ipmButton resetFilterBtn" value="Reset" id="resetFilterBtn" onClick="resetDocFilters();"/>
                                                    <input type="button" class="ipmButton primary" value="Apply" onClick="applyFilter();" />
                                                </div>
                                                <apex:actionFunction name="setFilterValues" action="{!setFilter}" reRender="MainTable,count,filterBlock" status="customStatus" oncomplete="setFiltersAsPrevious();filterBlock();resetPanelSub();">
                                                    
                                                    <apex:param name="type" assignTo="{!typeFilters}" value=""></apex:param>
                                                    <apex:param name="status" assignTo="{!statusFilters}" value=""></apex:param>
                                                    <apex:param name="role" assignTo="{!roleFilters}" value=""></apex:param>
                                                </apex:actionFunction>                                            
                                                <apex:actionFunction name="Reset"  id="resetFilterBtn" action="{!ResetFilters}" reRender="count" status="counterStatus"/>
                                                <div class="ipmAccordion">
                                                    <span class="pHead h4">
                                                        <span class='expico fa fa-minus'></span>
                                                        <apex:outputText styleClass="" value="Type"/> 
                                                    </span>
                                                    <span class="filter ipmAcrdnExpand">
                                                        <ul class="docFilter gdFilterType">  
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="All" class="checkAll" id="typeAll" />
                                                                        <label for="typeAll"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_ALL}</div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_NON_NEGOTIABLE}" class="checkSub NonNegotiable" id="typeNonNegotiable" />
                                                                        <label for="typeNonNegotiable"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_NON_NEGOTIABLE} <apex:outputPanel styleClass="proNumbers"> ({!NonNegotiableCount})</apex:outputPanel></div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_OPTIONAL}" class="checkSub Optional" id="typeOptional" />
                                                                        <label for="typeOptional"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_OPTIONAL} <apex:outputPanel styleClass="proNumbers"> ({!OptionalCount})</apex:outputPanel></div>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </span>
                                                    <span class="pHead h4">
                                                        <span class='expico fa fa-minus'></span>
                                                        <apex:outputText styleClass="" value="Status"/>
                                                    </span>
                                                    <span class="filter ipmAcrdnExpand">
                                                        <ul class="docFilter gdFilterStatus"> 
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_ALL}" class="checkAll" title="{!$Label.IPM_ALL}" id="statusAll" />
                                                                        <label for="statusAll"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_ALL}</div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_NOT_STARTED}" class="checkSub NotStarted" title="{!$Label.IPM_NOT_STARTED}" id="statusNotStarted"/>
                                                                        <label for="statusNotStarted"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_NOT_STARTED} <apex:outputPanel styleClass="proNumbers"> ({!NotstartedCount})</apex:outputPanel></div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_FILLED_IN}" class="checkSub filled-in" title="{!$Label.IPM_FILLED_IN}" id="statusFilledIn"/>
                                                                        <label for="statusFilledIn"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_FILLED_IN} <apex:outputPanel styleClass="proNumbers"> ({!FilledinCount})</apex:outputPanel></div>
                                                                </div>
                                                            </li>
                                                            
                                                        </ul>
                                                    </span>
                                                    <span class="pHead h4">
                                                        <span class='expico fa fa-minus'></span>
                                                        <apex:outputText styleClass="" value="Functional Role"/> 
                                                    </span>
                                                    <span class="filter ipmAcrdnExpand">
                                                        <ul class="docFilter gdFilterFunRole"> 
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_ALL}" class="checkAll" title="{!$Label.IPM_ALL}" id="FRAll" />
                                                                        <label for="FRAll"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_ALL}</div>
                                                                </div>
                                                            </li>
                                                             <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_PL}" class="checkSub pl" id="FRpl" />
                                                                        <label for="FRpl"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_PL}<apex:outputPanel styleClass="proNumbers"> ({!PLCount})</apex:outputPanel></div>
                                                                </div>
                                                            </li> 
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_BD}" title="BD" class="checkSub bd" id="FRBd" />
                                                                        <label for="FRBd"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_BD} <apex:outputPanel styleClass="proNumbers"> ({!BDCount})</apex:outputPanel></div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_CMI}" class="checkSub cmi" id="FRCmi" />
                                                                        <label for="FRCmi"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_CMI} <apex:outputPanel styleClass="proNumbers"> ({!CMICount})</apex:outputPanel></div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_CD}" class="checkSub cd" id="FRCd" />
                                                                        <label for="FRCd"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_CD} <apex:outputPanel styleClass="proNumbers"> ({!CDCount})</apex:outputPanel></div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_R_AMP_D}" class="checkSub rnd" id="FRrnd" title="{!$Label.IPM_R_AMP_D}" />
                                                                        <label for="FRrnd"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_R_AMP_D}<apex:outputPanel styleClass="proNumbers"> ({!RnDCount})</apex:outputPanel></div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_SC}" class="checkSub sc" title="{!$Label.IPM_SC}" id="FRsc" />
                                                                        <label for="FRsc"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_SC} <apex:outputPanel styleClass="proNumbers"> ({!SCCount})</apex:outputPanel></div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_FINANCE}" title="{!$Label.IPM_FINANCE}" class="checkSub fc" id="FRfc" />
                                                                        <label for="FRfc"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_FINANCE} <apex:outputPanel styleClass="proNumbers"> ({!FinanceCount})</apex:outputPanel></div>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="row ipmCheckboxDiv">
                                                                    <div class="ipmCheckbox">
                                                                        <input type="checkbox" value="{!$Label.IPM_BB}" class="checkSub bb" id="FRbb" />
                                                                        <label for="FRbb"></label>
                                                                    </div>
                                                                    <div class="checkboxLabel">{!$Label.IPM_BB} <apex:outputPanel styleClass="proNumbers"> ({!BBCount})</apex:outputPanel></div>
                                                                </div>
                                                            </li> 
                                                            
                                                             
                                                            
                                                        </ul>
                                                    </span>
                                                </div>          
                                            </apex:outputPanel>                                            
                                       
                                    </div>
                                </div>
                                <div class="col-sm-10 rightContentBlock pull-right tempWrapper noPadleft noPadright">                                   
                                    <div class="row secDisMsg clearfix">
                                        <apex:outputPanel layout="block" rendered="{!IF(AND(projectDoc.IPM_Document_Status__c!='Approved',isReadable=false),true,false)}">
                                            <div class="col-sm-2 pull-left openModal" data-toggle="modal" data-target="#ipmModal" value="{!$Page.IPM_AddManageSections}?id={!project.Id}&DocType={!projectDoc.IPM_GateDocuments__c}" data-backdrop="static" data-keyboard="false" title="{!$Label.IPM_Add_Manage_Sections}" modalTitle="{!$Label.IPM_Add_Manage_Sections}">
                                                <input type="button" class="ipmButton" value="{!$Label.IPM_Add_Manage_Sections}"/>
                                            </div>
                                        </apex:outputPanel> 
                                        <!-- below panel is rendered when project document status is either "Mot Started" or "In Progress" and  dueDate is within 4 days from today --> 
                                        <apex:outputPanel styleClass="messageBox infoMsg" layout="block" rendered="{!if(AND(OR(projectDoc.IPM_Document_Status__c='Not Started',projectDoc.IPM_Document_Status__c='In Progress'),dueDateMsg=true),true,false)}"> 
                                        <apex:outputPanel layout="block" styleClass="SecButtonSet">                                     
                                           <a class="icoButton info" title="info"></a><span class="msgTxt">{!gateDocument} {!$Label.IPM_Gate_Due_Date_Is} {!dueDate}</span>
                                                <span class="closeMessage fa fa-times"></span>
                                        </apex:outputPanel>  
                                        </apex:outputPanel>            
                                        <!-- below panel is rendered when project document status is either "Postponed" or "Approved" -->           
                                        <apex:outputPanel layout="block"  rendered="{!If(OR(projectDoc.IPM_Document_Status__c='Postponed',projectDoc.IPM_Document_Status__c='Approved'),True,False)}">
                                            <div class="col-sm-12">
                                                <div class="StatusComment">
                                                    <div class="panel-group">                    
                                                        <div class="panelTitle">
                                                            <apex:outputText value="{!$Label.IPM_COMMENTS_FOR_GATE_MEETING}" />
                                                        </div>
                                                        <!-- below panel is rendered when project document status is "Approved" and approval date is there -->
                                                        <apex:outputPanel layout="block"  styleClass="clearfix panelRow" rendered="{!If(AND(projectDoc.IPM_Document_Status__c='Approved',projectDoc.IPM_Approval_Date__c!=null),True,False)}">
                                                            
                                                            <div class="row">
                                                                <div class="col-sm-1 commentImage">
                                                                    <apex:image url="{!projectDoc.IPM_Updated_User_By__r.smallphotoUrl}" id="plImage1" styleClass="circular ipmImage"  />  
                                                                    
                                                                </div>
                                                                <div class="col-sm-11 commentPanel">
                                                                    <div class="row clearfix marginbottom">
                                                                        <div class="col-sm-8 innerHead">
                                                                            <span class="user"><apex:outputText value="{!projectDoc.IPM_Updated_User_By__r.Name}"/></span>
                                                                            <apex:outputText value="{!projectDoc.IPM_Document_Status__c}"/>
                                                                            <span class="status-date">On </span>
                                                                            <apex:outputfield value="{!projectDoc.IPM_Approval_Date__c}"/>
                                                                        </div>
                                                                        <div class="col-sm-4 txtRight updateStatus">                                   
                                                                            
                                                                        </div>
                                                                    </div>
                                                                    
                                                                </div>                    
                                                            </div>
                                                            <div class="greyline clearfix">
                                                                <div>
                                                                    <apex:outputText value="{!projectDoc.IPM_Approved_Comments__c}"/>
                                                                </div>
                                                            </div>
                                                            
                                                        </apex:outputPanel>
                                                        <!-- below panel is rendered when project document status is "Postponed" and postpone date is there-->
                                                        <apex:outputPanel layout="block" styleClass="clearfix panelRow" rendered="{!If(OR(projectDoc.IPM_Document_Status__c='Postponed',projectDoc.IPM_Postponement_Date__c!=null),True,False)}">
                                                            
                                                            <div class="row">
                                                                <div class="col-sm-1">
                                                                    <apex:image url="{!projectDoc.LastmodifiedBy.smallphotoUrl}" id="plImage" styleClass="circular ipmImage"  /> 
                                                                    
                                                                </div>
                                                                <div class="col-sm-11 commentPanel">
                                                                    <div class="row clearfix marginbottom">
                                                                        <div class="col-sm-8 innerHead">
                                                                            <span class="user">
                                                                                <apex:outputText value="{!projectDoc.LastModifiedBy.Name}"/> </span> 
                                                                            <span class="action-txt"><apex:outputText value="{!IF(OR(projectDoc.IPM_Document_Status__c='Approved',projectDoc.IPM_Postponement_Date__c!=null),'Postponed',projectDoc.IPM_Document_Status__c)}"/>
                                                                            </span>
                                                                            <span class="status-date">On </span>
                                                                            <apex:outputfield value="{!projectDoc.IPM_Postponement_Date__c}"/>
                                                                            
                                                                        </div>
                                                                        <div class="col-sm-4 txtRight updateStatus">                                
                                                                        </div>
                                                                    </div>
                                                                    
                                                                </div>                    
                                                            </div>
                                                            <div class="greyline clearfix">
                                                                <div>
                                                                    <apex:outputText value="{!projectDoc.IPM_Postponed_Comments__c}"/>
                                                                </div>
                                                            </div> 
                                                            
                                                        </apex:outputPanel>                     
                                                    </div>
                                                </div>
                                            </div>
                                        </apex:outputPanel>   
                                        
                                    </div>
                                    <!---- Gate Document Main Body----->
                                    <apex:outputPanel layout="block" styleClass="row">
                                     <div class="contenWrapper clearfix">
                                     <apex:actionStatus startText="" id="refreshCat" startStyleClass="gdInit"/>
                                        <div class="col-sm-12">                                           
                                                <apex:outputPanel layout="block" styleClass="ipmAccordian mainTable" id="MainTable">
                                                    <apex:repeat value="{!projSectionList}" var="psl"> <!--For Header-->                                 
                                                        <apex:outputPanel layout="block" styleClass="aHead" rendered="{!psl.IPM_Section__c!=null}" >
                                                            <span class='expico fa fa-minus' id="{!psl.IPM_Section__c}" onclick="fetchSection('{!psl.IPM_Section__c}','{!psl.Id}');"></span>
                                                            <apex:outputText value="{!psl.IPM_Section__r.IPM_Section_Sequence__c} {!psl.IPM_Section__r.IPM_Section_Name__c}" rendered="{!if(psl.IPM_Section__r.IPM_Section_Sequence__c!='8',true,false)}"/>
                                                            <apex:outputText value="{!psl.IPM_Section__r.IPM_Section_Name__c}" rendered="{!if(psl.IPM_Section__r.IPM_Section_Sequence__c=='8',true,false)}"/>
                                                            <span class="rHead pull-right">  
                                                                <apex:outputPanel rendered="{! if(psl.IPM_Section__r.IPM_Section_Sequence__c='1','true','false')}">
                                                                    {!IntroNegotiable} {!$Label.IPM_NON_NEGOTIABLE} | 
                                                                    {!IntroOptional} {!$Label.IPM_OPTIONAL}
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{! if(psl.IPM_Section__r.IPM_Section_Sequence__c='2','true','false')}">
                                                                    {!ExterNegotiable} {!$Label.IPM_NON_NEGOTIABLE} | 
                                                                    {!ExterOptional} {!$Label.IPM_OPTIONAL}
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{! if(psl.IPM_Section__r.IPM_Section_Sequence__c='3','true','false')}">
                                                                    {!MixNegotiable} {!$Label.IPM_NON_NEGOTIABLE} | 
                                                                    {!MixOptional} {!$Label.IPM_OPTIONAL}
                                                                </apex:outputPanel> 
                                                                <apex:outputPanel rendered="{! if(psl.IPM_Section__r.IPM_Section_Sequence__c='4','true','false')}">
                                                                    {!DeploNegotiable} {!$Label.IPM_NON_NEGOTIABLE} | 
                                                                    {!DeploOptional} {!$Label.IPM_OPTIONAL}
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{! if(psl.IPM_Section__r.IPM_Section_Sequence__c='5','true','false')}">
                                                                    {!TechNegotiable} {!$Label.IPM_NON_NEGOTIABLE} | 
                                                                    {!TechOptional} {!$Label.IPM_OPTIONAL}
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{! if(psl.IPM_Section__r.IPM_Section_Sequence__c='6','true','false')}">
                                                                    {!FinNegotiable} {!$Label.IPM_NON_NEGOTIABLE} | 
                                                                    {!FinOptional} {!$Label.IPM_OPTIONAL}
                                                                    
                                                                </apex:outputPanel>
                                                                <apex:outputPanel rendered="{! if(psl.IPM_Section__r.IPM_Section_Sequence__c='7','true','false')}">
                                                                    {!ProMNegotiable} Non-negotiable | 
                                                                    {!ProMOptional} Optional
                                                                </apex:outputPanel>
                                                            </span>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel styleClass="ipmAcrdnExpand" layout="block">
                                                        <apex:outputPanel id="sectionContent" layout="block">
                                                            <apex:repeat value="{!projSubSectionList}" var="sub">   
                                                            	<!-- below panel is rendered when header sections id is same as sub header section id and default section is true --> 
                                                                <apex:outputPanel layout="block" styleClass="aHead" rendered="{!IF (AND(psl.IPM_Section__r.Id=sub.IPM_Section__r.IPM_Parent_Section__c,sub.IPM_Default_Section__c=true),True,False)}">    
                                                                
                                                                 <span class='expico fa fa-minus' id="{!sub.IPM_Section__c}" onclick="fetchSubSection('{!sub.IPM_Section__c}','{!sub.Id}');"> </span>
                                                                    
                                                                    <apex:outputPanel rendered="{!IF(sub.IPM_Section__r.IPM_Section_Type__c!='Sub Header',True,False)}">
                                                                        <apex:outputPanel rendered="{!IF(sub.IPM_Section__r.IPM_Parent_Section__r.IPM_Section_Name__c=='Appendix',True,False)}">
                                                                            <a> {!sub.IPM_Section__r.IPM_Section_Name__c} [{!sub.IPM_FunctionalRole__c}]</a>
                                                                            
                                                                        </apex:outputPanel>
                                                                        <apex:outputPanel rendered="{!IF(sub.IPM_Section__r.IPM_Parent_Section__r.IPM_Section_Name__c!='Appendix',True,False)}">
                                                                           <a href="{!$Page.IPM_ProjectDocumentSectionEditor}?Id={!project.Id}&projDocSecId={!sub.Id}">{!sub.IPM_Section_Sequence__c} {!sub.IPM_Section__r.IPM_Section_Name__c} [{!sub.IPM_FunctionalRole__c}]</a>  <span class="{!sub.IPM_Section_Status__c}"> {!sub.IPM_Section_Status__c}</span> 
                                                                        </apex:outputPanel>
                                                                       <apex:outputPanel styleClass="SecButtonSet pull-right">                                 
                                                                            <a class="icoButton comments" data-toggle="modal" data-target="#ipmModal" value="{!$Page.IPM_CommentsPage}?id={!sub.Id}" data-backdrop="static" data-keyboard="false" title="{!sub.IPM_Section__r.IPM_Section_Sequence__c} {!sub.IPM_Section__r.IPM_Section_Name__c} Comments" id="{!sub.Id}"><apex:outputPanel styleClass="count" rendered="{!IF(sub.IPM_Count_of_Comments__c!=null && sub.IPM_Count_of_Comments__c >0 ,True,False)}">{!sub.IPM_Count_of_Comments__c}</apex:outputPanel></a>
                                                                            <!-- below panel will render when section is not child section of section 8 -->
                                                                            <apex:outputPanel rendered="{!IF(AND(isEditLinkActive,NOT(contains(sub.IPM_Section__r.IPM_Section_Sequence__c,'8.'))),True,False)}">
                                                                                <a class="icoButton details" href="{!$Page.IPM_ProjectDocumentSectionEditor}?Id={!project.Id}&projDocSecId={!sub.Id}" title="Details"></a>  
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel> 
                                                                    </apex:outputPanel>
                                                                    <apex:outputPanel rendered="{!IF(sub.IPM_Section__r.IPM_Section_Type__c='Sub Header',True,False)}"> 
                                                                        {!sub.IPM_Section_Sequence__c} {!sub.IPM_Section__r.IPM_Section_Name__c} <span class="{!sub.IPM_Section_Status__c}"> {!sub.IPM_Section_Status__c} </span>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel> 
                                                                <!-- below panel is rendered when header sections id is same as sub header section id and default section is true --> 
                                                                <apex:outputPanel styleClass="ipmAcrdnExpand" rendered="{!IF(psl.IPM_Section__r.Id=sub.IPM_Section__r.IPM_Parent_Section__c,True,False)}">                              
                                                                    <apex:outputPanel id="subSection" layout="block">
                                                                    <apex:repeat value="{!projSubLevelSectionList}" var="sub1">                                
                                                                    <!-- below panel renders when sub header section id is same as parent section id of sub sub header  -->                             
                                                                        <apex:outputPanel layout="block" styleClass="aHead" rendered="{!IF(AND(sub.IPM_Section__r.Id=sub1.IPM_Section__r.IPM_Parent_Section__c,sub1.IPM_Default_Section__c=true),True,False)}">
                                                                            <span class='expico fa fa-minus' id="{!sub1.IPM_Section__c}" onclick="fetchAttachment('{!sub1.Id}');"></span>                                      
                                                                            <a href="{!$Page.IPM_ProjectDocumentSectionEditor}?Id={!project.Id}&projDocSecId={!sub1.Id}"> {!sub1.IPM_Section_Sequence__c}  {!sub1.IPM_Section__r.IPM_Section_Name__c} [{!sub1.IPM_FunctionalRole__c}] </a> <span class="{!sub1.IPM_Section_Status__c}"> {!sub1.IPM_Section_Status__c}</span>                                   
                                                                            
                                                                            <apex:outputPanel styleClass="SecButtonSet pull-right">                                 
                                                                                <a class="icoButton comments" data-toggle="modal" data-target="#ipmModal" value="{!$Page.IPM_CommentsPage}?id={!sub1.Id}" data-backdrop="static" data-keyboard="false" title="{!sub1.IPM_Section__r.IPM_Section_Sequence__c} {!sub1.IPM_Section__r.IPM_Section_Name__c} Comments" id="{!sub1.Id}"><apex:outputPanel styleClass="count" rendered="{!IF(sub1.IPM_Count_of_Comments__c!=null && sub1.IPM_Count_of_Comments__c >0 ,True,False)}">{!sub1.IPM_Count_of_Comments__c}</apex:outputPanel></a>
                                                                                <apex:outputPanel rendered="{!IF(AND(isEditLinkActive),True,False)}">
                                                                                    <a class="icoButton details" href="{!$Page.IPM_ProjectDocumentSectionEditor}?Id={!project.Id}&projDocSecId={!sub1.Id}" title="Details"></a> 
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>                  
                                                                        </apex:outputPanel> 
                                                                        <apex:outputPanel layout="block" styleClass="ipmAcrdnExpand" rendered="{!IF(sub.IPM_Section__r.Id=sub1.IPM_Section__r.IPM_Parent_Section__c,True,False)}">
                                                                            <!--Special 2nd Level Section-->
                                                                             <c:IPM_TradeMark_QuestionsView rendered="{!if(sub1.IPM_Master_Section_External_Id__c=='Trademarks',true,false)}"  gateDocType="{!projectDoc.IPM_GateDocuments__c}"> </c:IPM_TradeMark_QuestionsView>    
                                                                             <!-- below component will render when child od sub header section master external id is "CUs n Complexity" and project span is "Regional" or "Local" and phase is "Ideas" -->
                                                                             <c:IPM_CU_Complexity gateType="{!projectDoc.IPM_GateDocuments__c}" getSectionId="{!sub1.Id}" proModel="{project.IPM_GateKeeping_Model__c}" ProSpan="{project.IPMProject_Span__c}" phaseName="{!project.IPM_Phase__c}"  isEdit="false" rendered="{!AND(sub1.IPM_Master_Section_External_Id__c='CU_And_Complexity',OR(project.IPMProject_Span__c='Regional',project.IPMProject_Span__c='Local',project.IPM_Phase__c='Ideas',project.IPM_Project_Type__c='Operational'))}"></c:IPM_CU_Complexity>
                                                                             <c:IPM_CU_Complexity_Consolidated getGateType="{!projectDoc.IPM_GateDocuments__c}" isGateDoc="true" getProjId="{!project.Id}" rendered="{!AND(project.IPMProject_Span__c='Global',sub1.IPM_Master_Section_External_Id__c='CU_And_Complexity')}" /> 
                                                                             <!--Special 2nd Level Section End-->
                                                                            <apex:outputField value="{!sub1.IPM_Gate_Document_Summary__c }" rendered="{!IF(sub.IPM_Section__r.Id=sub1.IPM_Section__r.IPM_Parent_Section__c,True,False)}" />
                                                                             <!---Attachment For Sections--->
                                                                             <apex:outputPanel id="attSection">
                                                                                <apex:outputPanel layout="block" styleClass="appBlock" rendered="{!if(OR(showAttach,sub1.IPM_Has_Appendix__c),true,false)}"> 
                                                                                  <apex:outputPanel rendered="{!sub1.IPM_Has_Appendix__c}">{!$Label.IPM_GD_APPENDIX_MSG}<span data-dir="{!sub1.IPM_Master_Section_External_Id__c}" class="appText">{!sub1.IPM_Section__r.IPM_Section_Name__c}</span></apex:outputPanel>
                                                                                   <!-- <apex:outputPanel rendered="{!sub1.IPM_Has_Appendix__c}" html-data-dir="{!sub1.IPM_Master_Section_External_Id__c}" styleClass="appText">{!$Label.IPM_GD_APPENDIX_MSG} {!sub1.IPM_Section__r.IPM_Section_Name__c}</apex:outputPanel>-->
                                                                                    <apex:outputText rendered="{!showAttach}" value="See Attachments:"></apex:outputText>
                                                                                     <apex:repeat value="{!attachmentList}" var="attach" rendered="{!showAttach}">
                                                                                        <apex:outputLink styleClass="fileName" value="/servlet/servlet.FileDownload?file={!attach.Id}" target="_blank">{!attach.Name}</apex:outputLink> 
                                                                                    </apex:repeat>                                                                                
                                                                                </apex:outputPanel>
                                                                            </apex:outputPanel>
                                                                             <!---Attachment For Sections Ends Here--->
                                                                            
                                                                            <apex:outputPanel layout="block" styleClass="lastUpdate">
                                                                                <apex:outputText value="Last Update: {!sub1.IPM_GateHistory__c} on " rendered="{!IF(sub1.IPM_GateHistory__c!=NULL,True,False)}" ></apex:outputText>
                                                                                <apex:outputField value="{!sub1.IPM_GateHistory_Date__c}" rendered="{!IF(sub1.IPM_GateHistory_Date__c!=NULL,True,False)}" /> 
                                                                            </apex:outputPanel>
                                                                        </apex:outputPanel>
                                                                    </apex:repeat> 
                                                                    
                                                                    <!-- Special 1st Level Sections-->
                                                                    <c:IPM_GlobalFinancialActionStandards gate="{!projectDoc.IPM_GateDocuments__c}" isEditable="false" projId="{!projectId}" secId="{!sub.Id}" rendered="{!AND(sub.IPM_Master_Section_External_Id__c='Business_Case_Action_Standards',project.IPMProject_Span__c='Global',project.IPM_Project_Type__c='Original',OR(project.IPM_Phase__c='Ideas',projectDoc.IPM_GateDocuments__c='Charter'))}"></c:IPM_GlobalFinancialActionStandards>
                                                                    <c:IPM_Financial_Action_Standards_Inverse gate="{!projectDoc.IPM_GateDocuments__c}" isEditable="false" projId="{!projectId}" secId="{!sub.Id}" rendered="{!AND(sub.IPM_Master_Section_External_Id__c='Business_Case_Action_Standards',projectDoc.IPM_GateDocuments__c!='Market Deployment',OR(project.IPMProject_Span__c='Regional',AND(project.IPMProject_Span__c='Local',project.IPM_Project_Type__c='Operational'),AND(project.IPMProject_Span__c='Global',project.IPM_Project_Type__c='Operational'),AND(project.IPMProject_Span__c='Global',projectDoc.IPM_GateDocuments__c!='Charter')))}" > </c:IPM_Financial_Action_Standards_Inverse>
                                                                    <!-- below component renders while it meet one of the criteria -->
                                                                    <!-- 1. sub header section master section external id is "Initial_Estimate_of_Opportunity" -->
                                                                    <!-- 2. sub header section master section external id is "Business_Case_Action_Standards" and project type is "Rollout" and project span is "Local"-->
                                                                    <c:IPM_FinGate projId="{!projectId}" rendered="{!OR(sub.IPM_Master_Section_External_Id__c='Initial_Estimate_of_Opportunity',AND(project.IPM_Project_Type__c=='Rollout',project.IPMProject_Span__c=='Local',sub.IPM_Master_Section_External_Id__c='Business_Case_Action_Standards'))}" ></c:IPM_FinGate>
                                                                    <c:IPM_GateKeeperListView setEdit="false" getDocType="{!projectDoc.IPM_GateDocuments__c}" rendered="{!sub.IPM_Master_Section_External_Id__c='Gate_Keeper_Checklist'}"></c:IPM_GateKeeperListView>
                                                                    <c:IPM_OTIFStatusTableView otfType="Table" getSectionId="{!sub.Id}" rendered="{!sub.IPM_Master_Section_External_Id__c='OTIF_Status'}"></c:IPM_OTIFStatusTableView>
                                                                    <c:IPM_RND_QuestionsView rendered="{!if(OR(sub.IPM_Master_Section_External_Id__c=='R&D_Initial_Outline_Product_Pack',sub.IPM_Master_Section_External_Id__c=='R&D_Technical_Readiness'),true,false)}" gateDocType="{!projectDoc.IPM_GateDocuments__c}" RNDEdit="False"></c:IPM_RND_QuestionsView>
                                                                    <c:IPM_SC_Feasibility_QuestionsView rendered="{!if(OR(sub.IPM_Master_Section_External_Id__c=='Supply_Chain_Feasibility',sub.IPM_Master_Section_External_Id__c=='Supply_Chain_Technical_Readiness'),true,false)}" gateDocType="{!projectDoc.IPM_GateDocuments__c}"></c:IPM_SC_Feasibility_QuestionsView>
                                                                    <c:IPM_RND_Feasibility_QuestionsView rendered="{!if(sub.IPM_Master_Section_External_Id__c=='R&D_Feasibility',true,false)}" RNDEdit="False" gateDocType="{!projectDoc.IPM_GateDocuments__c}"> </c:IPM_RND_Feasibility_QuestionsView>    
                                                                   
                                                                    <apex:outputField value="{!sub.IPM_Gate_Document_Summary__c }" rendered="{!IF(AND(sub.IPM_Section__r.IPM_Section_Type__c!='Header',sub.IPM_Section__r.IPM_Section_Type__c!='Sub Header'),True,False)}"/>
                                                                     
                                                                      <apex:outputPanel layout="block" styleClass="appBlock" rendered="{!if(OR(showAttach,sub.IPM_Has_Appendix__c),true,false)}"> 
                                                                          <apex:outputPanel rendered="{!sub.IPM_Has_Appendix__c}">{!$Label.IPM_GD_APPENDIX_MSG}<span data-dir="{!sub.IPM_Master_Section_External_Id__c}" class="appText">{!sub.IPM_Section__r.IPM_Section_Name__c}</span></apex:outputPanel>
                                                                            <apex:outputText rendered="{!showAttach}" value="See Attachments:"></apex:outputText>
                                                                            <apex:repeat value="{!attachmentList}" var="atth" rendered="{!showAttach}">
                                                                               <apex:outputLink styleClass="fileName" value="/servlet/servlet.FileDownload?file={!atth.Id}" target="_blank">{!atth.Name}</apex:outputLink> 
                                                                             </apex:repeat> 
                                                                      </apex:outputPanel>
                                                                      
                                                                    <apex:outputPanel layout="block" styleClass="lastUpdate">
                                                                        <apex:outputText value="Last Update: {!sub.IPM_GateHistory__c} on " rendered="{!IF(sub.IPM_GateHistory__c!=NULL,True,False)}" ></apex:outputText>        
                                                                        <apex:outputField value=" {!sub.IPM_GateHistory_Date__c}" rendered="{!IF(sub.IPM_GateHistory_Date__c!=NULL,True,False)}" />
                                                                    </apex:outputPanel>
                                                                    
                                                                </apex:outputPanel>   
                                                                </apex:outputPanel>                                                             
                                                            </apex:repeat> 
                                                          </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    </apex:repeat>
                                                </apex:outputPanel>                                               
                                        </div>
                                   
                                   <!-- Appendix New Logic here -->                                  
                                        <div class="col-sm-12">                                           
                                                <apex:outputPanel styleClass="ipmAccordian appendix" id="AppTable">
                                                     <!--For Header-->                                 
                                                        <apex:outputPanel styleClass="aHead" >
                                                            <span class='expico fa fa-minus' onclick="fetchAppendixSections();"></span>
                                                            <apex:outputText value="Appendix"/>
                                                        </apex:outputPanel>
                                                        <apex:outputPanel styleClass="ipmAcrdnExpand">
                                                             <apex:outputPanel layout="block" id="appSections">                         
                                                            <apex:repeat value="{!projDocAppdxSectionList}" var="apxSec" >
                                                            
                                                                <apex:outputPanel styleClass="aHead" >    
                                                                
                                                                 <span class='expico fa fa-minus'> </span>
                                                                     <a> {!apxSec.IPM_Section_Name__c} [{!apxSec.IPM_FunctionalRole__c}]</a>
                                                                                                     
                                                                </apex:outputPanel>
                                                                <apex:outputPanel styleClass="ipmAcrdnExpand {!apxSec.IPM_Master_Section_External_Id__c}">
                                                                
                                                                <c:IPM_FinInitialEstOfOppCharter projId="{!projectId}" rendered="{!apxSec.IPM_Master_Section_External_Id__c='Initial_Estimate_of_Opportunity'}"></c:IPM_FinInitialEstOfOppCharter>
                                                                <c:IPM_Consumer_Evidence gate="{!projectDoc.IPM_GateDocuments__c}" getProjectId="{!projectId}" Editable="false" getSecid="{!apxSec.Id}" rendered="{!apxSec.IPM_Master_Section_External_Id__c='Consumer_Evidence_Concept'}"></c:IPM_Consumer_Evidence>
                                                                <c:IPM_EcoDesignSection displayOnlyTables="true" getSectionId="{!apxSec.Id}"  rendered="{!apxSec.IPM_Master_Section_External_Id__c=='Environmental_Impact'}" />
                                                                <c:IPM_Customer_Channels gdpage="true" getProjectID="{!projectId}" getSecid="{!apxSec.Id}" CCEdit="false" rendered="{!apxSec.IPM_Master_Section_External_Id__c='Customers_Channels'}"></c:IPM_Customer_Channels>
                                                                <c:IPM_Risk_QuestionnaireView getProjectId="{!if(AND(project.IPMProject_Span__c=='Local',project.IPM_Project_Type__c=='Rollout'),project.IPM_Parent_Project__c,projectId)}" getProjectSectionId="{!apxSec.Id}" editSection="false" gateType="{!projectDoc.IPM_GateDocuments__c}" rendered="{!apxSec.IPM_Master_Section_External_Id__c='Risk'}"></c:IPM_Risk_QuestionnaireView>
                                                                <c:IPM_Gate_RollOuts span="{!project.IPMProject_Span__c}" projId="{!projectId}" rendered="{!AND(apxSec.IPM_Master_Section_External_Id__c='Rollout_Plans',project.IPM_Project_Type__c!='Operational')}"></c:IPM_Gate_RollOuts>
                                                                <c:IPM_MilestoneList_PDF pId="{!projectId}" gateDocType="{!projectDoc.IPM_GateDocuments__c}" gateDocStatus="{!projectDoc.IPM_Document_Status__c}" rendered="{!apxSec.IPM_Master_Section_External_Id__c='Milestones'}"></c:IPM_MilestoneList_PDF>
                                                                <c:IPM_Country_Feedback rendered="{!apxSec.IPM_Master_Section_External_Id__c='Country_Feedback_Requirements'}" > </c:IPM_Country_Feedback>
                                                                <c:IPM_CMIGateSection secId="{!apxSec.Id}" projId="{!projectId}"  gate="{!projectDoc.IPM_GateDocuments__c}"  rendered="{!apxSec.IPM_Master_Section_External_Id__c='Mix_Qualification_Plan_and_Action_Standards'}"></c:IPM_CMIGateSection>
                                                                <c:IPM_Assumptions projId="{!projectId}" gateType="{!projectDoc.IPM_GateDocuments__c}" getSectionId="{!apxSec.Id}" rendered="{!if(apxSec.IPM_Master_Section_External_Id__c=='Assumptions',true,false)}" isEditable="false"></c:IPM_Assumptions>
                                                                <c:IPM_BCC_Consolidate gateType="{!projectDoc.IPM_GateDocuments__c}" projSpan="{!project.IPMProject_Span__c}" projectId="{!project.Id}" rendered="{!apxSec.IPM_Master_Section_External_Id__c=='BD/BB_Alignment'}"></c:IPM_BCC_Consolidate>
                                                                <c:IPM_ViewAssortmentStrategy ProSecID="{!apxSec.Id}" rendered="{!apxSec.IPM_Master_Section_External_Id__c=='Assortment_Strategy'}"></c:IPM_ViewAssortmentStrategy>
                                                                <c:IPM_MarketPerformance projId="{!projectId}" isEditable="false" rendered="{!AND(apxSec.IPM_Master_Section_External_Id__c=='Monitoring_Performance_in_Market' && apxSec.IPM_Section_Sequence__c =='6.5' && project.IPMProject_Span__c='Regional' && project.IPM_Project_Type__c!='Operational')}" ></c:IPM_MarketPerformance>
                                                                <c:IPM_PerformanceBreakdown isAppendix="true" isEditable="false" projId="{!projectId}" rendered="{!AND(apxSec.IPM_Master_Section_External_Id__c=='Monitoring_Performance_in_Market',apxSec.IPM_Section_Sequence__c =='6.5' && project.IPMProject_Span__c='Local' && project.IPM_Project_Type__c!='Operational')}"></c:IPM_PerformanceBreakdown> 
                                                               </apex:outputPanel>
                                                            </apex:repeat>
                                                             </apex:outputPanel>
                                                        </apex:outputPanel>
                                                    
                                                    <apex:actionFunction name="getAppSections" action="{!getAppendixSections}" status="refreshCat" reRender="appSections" oncomplete="resetPanel()"></apex:actionFunction>
                                                </apex:outputPanel>
                                        </div>
                                    </div>
                                    </apex:outputPanel>
                                   <!-- Appendic new Logic ends -->                                                     
                                </div>
                            </div>                    
                        </div> 
                    </div>            
                    <!--/ Page Content -->
                        
                        <!--   MOve to Next Phase Modal Pop-up Section starts here --------->
                        <div id="ipmMoveFeasibility" class="modal fade ipmMoveFeasibility">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <div class="modal-title">{!$Label.IPM_UPDATE_PRO_PHASE_CONFIRMATION}</div>
                                    </div>
                                    
                                    <div class="modal-body">
                                        <div class="container-fluid">
                                            <div class="row">    
                                                <div class="col-sm-12">
                                                    <span class="skipDesc">{!$Label.IPM_READY_TO_MOVE_TO} {!IF(project.IPM_Phase__c='Ideas','Feasibility',IF(project.IPM_Phase__c='Feasibility','Capability',(IF(project.IPM_Phase__c='Capability','Market Ready','Market Deployment'))))} {!$Label.IPM_Gate_Phase1} {!gateDocument} {!$Label.IPM_Gate_Phase2} {!IF(project.IPM_Phase__c='Ideas','Feasibility',IF(project.IPM_Phase__c='Feasibility','Capability',(IF(project.IPM_Phase__c='Capability','Market Ready','Market Deployment'))))}.</span>
                                                </div>
                                                
                                                <div class="skipButtoncontainer txtAlignright pull-right">
                                                    <apex:outputPanel id="SkipBossC">
                                                        <div class="buttonMarginRight noPadright pull-left" >
                                                            <input type="button" data-dismiss="modal" class="ipmButton" value="Go back" />
                                                        </div> 
                                                    </apex:outputPanel>
                                                    <div class="pull-left noPadright"> 
                                                        <apex:commandButton action="{!moveToNextDocument}" status="Loading" value="Move to {!IF(project.IPM_Phase__c='Ideas','Feasibility',IF(project.IPM_Phase__c='Feasibility','Capability',(IF(project.IPM_Phase__c='Capability','Market Ready','Market Deployment'))))}" oncomplete="window.top.location.href='{!$Page.IPM_ProjectOverview}?id={!project.Id}&suggestedMembersButton=true&createBET=true'" styleClass="ipmButton primary" rendered="{!project.IPM_Phase__c='Ideas'}">
                                                            <apex:param name="approveDocumentStatus" value="Approved" assignTo="{!projectDoc.IPM_Document_Status__c}"/>
                                                        </apex:commandButton>
                                                        <apex:commandButton action="{!moveToNextDocument}" status="Loading" value="Move to {!IF(project.IPM_Phase__c='Ideas','Feasibility',IF(project.IPM_Phase__c='Feasibility','Capability',(IF(project.IPM_Phase__c='Capability','Market Ready','Market Deployment'))))}" oncomplete="window.top.location.href='{!$Page.IPM_ProjectOverview}?id={!project.Id}'" styleClass="ipmButton primary" rendered="{!project.IPM_Phase__c!='Ideas'}">
                                                            <apex:param name="approveDocumentStatus" value="Approved" assignTo="{!projectDoc.IPM_Document_Status__c}"/>
                                                        </apex:commandButton>
                                                    </div> 
                                                </div>
                                            </div>  
                                        </div>          
                                    </div>
                                </div>  
                            </div>
                        </div>  
                        <!--   MOve to Next Phase Modal Pop-up Section ends here --------->
                        
                        <div id="ipmModalDiv">
                        <c:IPM_Modal />
                    </div>
                    <apex:outputPanel id="filterBlock">
                        <script>
                        var IPMApp = {NonNegotiableCount:'{!NonNegotiableCount}', OptionalCount:'{!OptionalCount}', NotstartedCount:'{!NotstartedCount}', FilledinCount:'{!FilledinCount}', BDCount:'{!BDCount}', CMICount:'{!CMICount}', CDCount:'{!CDCount}', RnDCount:'{!RnDCount}', SCCount:'{!SCCount}', FinanceCount:'{!FinanceCount}', BBCount:'{!BBCount}', typeFilters:'{!typeFilters}', statusFilters:'{!statusFilters}', roleFilters:'{!roleFilters}', proDoc:'{!JSENCODE(projectDoc.IPM_Document_Status__c)}', projectId:'{!project.Id}', approved:'{!$Label.IPM_GD_APPROVED}', proposed:'{!$Label.IPM_GD_PROPOSED}', GateDocPageRef:'{!$Page.IPM_GateDocument}', printDoc:'{!projectDoc.IPM_GateDocuments__c}', OverviewPageRef: '{!$Page.IPM_ProjectOverview}'};                 
                        </script>
                    </apex:outputPanel> 
                </div>
                <apex:includeScript value="{!URLFOR($Resource.IPM_Resource, 'js/IPM_functions.js')}" loadOnReady="true"/>
                <apex:includeScript value="{!URLFOR($Resource.IPM_Resource, 'js/IPM_GateDocument.js')}" loadOnReady="true" />
            </apex:form>
        </apex:define>        
    </apex:composition>  
</apex:page>