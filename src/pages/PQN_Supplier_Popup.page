<apex:page showHeader="false" Controller="PQN_Supplier_Popup_Ctlr" readOnly="true">
    <script language="javascript">
        window.onload = new function() 
        { 
          // bring popup window to front
          window.focus(); 
          var ele=document.getElementById('{!$Component.form.block.section.query}');
          if (ele)
          {
             ele.focus();
          }
        }
   </script>
   <script language="javascript">
       function fillSupplier(Name,Supplier_Number__c,Supplier_Type__c)
       {
           
          var winMain=window.opener;
          if (null==winMain)
          {
             winMain=window.parent.opener;
          }
          var ele=winMain.document.getElementById('{!$CurrentPage.parameters.Supplier_Name}');
          ele.value=Name;
          var ele=winMain.document.getElementById('{!$CurrentPage.parameters.Supplier_No}');
          ele.value=Supplier_Number__c;
          var ele=winMain.document.getElementById('{!$CurrentPage.parameters.Supplier_Type}');
          ele.value=Supplier_Type__c;
          CloseWindow();
       }

    </script>
    
    <script language="javascript">
       function fillProduct(Product_Name__c,SKU__c,Product_Group__c,Product_Category__c)
       {
           
          var winMain=window.opener;
          if (null==winMain)
          {
             winMain=window.parent.opener;
          }
          var ele=winMain.document.getElementById('{!$CurrentPage.parameters.Product_Name}');
          ele.value=Product_Name__c;
          var ele=winMain.document.getElementById('{!$CurrentPage.parameters.Product_No}');
          ele.value=SKU__c;
          var ele=winMain.document.getElementById('{!$CurrentPage.parameters.Product_Group}');
          ele.value=Product_Group__c;
          var ele=winMain.document.getElementById('{!$CurrentPage.parameters.Product_Category}');
          ele.value=Product_Category__c;
          CloseWindow();
       }

    </script>
    <script language="javascript">
       function CloseWindow()
       {
          var winMain=window.opener;
          if (null==winMain)
          {
             winMain=window.parent.opener;
          }
          winMain.closeSupplierPopup();
       }
    </script>

    <style>
        input[type="text"],select,textarea {
            //display: block;
            width: 80%;
            padding: 3px 9px;
            font-size: 14px;
            line-height: 1.42857143;
            color: #555;
            background-color: #fff;
            background-image: none;
            border: 1px solid #ccc;
            border-radius: 4px;
            transition: border-color ease-in-out .15s,box-shadow ease-in-out .15s;
        }
        
    </style>

  <apex:messages />
  <apex:form id="form" >  
        
     <div style="width 100%">
        <apex:pageBlock title="Suppliers" id="block">
             <apex:pageBlockSection columns="3" id="section">
              Enter search text and click Go
              <apex:inputText value="{!query}" id="query"/>
              <apex:commandButton value="Go" action="{!runQuery}"/><br/>
          </apex:pageBlockSection>
        </apex:pageBlock>

          <apex:pageBlock >
          <apex:pageBlockSection columns="1">
              <apex:pageBlockTable value="{!xSuppliers}" var="sup" rendered="{!If(objectName=='supplier' ,'true','false')}">
                <apex:column headerValue="Supplier Name">
                 <apex:outputLink value="#" onclick="fillSupplier('{!sup.Name}','{!sup.Supplier_Number__c}','{!sup.Supplier_Type__c}')">{!sup.Name}</apex:outputLink>     
                </apex:column>
                <apex:column headerValue="Supplier Number" value="{!sup.Supplier_Number__c}"/>
                <apex:column headerValue="Supplier Type" value="{!sup.Supplier_Type__c}"/>
              </apex:pageBlockTable>
              
              <apex:pageBlockTable value="{!xProducts}" var="sup" rendered="{!If(objectName=='product' ,'true','false')}">
                <apex:column headerValue="Product Name">
                 <apex:outputLink value="#" onclick="fillProduct('{!sup.Product_Name__c}','{!sup.SKU__c}','{!sup.Product_Group__c}','{!sup.Product_Category__c}')">{!sup.Product_Name__c}</apex:outputLink>     
                </apex:column>
                <apex:column headerValue="Product Number" value="{!sup.SKU__c}"/>
                <apex:column headerValue="Product Type" value="{!sup.Product_Group__c}"/>
                <apex:column headerValue="Product Type" value="{!sup.Product_Category__c}"/>
              </apex:pageBlockTable>
              
          </apex:pageBlockSection>
        </apex:pageBlock>
        <button type="button" onclick="CloseWindow();">Close Window</button>
     </div>
   </apex:form>
</apex:page>