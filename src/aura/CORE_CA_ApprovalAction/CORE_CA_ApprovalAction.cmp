<aura:component controller="Core_CA_ApprovalsController" implements="force:appHostable">
    <!--<ltng:require styles="/resource/Lightning_designing_style/css/salesforce-lightning-design-system.min.css,/resource/Feedback/styles/style.css,/resource/CORE_CA_ApprovalsLightning,/resource/Lightning_designing_style" afterScriptsLoaded="{!c.doInit}"/> -->
    <aura:attribute name="success_toast" type="boolean" default="false"></aura:attribute>
    <aura:attribute name="faliure_toast" type="boolean" default="false"></aura:attribute>
    <aura:attribute name="comment_mand" type="boolean" default="false"></aura:attribute>
    <aura:attribute name="isVisible" type="boolean" default="false"></aura:attribute>
    <aura:attribute name="Appname" type="string"></aura:attribute>
    <aura:attribute name="Pagename" type="string"></aura:attribute>
    <aura:attribute name="message" type="string"></aura:attribute>
    
        
    <aura:attribute name="ApprovalDetail" type="Core_CA_WrapperUtility.RequestDetailResponseAribaGTES[]"/>
    <aura:attribute name="sourcePage" type="string"/>
    <aura:attribute name="filterValue" type="string"/>
    <aura:attribute name="actionTaken" type="string"/>
    <aura:attribute name="myBool" type="Boolean"/>
    <!-- Winter'17 fix start-->
    <aura:attribute name="isRequired" type="Boolean"/>
    <aura:attribute name="showspinner" type="boolean"/>
    <!-- Winter'17 fix end-->
    
    <style>
       body{
        	font: 100%/1.5 "Salesforce Sans",Arial,sans-serif !important;
        }
        ::-webkit-input-placeholder {
        	color: #A8B8D0;
        }
        .slds-checkbox--toggle [type=checkbox]:checked+.slds-checkbox--faux:after, .slds-checkbox--toggle [type=checkbox]:checked~.slds-checkbox--faux:after {
        content:"" !important;
        }
        :-moz-placeholder { /* Firefox 18- */
        	color: #A8B8D0;  
        }
        
        ::-moz-placeholder {  /* Firefox 19+ */
        	color: #CFDA8B8D07E6;  
        }
        
        :-ms-input-placeholder {  
        	color: #A8B8D0;  
        }       
        @media screen and (min-width:768px){
        .Action_container {
        top: 39% !important;
        left: 10% !important;
        right: 10% !important;
        }
        }
    </style>
 
    <div class="close-button" onclick="{!c.onCancel}"><img class="image" src="/resource/Lightning_designing_style/assets/icons/utility/close.svg"></img></div>    
    <div class="Action_container">
        <aura:if isTrue="{!v.success_toast == false}">
            <div class="slds-text-heading--medium slds-text-align--center">
                <!--{!$Label.c.CORE_LBL_APPREJ_CONFIRM}-->
                <aura:if isTrue="{!v.actionTaken == 'Approve'}">{!$Label.c.CORE_LBL_APPREJ_APPR_BTN}</aura:if>
                <aura:if isTrue="{!v.actionTaken == 'Reject'}">{!$Label.c.CORE_LBL_APPREJ_REJC_BTN}</aura:if>
                <aura:if isTrue="{!v.actionTaken == 'Rework'}">{!$Label.c.CORE_LBL_REWORK}</aura:if>
                <aura:if isTrue="{!v.actionTaken == 'RTAP'}">{!$Label.c.CORE_LBL_RETURN_TO_AP}</aura:if>
                <aura:if isTrue="{!v.actionTaken == 'QWV'}">{!$Label.c.CORE_LBL_QUERY_WITH_VENDOR_SMALL}</aura:if>
            </div>    
            <hr></hr>           
            <aura:if isTrue="{!(v.actionTaken == 'Approve' &amp;&amp; v.ApprovalDetail.RequestType =='Expense')}">
                <div style="margin-bottom: 10px;">
                <img class="img" src="/resource/CORE_CA_ApprovalsLightning/images/warning.svg"/>
                <span > {!$Label.c.CORE_LBL_APPREJ_WARN_MSG} </span> 
                </div>
                <aura:set attribute="else">       
                     <div class="feedback-comment">
                    <div class="slds-text-heading--small feedback-comment-text"></div>
                    <div class="feedback-comment-textarea">
                        <div class="slds-form-element">
                            <div class="slds-form-element__control">
                                <aura:if isTrue="{!(v.actionTaken == 'Approve' &amp;&amp; (v.ApprovalDetail.RequestType =='Expense' || v.ApprovalDetail.RequestType =='Purchase Request' || v.ApprovalDetail.RequestType=='Clarity' || v.ApprovalDetail.RequestType=='Invoice'))}">
                                    <textarea id="textarea-input-02" class="slds-textarea" placeholder="{!($Label.c.CORE_LBL_APPREJ_REQUIRED_PLACEHOLDER_MSG3)}" maxlength="255"></textarea>
                                    <aura:set attribute="else">       
                                        <textarea id="textarea-input-02" class="slds-textarea" placeholder="{!($Label.c.CORE_LBL_APPREJ_REQUIRED_PLACEHOLDER_MSG3)+'*'}" maxlength="255"></textarea>
                                    </aura:set>                                    
                                </aura:if>                                
                            </div>
                        </div>
                    </div> 
                </div>
                <aura:if isTrue="{!v.isRequired}" >
                    <span class="slds-text-body--regular Required">{!$Label.c.CORE_LBL_APPREJ_REQUIRED_VALUE_MESSAGE}</span>
                </aura:if>
                </aura:set>
            </aura:if> 
             <!--<hr></hr> -->
            <div> 
                <aura:if isTrue="{!(v.actionTaken == 'Approve' &amp;&amp; v.ApprovalDetail.RequestType =='Purchase Request')}">
                	<div class="slds-text-body--regular" style="width:75%">{!$Label.c.CORE_LBL_PUR_VISIBLE_TO_SUPPLIER} </div>
                    <div class="slds-form-element" style="margin-top: 11px;right: 2%;position: absolute;">
                        <label class="slds-checkbox--toggle slds-grid slds-grid--vertical-align-center checkbox">
                            <ui:inputCheckbox aura:id="taskCheckBox" value=""/>
                            <span class="slds-checkbox--faux chkBoxAllignment" data-check-on="" data-check-off=""></span>
                        </label>
                    </div>
                </aura:if>  
                <aura:if isTrue="{!((v.ApprovalDetail.RequestType =='Clarity' &amp;&amp; (v.actionTaken == 'Rework' ||v.actionTaken == 'Reject' ||v.actionTaken == 'Approve')) || v.ApprovalDetail.RequestType =='Expense' || v.ApprovalDetail.RequestType =='CLM')}">
                	<span class="slds-text-body--regular">{!$Label.c.CORE_LBL_APPREJ_LEGAL_DISCLAIMER}</span> 
                </aura:if>
                <aura:if isTrue="{!(v.ApprovalDetail.RequestType =='Invoice' &amp;&amp; v.actionTaken == 'RTAP')}">
                    <span class="slds-text-body--regular">{!$Label.c.CORE_LBL_INV_RETURN_TO_AP}</span>
                </aura:if>
                <aura:if isTrue="{!(v.ApprovalDetail.RequestType =='Invoice' &amp;&amp; v.actionTaken == 'QWV')}">
                    <span class="slds-text-body--regular">{!$Label.c.CORE_LBL_INV_QUERY_WITH_VENDOR}</span>
                </aura:if>
            </div>
            <hr></hr>
            <!-- Button funactionality -->
                 <div class="Action-buttons" >
                     <button class="slds-button slds-button--neutral" aria-live="assertive" onclick="{!c.onCancel}">
                         <span class="slds-text-not-selected">
                              {!$Label.c.CORE_LBL_CANCEL} 
                         </span>
                     </button>
                     
                     <span style="float:right;">
                         <span class="slds-text-not-selected">
                          <ui:button label="{!$Label.c.CORE_FB_Submit}" disabled="false" press="{!c.onSubmit}" class="slds-button--brand"/>
                             <!--<aura:if isTrue="{!v.actionTaken == 'Approve'}">{!$Label.c.CORE_LBL_APPREJ_APPR_BTN}</aura:if>
                             <aura:if isTrue="{!v.actionTaken == 'Reject'}">{!$Label.c.CORE_LBL_APPREJ_REJC_BTN}</aura:if>
                             <aura:if isTrue="{!v.actionTaken == 'Rework'}">{!$Label.c.CORE_LBL_REWORK}</aura:if>
                             <aura:if isTrue="{!v.actionTaken == 'RTAP'}">{!$Label.c.CORE_LBL_RETURN_TO_AP_CAPS}</aura:if>
                             <aura:if isTrue="{!v.actionTaken == 'QWV'}">{!$Label.c.CORE_LBL_QUERY_WITH_VENDOR}</aura:if>-->
                         </span>
                     </span>
                </div>                
        </aura:if>
    </div>  
   
    <aura:if isTrue="{!v.success_toast}">
        <div >
            <div aria-hidden="false" role="dialog" class="slds-modal slds-modal--prompt slds-fade-in-open">
                <div class="slds-modal__container slds-modal--prompt">
                    <div class="slds-box slds-theme--success success-box">
                        <p style="text-align:left;width:100%;">
                            <aura:if isTrue="{!v.actionTaken == 'Approve'}"> You have approved the request </aura:if>
                         	<aura:if isTrue="{!v.actionTaken == 'Reject'}"> You have rejected the request </aura:if>
                         	<aura:if isTrue="{!v.actionTaken == 'Rework'}"> You have sent this back for rework </aura:if>
                         	<aura:if isTrue="{!v.actionTaken == 'RTAP'}"> You have returned this to AP </aura:if>
                         	<aura:if isTrue="{!v.actionTaken == 'QWV'}"> Invoice is put on hold to clarify with vendor.</aura:if>  
                            <a href=""><img style="float:right;width:8%;" src="/resource/Lightning_designing_style/assets/icons/utility/close.svg" onclick="{!c.goToHomePage}">
                                </img></a>
                        </p>
                    </div>
                </div>
            </div>
            <div class="slds-backdrop slds-backdrop--open"></div>
        </div>
    </aura:if>
    <aura:if isTrue="{!v.faliure_toast}">
        <div >
            <div aria-hidden="false" role="dialog" class="slds-modal slds-modal--prompt slds-fade-in-open">
                <div class="slds-modal__container slds-modal--prompt">
                    <div class="slds-box slds-theme--success success-box">
                        <p style="text-align:left;width:100%;">
                             This Contract is already approved/rejected.
                         	 
                            <a href=""><img style="float:right;width:8%;" src="/resource/Lightning_designing_style/assets/icons/utility/close.svg" onclick="{!c.goToHomePage}">
                                </img></a>
                        </p>
                    </div>
                </div>
            </div>
            <div class="slds-backdrop slds-backdrop--open"></div>
        </div>
    </aura:if>
    
</aura:component>