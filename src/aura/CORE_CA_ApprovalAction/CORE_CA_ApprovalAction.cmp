<aura:component controller="Core_CA_ApprovalsController" implements="force:appHostable">
    <ltng:require styles="/resource/Lightning_designing_style/css/salesforce-lightning-design-system.min.css" />
    <ltng:require styles="/resource/Feedback/styles/style.css" />
    <ltng:require styles="/resource/ApprovalsLightning"/>
    <aura:attribute name="success_toast" type="boolean" default="false"></aura:attribute>
    <aura:attribute name="comment_mand" type="boolean" default="false"></aura:attribute>
    <aura:attribute name="isVisible" type="boolean" default="false"></aura:attribute>
    <aura:attribute name="Appname" type="string"></aura:attribute>
    <aura:attribute name="Pagename" type="string"></aura:attribute>
    <aura:attribute name="message" type="string"></aura:attribute>
    
        
    <aura:attribute name="ApprovalDetail" type="Core_CA_WrapperUtility.RequestDetailResponseAribaGTES[]"/>
    <aura:attribute name="sourcePage" type="string"/>
    <aura:attribute name="filterValue" type="string"/>
    <aura:attribute name="actionTaken" type="string"/>
    
    <style>
        
        body{
        padding:0px !important;
        background-color: rgba(128, 128, 128, 0.62);
        }
        form .stars {
        margin: 0px !important;
        }
        hr{
        margin: 1rem -15px !important;
        }
        .slds-text-heading--medium.feedback-header {
        text-align: center;
        }
        element.style {
        text-align: right;
        }
        .feedback_container{
        padding: 15px;
        font-family: Calibri;
        background-color: white;
        position: absolute;
        top: 60px;
        left: 10px;
        right: 10px;
        border-radius: 5px;
        }
        .slds-textarea {
        height: 100px;
        }
        .slds-button--neutral {
        margin-left: 10px;
        padding-left: 2rem;
        padding-right: 2rem;
        }
        .slds-button--neutral:hover, .slds-button--neutral:focus {
        background-color: #0070d2;
        color:white;
        }
        .slds-text-heading--small {
        font-size: 1.3rem;
        }
        .close-button{
        position: absolute;
        top: 37px;
        right: 10px;
        font-size: 18px;
        color: #DCDCDC;
        font-family: sans-serif;
        }
        .success-icon{
        width: 6%;
        margin-right: 13px;
        margin-top: -2px;
        }
        .slds-notify--toast {
        min-width: auto;
        }
        .errorMessage{
        font-weight: Bold;
  		font-size: 16px;
  		color: #CF5C60;
        }
    </style>
    <div class="close-button" onclick="{!c.onCancel}">X</div>
    <div class="feedback_container">
        <aura:if isTrue="{!v.success_toast == false}">
            <div class="slds-text-heading--medium feedback-header">{!$Label.c.CORE_LBL_APPREJ_CONFIRM}</div>
            <hr></hr>  
            
            <aura:if istrue="{!(v.actionTaken == 'Approve' &amp;&amp; v.ApprovalDetail.RequestType =='Expense')}">
            <img class="img" src="/resource/ApprovalsLightning/images/Return.svg"/>
            {!$Label.c.CORE_LBL_APPREJ_WARN_MSG}  
                
            <aura:set attribute="else">
                <div class="feedback-comment">
                    <div class="slds-text-heading--small feedback-comment-text"></div>
                    <div class="feedback-comment-textarea">
                        <div class="slds-form-element">
                            <div class="slds-form-element__control">
                                <aura:if isTrue="{!(v.actionTaken == 'Approve' &amp;&amp; (v.ApprovalDetail.RequestType =='Expense' || v.ApprovalDetail.RequestType =='Purchase Request' || v.ApprovalDetail.RequestType=='Clarity' || v.ApprovalDetail.RequestType=='Invoice'))}">
                                    <ui:inputtextarea aura:id="textarea-input-02" class="slds-textarea" required="{!v.actionTaken == 'Approve'}" maxlength="5" placeholder="{!($Label.c.CORE_LBL_APPREJ_REQUIRED_PLACEHOLDER_MSG3)}"></ui:inputtextarea>
                                    <aura:set attribute="else">       
                                        <ui:inputtextarea aura:id="textarea-input-02" class="slds-textarea" placeholder="{!($Label.c.CORE_LBL_APPREJ_REQUIRED_PLACEHOLDER_MSG3)+'*'}"></ui:inputtextarea>
                                    </aura:set>
                                </aura:if>                                
                            </div>
                        </div>
                    </div> 
                </div>
            </aura:set>    
            </aura:if>
            
            <br></br>
            <aura:if isTrue="{!v.comment_mand}">
                <div class="errorMessage"> {!$Label.c.CORE_LBL_APPREJ_REQUIRED_VALUE_MESSAGE}</div>            	
            </aura:if>
            <br></br>    
            <div> 
                <aura:if isTrue="{!(v.actionTaken == 'Approve' &amp;&amp; v.ApprovalDetail.RequestType =='Purchase Request')}">
                	{!$Label.c.CORE_LBL_PUR_VISIBLE_TO_SUPPLIER} &nbsp;&nbsp;&nbsp;&nbsp;
                    <aura:if isTrue="{!v.isVisible == false}"> <img style="width:10%;position: absolute;" src="/resource/ApprovalsLightning/images/false.png" onclick="{!c.isVisibleMethod}"></img> </aura:if>
                    <aura:if isTrue="{!v.isVisible}"> <img style="width:10%;position: absolute;" src="/resource/ApprovalsLightning/images/true.png" onclick="{!c.isVisibleMethod}"></img> </aura:if>
                </aura:if>  
                <aura:if isTrue="{!((v.ApprovalDetail.RequestType =='Clarity' &amp;&amp; (v.actionTaken == 'Rework' ||v.actionTaken == 'Reject' ||v.actionTaken == 'Approve')) || v.ApprovalDetail.RequestType =='Expense')}">{!$Label.c.CORE_LBL_APPREJ_LEGAL_DISCLAIMER}</aura:if>
                <aura:if isTrue="{!(v.ApprovalDetail.RequestType =='Invoice' &amp;&amp; v.actionTaken == 'RTAP')}">{!$Label.c.CORE_LBL_INV_RETURN_TO_AP}</aura:if>
                <aura:if isTrue="{!(v.ApprovalDetail.RequestType =='Invoice' &amp;&amp; v.actionTaken == 'QWV')}">{!$Label.c.CORE_LBL_INV_QUERY_WITH_VENDOR}</aura:if>
                
            </div>
            <hr></hr>
            <div class="feedback-buttons">
                <button class="slds-button slds-button--neutral slds-not-selected" aria-live="assertive" onclick="{!c.onCancel}">
                    <span class="slds-text-not-selected">
                        Cancel
                    </span>
                </button>
                <div style="float:right;">
                    <button class="slds-button slds-button--neutral slds-not-selected" aria-live="assertive" onclick="{!c.onSubmit}">
                        <span class="slds-text-not-selected">
                            <aura:if isTrue="{!v.actionTaken == 'Approve'}">{!$Label.c.CORE_LBL_APPREJ_APPR_BTN}</aura:if>
                            <aura:if isTrue="{!v.actionTaken == 'Reject'}">{!$Label.c.CORE_LBL_APPREJ_REJC_BTN}</aura:if>
                            <aura:if isTrue="{!v.actionTaken == 'Rework'}">{!$Label.c.CORE_LBL_REWORK}</aura:if>
                            <aura:if isTrue="{!v.actionTaken == 'RTAP'}">{!$Label.c.CORE_LBL_RETURN_TO_AP_CAPS}</aura:if>
                            <aura:if isTrue="{!v.actionTaken == 'QWV'}">{!$Label.c.CORE_LBL_QUERY_WITH_VENDOR}</aura:if>
                        </span>
                    </button>
                </div>
            </div>
        </aura:if>
    </div>
    
    <aura:if isTrue="{!v.success_toast}">
        <div class="slds-notify_container">
            <div class="slds-notify slds-notify--toast slds-theme--success" role="alert">
                <span class="slds-assistive-text">Success</span>
                <button class="slds-button slds-button--icon-inverse slds-notify__close" >
                    <span class="slds-assistive-text">Close</span>
                </button>
                <div class="notify__content slds-grid">
                    <div class="slds-col slds-align-middle">
                        <h2 class="slds-text-heading--small "><img class="success-icon" src="/resource/EA_StaticResource/assets/images/success.svg"></img>
                         <aura:if isTrue="{!v.actionTaken == 'Approve'}"> You have approved the request </aura:if>
                         <aura:if isTrue="{!v.actionTaken == 'Reject'}"> You have rejected the request </aura:if>
                         <aura:if isTrue="{!v.actionTaken == 'Rework'}"> You have requested for rework </aura:if>
                         <aura:if isTrue="{!v.actionTaken == 'RTAP'}"> You have return to AP the request </aura:if>
                         <aura:if isTrue="{!v.actionTaken == 'QWV'}"> You have Query with Vendor the request </aura:if>  
                         <span style="float:right;" onclick="{!c.goToHomePage}">X</span></h2>
                    </div>
                </div>
            </div>
        </div>
    </aura:if>
</aura:component>