<aura:component controller="EA_ControllerClass" >
    <ltng:require styles="/resource/EA_StaticResource/assets/styles/salesforce-lightning-design-system-vf.css" />
    <aura:attribute name="activityId" type="string"></aura:attribute>
    <aura:attribute name="activity" type="Everyday_Activity__c[]"></aura:attribute>
    <aura:attribute name="themeColors" type="Map"/>
    <aura:attribute name="themecolor" type="String" />
    <aura:attribute name="themerecordtype" type="String" default="{!v.activity[0].RecordType.Name}"/>
    <aura:attribute name="recordId" type="Id" description="The current record Id to display" />
    <aura:attribute name="selectedUsers" type="String[]" description="Selected users" />
    <aura:attribute name="selectedItem" type="String[]" description="To map selected details"/>
    <aura:attribute name="maxLimit" type="Integer" default="{!v.activity.Participants_Required__c}"/>
    <aura:attribute name="participantCount" type="Integer" />
    <aura:attribute name="todoTime" type="Map" />
    <aura:attribute name="activityTimeToComplete" type="String" />
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    <aura:attribute name="pagename" type="String" />
    <aura:attribute name="index" type="Integer" />
    
    <!-- Event handlers -->
    <aura:registerEvent name="redirectToDetail" type="c:EA_Detailpage_Event" />
    <aura:handler name="updateLookupIdEvent" event="c:EA_UpdateLookupId_Event" action="{!c.handleIdUpdate}"/>
    <aura:handler name="clearLookupIdEvent" event="c:EA_ClearLookupId_Event" action="{!c.handleIdClear}"/>
    <aura:attribute name="showLoading" type="boolean" default="false"/>
    <style>
        .slds-lookup[data-select="multi"] {
        .slds-pill__container {
        border: transparent {
        bottom: $border-width-thin solid $color-border;
        radius: 0;
        }
        }
        }
        .slds .slds-pill-container {
          border-bottom: 0px ;
        }
        .slds .slds-form-element {
        position: relative;
        width: 95%;
        margin-left: 2.5%;
        margin-top: 1rem;
        }
        .slds .slds-select[size] {
        width: 95%;
        margin-left: 2.5%;
        margin-top:1rem;
        font-size:1.4rem;
        }
        .slds .slds-fade-in-open {
        background-color: black;
        opacity: 0.5;
        visibility: visible;
        -webkit-transition: opacity 0.1s linear;
        transition: opacity 0.1s linear;
        }
        .slds .slds-spinner--small {
        width: 32px;
        height: 32px;
        margin-left: 40%;
        }
      .slds .slds-input {
  			height: 30px;
		}
    </style>
    <form aura:id="frm1">
        <div class="slds">
            <div class="outer_sec">
                <div class="activity-sec_f"  style="{!'background:'+ v.themecolor +';'}">
                    <aura:iteration items="{!v.activity}" var="act">
                        <div class="a-title_f"><p><ui:outputText value="{!act.RecordType.Name}"/></p></div>
                        <div class="t-title_f"><h4><ui:outputText value="{!act.Name}"/></h4></div>
                    </aura:iteration>
                </div>
                <div class="section_f">
                    <div class="rateTitle"><p class="para_inv">Everday Action can be even better when done with colleagues!</p></div>
                    <div class="cTitle">Ask Someone	to join you:</div>
                    <!-- Lookup component -->
                    <c:EA_LookupSObject label="User" pluralLabel="Users" sObjectAPIName="User"
                                        listIconSVGPath="/resource/EA_StaticResource/assets/icons/standard-sprite/svg/symbols.svg#account"
                                        listIconClass="slds-icon-standard-account" selectedUsers="{!v.selectedUsers}" selectedItem="{!v.selectedItem}" maxLimit="{!v.maxLimit}" participantCount="{!v.participantCount}"/>
                    
                    <div  style="margin-top:10px;"></div>
                    <div class="cTitle">When would you like to do this?</div>
                    <div  class="slds-form-element__control">
                        <ui:inputSelect aura:id="activityTime" change="{!c.onSelecteChange}" class="slds-select">
                            <aura:iteration items="{!v.todoTime}" var="todoT">
                                <aura:if isTrue="{!todoT.Value == 'Today'}">
                                	<ui:inputSelectOption text="{!todoT.Value}" class="uiInputSelectOption" label="{!todoT.Label}" value="true"/>
                                </aura:if>
                                <aura:if isTrue="{!todoT.Value != 'Today'}">
                                	<ui:inputSelectOption text="{!todoT.Value}" label="{!todoT.Label}"/>
                                </aura:if>
                                
                            </aura:iteration>
                        </ui:inputSelect>
                    </div>
                    <div  style="margin-top:30px;"></div>
                    
                </div>
                <div><button class="cancel_btn" onclick="{!c.skipToDoActivity}" >Cancel</button></div>
                <div><button class="submitButton" onclick="{!c.callSubmitToDoActivity}" >Submit</button></div>
				<aura:if isTrue="{!v.showLoading}">
                    <div class="slds-modal slds-fade-in-open" aria-hidden="false" role="dialog" data-aura-rendered-by="1191:c">
                        <div class="slds-modal__container" data-aura-rendered-by="1192:c">
                     <div class="slds-spinner--small">
                         <img src="/resource/EA_StaticResource/assets/images/spinners/slds_spinner.gif" alt="Loading..." />
                    </div>
                        </div>
                    </div>
                </aura:if>
            </div>
        </div>
    </form>
</aura:component>