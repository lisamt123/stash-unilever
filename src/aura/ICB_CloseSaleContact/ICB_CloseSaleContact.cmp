<aura:component controller="ICB_Cockpit_CC" implements="flexipage:availableForAllPageTypes" access="global">
    <aura:attribute name="listContacts" type="ICB_Wrapper_Cockpit_CC[]" description="list contacts returned of the controller apex" />
    <aura:attribute name="qtdKits" type="String" default="0" description="amount of product seller"  />
    <aura:attribute name="inventoryList" type="ICB_Wrapper_Cockpit_CC[]"  description="List of PriceBookEntry" />
    <aura:attribute name="indexOld" type="Integer" default="0" description="Attribute for save the old index of list" />
    <aura:attribute name="quantity" type="Integer" default="0" description="Amount of products" />
    <aura:attribute name="quantityUpdate" type="Integer" default="0" description="Amount of products" />
    <aura:attribute name="HeaderCloseSale" type="Boolean" default="true"/>
    <aura:attribute name="optionsList" type="String[]" default=""/>
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    
    <ltng:require styles="{!$Resource.ICB_SLDS202_CSS +'/assets/styles/salesforce-lightning-design-system.css'}"/>
   <!-- <c:ICB_CloseSale />-->
    <c:ICB_MobileChamelHeader HeaderCloseSale="{!v.HeaderCloseSale}"/>
    <table class="slds-table slds-table--bordered slds-max-medium-table--stacked">
        <tbody>
            <aura:iteration var="wrapper" items="{!v.listContacts}" indexVar="index">
                <aura:renderIf isTrue="{!wrapper.oppItem != null}">
                    <tr>
                        <td scope="row" class ="BorderBlue">
                            <img src="{!wrapper.urlImage}" class=" image--align ImagePhoto"/>
                            <ui:outputText value="{!wrapper.contactItem.Name}" class="image--align" />
                            <br />
                            <aura:if isTrue="{!wrapper.quantityIce != null}">
                                <ui:outputText value="{!wrapper.quantityIce + ' Sorvetes'}" class="image--align" />
                            </aura:if>
                        </td>
                        <td>
                            <div class="slds-truncate slds-grid">
                                <span class="slds-form-element__label slds-m-bottom--none">Receber sorveteiro (R$)</span>
                                
                            </div>
                            <div class="slds-truncate slds-grid">
                                <aura:renderIf isTrue="{!wrapper.oppItem.StageName == 'Closed'}">
                                    <ui:outPutNumber value="{!wrapper.oppItem.ICB_Total_Sold_Price__c}"/>
                                </aura:renderIf>
                            </div> 
                        </td>
                        <td>
                            <div class="slds-truncate slds-grid">
                                <span class="slds-form-element__label slds-m-bottom--none">Total vendas (R$)</span>
                                
                            </div>
                            <div class="slds-truncate slds-grid">
                                <aura:renderIf isTrue="{!wrapper.oppItem.StageName == 'Closed'}">
                                    <ui:outPutNumber value="{!wrapper.oppItem.Amount}"/>
                                </aura:renderIf>
                            </div> 
                        </td>
                        <td>
                            <div class="slds-truncate">
                                <div class="slds-form-element" >
                                    <label class="slds-checkbox--toggle slds-grid slds-grid--vertical-align-center">
                                        <aura:renderIf isTrue="{!wrapper.oppItem.StageName == 'Available' || wrapper.oppItem.StageName == 'Closed'}">
                                            <aura:if isTrue="{!wrapper.oppItem.StageName == 'Closed'}">
                                                <span class="slds-form-element__label slds-m-bottom--none">Calculado</span>
                                            </aura:if>
                                            <aura:if isTrue="{!wrapper.oppItem.StageName == 'Available'}">
                                                <span class="slds-form-element__label slds-m-bottom--none">Pendente</span>
                                            </aura:if>
                                            
                                            <div data-record="{!index}" onchange="{!c.changeCheckBox}">
                                                
                                                <ui:inputCheckBox value="{!wrapper.oppItem.StageName == 'Closed'}" aura:id="available" disabled="{!wrapper.oppItem.StageName == 'Closed'}" />
                                                
                                                <span class="slds-checkbox--faux" data-check-on="" data-check-off=""></span>
                                            </div>
                                            <!--<aura:renderIf isTrue="{!v.optionsList != null}">
                                                <ui:inputSelect class="dynamic" aura:id="InputSelectDynamic" value="{!wrapper.oppItem.ICB_Sales_Locale__c}" />
                                            </aura:renderIf>-->
                                        </aura:renderIf>
                                    </label>
                                </div>
                            </div>
                        </td>
                        <td >
                            <div class="slds-truncate slds-grid" >
                                <!--<aura:renderIf isTrue="{!wrapper.oppItem.StageName == 'Available'}">-->
                                    <div data-record="{!index}" onclick="{!c.menuOpenClose}" class ="btnCollor slds-truncate slds-grid">
                                        <aura:renderIf isTrue="{!!wrapper.checkButton}">
                                            <ui:button aura:id="menuButton"  >
                                                <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/icons/utility/arrowdown_60.png'}" class="buttons-left"/>
                                            </ui:button>
                                            <aura:set attribute="else">
                                                <ui:button aura:id="menuButtonArroDown">
                                                    <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/icons/utility/arrowup_60.png'}" class="buttons-left"/>
                                                </ui:button>
                                            </aura:set>
                                        </aura:renderIf>
                                        <!--</aura:renderIf>-->
                                    </div >
                                <!--</aura:renderIf>-->
                            </div>
                        </td>
                    </tr>
                    <aura:iteration var="inventory" items="{!v.inventoryList}" indexVar="index">
                        <tr>
                            <aura:renderIf isTrue="{!wrapper.checkButton}">
                                <td>
                                    <img  src="{!$Resource.ICB_SLDS202_CSS +'/assets/images/'+inventory.invetoryItem.ICB_Product__r.Product_Image__c}" class="Image" />
                                </td>
                                <td>
                                    <ui:outputText value="{!inventory.invetoryItem.ICB_Product__r.Name}" />
                                </td>
                                <td class="colum-padding BorderWhite" />
                                <td class="colum-padding BorderWhite" />
                                
                                <td>
                                    <div class="slds-grid slds-grid--pull-padded Align" >
                                        <aura:renderIf isTrue="{!wrapper.oppItem.StageName == 'Available' || wrapper.oppItem == null}">
                                            <div class="slds-truncate ButtonInventory" data-record="{!index}" onclick="{!c.decrementValue}">
                                                <ui:button aura:id="neg" >
                                                    <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/icons/utility/dash_60.png'}"  class="buttons-left" />
                                                </ui:button>
                                            </div>
                                            <div> &nbsp;&nbsp;</div>
                                            
                                            <div align="center" data-label="{!$Label.c.ICB_ENTRY}">
                                                <ui:inputNumber class="input-size" aura:id="QuantityUnit" 
                                                                value="{!inventory.quantity}" />
                                            </div>
                                            <div  class="slds-truncate ButtonInventory" data-record="{!index}" onclick="{!c.incrementValue}" >
                                                <ui:button aura:id="pos" >
                                                    <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/icons/utility/add_60.png'}"  class="buttons-left" />
                                                </ui:button>
                                            </div>
                                            <aura:set attribute="else">
                                                <ui:outputNumber class="input-size" aura:id="QuantityUnit" 
                                                                 value="{!inventory.quantity}" />
                                            </aura:set>
                                        </aura:renderIf>
                                    </div>
                                </td>
                            </aura:renderIf>
                        </tr>
                    </aura:iteration> 
                </aura:renderIf>
            </aura:iteration>
        </tbody>
    </table>
    
</aura:component>