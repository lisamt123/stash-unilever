<aura:component implements="force:appHostable" controller="MB_Controller_Class">
    <aura:attribute name="showDevice" type="boolean" default="false"></aura:attribute>
    <aura:attribute name="userName" type="string"></aura:attribute>
    <aura:attribute name="localCurrency" type="string"></aura:attribute>
    <aura:attribute name="totalUsage" type="decimal"></aura:attribute>
    <aura:attribute name="CurrentMonth" type="string"></aura:attribute>
    <aura:attribute name="selectedMonth" type="string"/>
    <aura:attribute name="Device_Details" type="MB_Wrapper_Class.MB_Device_Wrapper_Class[]"></aura:attribute>
    <aura:handler name="init" value="{!this}" action="{!c.doinit}"></aura:handler>
    <aura:attribute name="pageName" type="String" default="MB_Devices"/>
    <aura:attribute name="showspinner" type="boolean" default="true"/>
    <aura:attribute name="showiPass" type="boolean" default="false"/>
    <aura:attribute name="iPassTotalAmount" type="MB_Wrapper_Class.MB_Device_Wrapper_Class[]"/>
    <style>
        .message_body{
        background: #eef1f6;
        min-height:450px;
        color:#033A69;
        }
        .amount{
        font-weight:bold;
        }
        .navbar-fixed-top{
        height: 42px;
        }
        .usage-text-summary{
        padding: 15px 20px 0px 20px;
        }
        .drop-down{
        width: 14px;
        background: white;
        position: absolute;
        right: 5%;
        top: 93px;
        }
        .device_section{
        width: 94%;
        margin: 0 auto;
        }
        .Device_main{
        padding: 0 11px 14px 9px;
        }
        .Device_main_sub{
        background: #fff;
        height: 125px;
        border-radius: 4px;
        padding-top: 10px;
        }
        .device_desc{
        float:left;
        width:73%;
        }
        .device_img{
        float: left;
        width: 79px;
        text-align: center;
        height: 100px;
        display: flex;
        align-items: center;
        }
        .device_desc_a {
            border-bottom: 1px solid #CFD7E6;
            padding: 28px 0 0px 0px;
            margin: 0 10px;
            height: 52px;
            font-size: 0.75rem;
            font-weight: bold;
        }
        .device_desc_b{
        padding: 4px 10px;
        }
        .see_more{
        float: right;
        padding: 4px 0px;
        margin-right: 5px;
        }
        .info_icon{
        width: 30px;
        display: inline-block;
        margin-right: 6px;
        }
        .Seemore_image{
        float: right;
        width: 16px;
        margin-right: -10px;
        margin-top: 5px;
        }
        .image1{
        margin-top:1px;
        }
    </style>
    <aura:if isTrue="{!v.showspinner=='false'}"> 
        <c:MB_Mobile_billing_Common pagename="{!v.pageName}" selectedmonth="{!v.selectedMonth}"/>
        <c:MB_SpendSummary_headerCommon month="{!v.CurrentMonth}" />
        <div class="slds-text-heading--small message_body slds-scrollable--y">
            <aura:if isTrue="{!v.showDevice ==true}">
                <div class="usage-text-summary">
                    Hi {!v.userName},<br/>Your total spend for {!v.CurrentMonth} is <span class="amount"> {!v.localCurrency}  {!v.totalUsage}</span><br/><br/>
                </div>
                <div class="device_section">
                    <div class="slds-text-heading--small Device_main">
                        <!-- <span class="info_icon">
                <img src="/resource/MB_Icons/MB_Icons/info_60.png"></img>
                </span>
                -->
                        Devices
                    </div> 
                    <aura:iteration items="{!v.Device_Details}" var="device" indexVar="indx" >
                        
                        <div class="Device_main_sub"  >
                            <div class="device_img">
                                <!--  <img src="/resource/Device/Apple.jpg"> </img> -->
                                <img src="{!device.deviceImageUrl}" data-index="{!indx}" onclick="{!c.gotoDetailSummary}"/>
                                
                            </div>
                            <div class="device_desc">
                                <div class="slds-text-body--regular device_desc_a" data-index="{!indx}" onclick="{!c.gotoDetailSummary}">{!device.deviceName}<div style="    font-size: 1.1rem;float:right;" data-index="{!indx}" onclick="{!c.gotoDetailSummary}">{!v.localCurrency}  {!device.totalUsage}</div></div>
                                <div class="slds-text-body--regular device_desc_b">
                                    <div class="servicename slds-truncate" >{!device.ServiceName}</div>
                                    <span class="Seemore_image">
                                        <img src="/resource/Lightning_designing_style/assets/icons/utility/chevronright_60.png" data-index="{!indx}" onclick="{!c.gotoDetailSummary}"></img>
                                    </span><span class="slds-text-body--regular see_more" data-index="{!indx}" onclick="{!c.gotoDetailSummary}">see more</span>
                                </div>
                            </div>
                        </div> <br/>
                    </aura:iteration>
                    <aura:if isTrue="{!v.showiPass ==true}">
                        <div class="Device_main_sub" onclick="{!c.gotoIpassCharts}" >
                            <div class="device_img">
                                <!--  <img src="/resource/Device/Apple.jpg"> </img> -->
                                <img src="/resource/MB_Icons/MB_Icons/iPass_Icon_old.png" style="width: 50px;border-radius: 7px;    margin-left: 15px;"/>
                                
                            </div>
                            <div class="device_desc">
                                <div class="slds-text-body--regular device_desc_a">iPass <div style="float: right;font-size: 1.1rem;">{!v.iPassTotalAmount[0].userCurrency} {!v.iPassTotalAmount[0].iPassTotalAmount}</div></div>
                                <div class="slds-text-heading--small device_desc_b">
                                    <span class="Seemore_image image1">
                                        <img src="/resource/Lightning_designing_style/assets/icons/utility/chevronright_60.png"></img>
                                    </span><span class="slds-text-body--regular see_more" >see more</span>
                                </div>
                            </div>
                        </div> 
                    </aura:if>
                    
                </div>
            </aura:if>
            <aura:if isTrue="{!v.showDevice ==false}">
                <div class="slds-text-heading--small" style="padding:15px;" >
                    <span>Hi {!v.userName}, 
                        You donâ€™t have any spend for {!v.CurrentMonth}.    
                    </span>
                </div>
            </aura:if>
            <br/>
            <c:MB_Action_bar componentName="MB_Devices" selectedMonth="{!v.CurrentMonth}"/>
        </div>   
        <aura:set attribute="else">
            <div class="slds-spinner_container">
                <div class="slds-spinner slds-spinner--medium" aria-hidden="false" role="alert">
                    <div class="slds-spinner__dot-a"></div>
                    <div class="slds-spinner__dot-b"></div>
                </div>
            </div>
        </aura:set>
    </aura:if>	
</aura:component>