<aura:component controller="EA_Feedback_Controller" implements="force:appHostable" >
    <ltng:require styles="/resource/EA_StaticResource/css/bootstrap.3.3.css" />
    <ltng:require styles="/resource/EA_StaticResource/slick/slick.css,/resource/EA_StaticResource/slick/slick-theme.css"	
                  scripts="/resource/EA_StaticResource/jquery/jquery.js,/resource/EA_StaticResource/slick/slick.min.js"/>
    <ltng:require styles="/resource/EA_StaticResource/assets/styles/salesforce-lightning-design-system-vf.css" />
    <aura:attribute name="activityId" type="string"></aura:attribute>
    <aura:attribute name="team_memberId" type="string"></aura:attribute>
    <aura:attribute name="participant_rating" type="integer"></aura:attribute>
    <aura:attribute name="activity" type="Everyday_Activity__c[]"></aura:attribute>
    <aura:attribute name="activityForRating" type="Everyday_Activity__c"></aura:attribute>
    <aura:handler name="init" value="{!this}" action="{!c.doInit}"></aura:handler>
    <aura:attribute name="rating" type="integer"/>
    <aura:attribute name="numbers" type="integer[]"/>
    <aura:attribute name="remain" type="integer[]" />
    <aura:attribute name="showrating" type="boolean" default="false"/>
    <aura:attribute name="rateStars" type="integer[]" />
    <aura:attribute name="showError" type="boolean" default="false"/>
    <aura:attribute name="showLoading" type="boolean" default="false"/>
    <aura:attribute name="pagename" type="string"></aura:attribute>
    <aura:attribute name="index" type="integer"></aura:attribute>
    <aura:attribute name="pageIndex" type="integer"/>
    <aura:attribute name="showmessage" type="boolean" default="false"/>
    <style>
        .spacer-pull-to-load-more{
        height:100% !important;
        }
        .slds .slds-fade-in-open {
        background-color: black;
        opacity: 0.5;
        visibility: visible;
        -webkit-transition: opacity 0.1s linear;
        transition: opacity 0.1s linear;
        }
        .slds .slds-spinner--small {
        width: 32px;
        height: 32px;
        margin-left: 40%;
        }
    </style>
    <div class="slds">
        <div class="activity-sec_f">            
            <aura:iteration items="{!v.activity}" var="act">
                <div class="a-title_f"><p><ui:outputText value="{!act.RecordType.Name}"/></p></div>
                <div class="t-title_f"><h4><ui:outputText value="{!act.Name}"/></h4></div>
            </aura:iteration>		
        </div>
        <aura:if isTrue="{!v.showmessage}">
            <ui:message title="Confirmation" severity="confirm" closable="true">
              Your activity has been shared on your chatter wall.
          </ui:message>

        </aura:if>
        <div class="section_f">
            <aura:if isTrue="{!v.showrating}">
                <div class="rateTitle">Rate this activity</div>
                
                <div class="default-rating" style="margin-left:5px;">
                    
                    <aura:if isTrue="{!v.participant_rating !=undefined }">
                        <aura:iteration items="{!v.numbers}" var="rating" indexVar="index">
                            <span>
                                <img  value="{!rating}" class="starfill_f"  data-index="{!index}" onclick="{!c.imageClick}" src="/resource/EA_StaticResource/assets/images/blue_star.svg" alt="person name" />
                            </span>
                        </aura:iteration>
                        
                        <aura:iteration var="rating1" items="{!v.remain}" indexVar="{!v.rateStars}">
                            <span>
                                <img  value="{!rating1}"   data-index="{!v.rateStars}"  onclick="{!c.imageClick}" class="starunfill_f" src="/resource/EA_StaticResource/assets/images/unfil_star.svg" alt="person name" />
                            </span>
                        </aura:iteration>
                    </aura:if>
                    <aura:if isTrue="{!v.participant_rating ==undefined}">
                        <aura:iteration var="rating1" items="[1,2,3,4,5]"   indexVar="index2">
                            
                            <span>
                                <img  data-index="{!index2}" onclick="{!c.imageClick}"  value="{!rating1}" class="starunfill_f" src="/resource/EA_StaticResource/assets/images/unfil_star.svg" alt="person name" />
                            </span>
                        </aura:iteration>
                    </aura:if>
                </div>
            </aura:if>
            <div class="cTitle">Comment</div>
            <div class="box_space">
                <textarea  id="commentText" class="box-text" placeholder="Upto 240 characters"></textarea>
                <!-- <ui:inputText aura:id="comments" label="Comments"  placeholder="upto 240 characters" /> -->
            </div> 
            <aura:if isTrue="{!v.showError}">
               <div style="align:right;color:red"><span>Please Provide Comments</span></div>
            </aura:if>
        </div>   
        <button class="cancel_btn" onclick="{!c.gotoDetail}">Cancel</button>
        <button id="btn" class="submitButton" onclick="{!c.submitFeedback1}">Submit</button>
        <aura:if isTrue="{!v.showLoading}">
            <div class="slds-modal slds-fade-in-open" aria-hidden="false" role="dialog" data-aura-rendered-by="1191:c">
                <div class="slds-modal__container" data-aura-rendered-by="1192:c">
       		 <div class="slds-spinner--small">
 				 <img src="/resource/EA_StaticResource/assets/images/spinners/slds_spinner.gif" alt="Loading..." />
			</div>
                </div>
            </div>
        </aura:if>
        
            	
        
    </div>
</aura:component>