<aura:component controller="Core_IC_IdeaController">
    <aura:attribute name="ideasListItem" type="Core_CA_BaseApplicationWrapper"/>
    <aura:attribute name="campaignItem" type="Core_CA_BaseApplicationWrapper"/>
    <aura:attribute name="displayCampaignIdea" type="Boolean"/>    
    <aura:attribute name="pannelType" type="String"/>
    <aura:attribute name="MailSubjectIdea" type="String" />
    <aura:attribute name="MailToBody3" type="String" />
    <aura:attribute name="MailToBody4" type="String" />
    <aura:attribute name="MailToBody5" type="String" />
    <aura:attribute name="MailToBody6" type="String" />
    <aura:attribute name="shareIdea" type="Boolean" default="false"/>
    <aura:attribute name="showFilter" type="boolean" default="false"/>
    <aura:attribute name="selectedFilterType" type="String" />
    <aura:attribute name="selectedSortType" type="String" />
    <aura:attribute name="chatterValue" type="Boolean"/>
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
	
    <style>
        @media screen and (min-width:1024px) and (max-width:1700px){ 
        .ideaListShare {
        left: auto;
        right: auto !important;
        transform: translateX(233px) !important;
        }
        }
        @media screen and (min-width:768px){
        .cCORE_IC_IdeasListItem .ideaTitleMargin{
            width: 280px;
        }
        }
    </style>
    <div class="slds-card ">
        <div class="slds-card__header ideaTile">
            <div class="slds-grid">
                <div class=" " onclick="{!c.displayIdeaDetails}">
                   <a> <h2 class="slds-text-heading--small ideaTitleMargin " >{!v.ideasListItem.IdeaTitle}</h2></a>
                </div>
            </div>
            <a>
              <div class="slds-text-body--small titlePadding " onclick="{!c.displayCampaignDetails}">
                {!v.ideasListItem.CampaignTitle}
               </div>
             </a>   
            <div class="slds-no-flex share">
                <aura:if isTrue="{!v.selectedFilterType!='closedCampaign'}">
                    <button class="share-button slds-button slds-button--icon-border-filled slds-button--icon-x-small slds-shrink-none shareTop" id="clicker" onclick="{!c.ideaShare}">
                        <img src="/resource/CORE_IC_IdeasLigthtning/utility/share_60.png" class="slds-button__icon slds-button__icon--hint slds-button__icon--small"/>
                    </button>
                    <aura:if isTrue="{!v.shareIdea}">
                        <div  aura:id="showideaOptions" class="slds-dropdown ideaListShare" >
                            <ul class="dropdown__list" role="menu">
                               	  <aura:if isTrue="{!v.chatterValue}"> 
                                <li class="slds-dropdown__item">
                                    <a  role="menuitem" onclick="{!c.navigateToChatter}" >
                                        <p class="slds-truncate">Share on Chatter</p>
                                    </a>
                                </li>
                                  </aura:if>  
                                <li class="slds-dropdown__item"  onclick="{!c.hideIdeaChatterShare}">
                                    
                                  <aura:if isTrue="{!v.chatterValue}">    
                                    <a href="{!'mailto:?subject='+v.MailSubjectIdea+'%20%22'+v.ideasListItem.IdeaTitle+'%20%22'+'&amp;body='+v.MailToBody3+'%20%22'+v.ideasListItem.IdeaTitle+'%22%20'+v.MailToBody4+'%20'+v.MailToBody5}" 
                                    style="color: #344A5F ;text-decoration: none;"  role="menuitem">
                                        <p class="slds-truncate">Share via Email</p>
                                    </a>
                                    
	                         <aura:set attribute="else">
	     <a href="{!'mailto:?subject='+v.MailSubjectIdea+'%20%22'+v.ideasListItem.IdeaTitle+'%20%22'+'&amp;body='+v.MailToBody3+'%20%22'+v.ideasListItem.IdeaTitle+'%22%20'+v.MailToBody6+'%20'}" 
                                    style="color: #344A5F ;text-decoration: none;"  role="menuitem">
                                        <p class="slds-truncate">Share via Email</p>
                                    </a>
	                          </aura:set>
                           </aura:if>   
                                </li>
                            </ul>
                        </div>
                    </aura:if>
                </aura:if>
            </div>
        </div>
        <hr/>
        <div class="slds-media slds-comment slds-hint-parent" >
            <div class="slds-media__figure">
                <div class="slds-avatar slds-avatar--circle slds-avatar--medium avatarIcon">
                    <a >
                        <img src="{!v.ideasListItem.BackgroundImage}" alt="photoUrl" />
                    </a>
                </div>
            </div>
            <div class="slds-media__body" onclick="{!c.displayIdeaDetails}" >
                <div class="slds-grid slds-grid--align-spread slds-has-flexi-truncate">
                    <p class="slds-truncate">
                        <a >{!v.ideasListItem.CreatorName}</a>
                    </p>
                </div>
                <p class="slds-text-body--small">
                    <a>{!v.ideasListItem.CreatedDateTime}</a>
                </p>
            </div>
        </div>
        <div class="slds-text-body--regular topPadding bottomPadding" onclick="{!c.displayIdeaDetails}">
            <div class="bodyDescriptionHeight">
                	{!v.ideasListItem.IdeaBody}
                </div>
            <p class="slds-truncate category" onclick="{!c.displayIdeaDetails}">
                <span class="slds-icon_container">
                    <img aria-hidden="true" class="slds-icon slds-icon-text-warning slds-icon--x-small" src="/resource/CORE_IC_IdeasLigthtning/img/tabset.svg"/>
                </span>&nbsp;{!v.ideasListItem.Categories}  
            </p>
        </div>
        <hr/>
        <div class="slds-grid margin-botton">
            <div class="slds-media slds-media--center slds-has-flexi-truncate" onclick="{!c.displayIdeaDetails}">
                <div class="slds-button fontStyle">{!v.ideasListItem.VoteCount} Votes,</div>&nbsp;
            
                <div class="slds-button fontStyle">{!v.ideasListItem.CommentCount} Comment</div>
            </div>
            <div class="slds-no-flex">
                <aura:if isTrue="{!v.selectedFilterType!='closedCampaign'}">
                    <aura:if isTrue="{!v.ideasListItem.Voted=='True'}">
                        <button class="slds-button slds-button--neutral slds-not-selected" >
                            <img src="/resource/CORE_IC_IdeasLigthtning/img/like_blue.svg" class="mediumImageHeight" />&nbsp;Voted 
                    
                        </button>
                        <aura:set attribute="else">
                            <button class="slds-button slds-button--neutral slds-not-selected" onclick="{!c.showIdeaVoted}">
                                <img src="/resource/CORE_IC_IdeasLigthtning/utility/like_60.png" class="mediumImageHeight"/>&nbsp;Vote 
                        
                            </button>
                        </aura:set>
                    </aura:if>
                </aura:if>
            </div>
        </div>
    </div>
</aura:component>