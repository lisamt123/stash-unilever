<aura:component controller="ICB_Cockpit_CC">
    <aura:attribute name="listContacts" type="ICB_Wrapper_Cockpit_CC[]" description="list contacts returned of the controller apex" />
    <aura:attribute name="qtdKits" type="String" default="0" description="amount of product seller"  />
    <aura:attribute name="inventoryList" type="ICB_Wrapper_Cockpit_CC[]"  description="List of PriceBookEntry" />
    <aura:attribute name="indexOld" type="Integer" default="0" description="Attribute for save the old index of list" />
    <aura:attribute name="indexContact" type="Integer" default="0" description="Attribute for save the index of list contact" />
    <aura:attribute name="mapInventory" type="Map" default="{0:0}" description="Attribute for save the index of list inventories" />
    <aura:attribute name="quantity" type="Integer" default="0" description="Amount of products" />
    <aura:attribute name="quantityUpdate" type="Integer" default="0" description="Amount of products" />
    <aura:attribute name="HeaderCockPit" type="Boolean" default="true"/>
   
    
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    
    <c:ICB_MobileChamelHeader HeaderCockPit="{!v.HeaderCockPit}"/>
    
    <table class="slds-table slds-table--bordered slds-max-medium-table--stacked">
        <tbody>
            <aura:iteration var="wrapper" items="{!v.listContacts}" indexVar="index">
                <tr>
                    
                    <td scope="row" class ="BorderBlue">
                        <img src="{!wrapper.urlImage}" class=" image--align ImagePhoto"/>
                        
                        &nbsp;&nbsp;
                        <aura:if isTrue="{!(wrapper.oppItem.StageName == 'Pending')}">
                            <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/images/truck.png'}" class="ImageSimbol ImageHidden ImageShow" />  
                        </aura:if>
                        <aura:if isTrue="{!(wrapper.oppItem.StageName == 'Available')}">
                            <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/images/sunVector3.png'}" class="ImageSimbol ImageHidden ImageShow" />  
                        </aura:if>
                        <aura:if isTrue="{!(wrapper.oppItem.StageName == null)}">
                            <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/images/bed.png'}" class="ImageSimbol ImageHidden ImageShow" />  
                        </aura:if>
                        <ui:outputText value="{!wrapper.contactItem.Name}" class="image--align" /><br />
                        <aura:if isTrue="{!wrapper.quantityIce != null}">
                            <ui:outputText value="{!wrapper.quantityIce + ' Sorvetes'}" class="image--align" />
                        </aura:if>
                    </td>
                    <td class ="hidden">
                        <aura:if isTrue="{!(wrapper.oppItem.StageName == 'Pending')}">
                            <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/images/truck.png'}" class="ImageSimbol hidden" />  
                        </aura:if>
                        <aura:if isTrue="{!(wrapper.oppItem.StageName == 'Available')}">
                            <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/images/sunVector3.png'}" class="ImageSimbol hidden" />  
                        </aura:if>
                        <aura:if isTrue="{!(wrapper.oppItem.StageName == null)}">
                            <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/images/bed.png'}" class="ImageSimbol hidden" />  
                        </aura:if>
                    </td>
                    <td class="colum-padding BorderWhite">
                        
                    </td>
                    <aura:if isTrue="{!(wrapper.oppItem.StageName == 'Pending') || (wrapper.oppItem.StageName == 'Available') 
                                     || (wrapper.oppItem.StageName == 'Closed')}">
                        <td >
                            <div class="slds-truncate" >
                                <div class="slds-form-element" >
                                    <label class="slds-checkbox--toggle slds-grid slds-grid--vertical-align-center">
                                        <aura:if isTrue="{!(wrapper.oppItem.StageName == 'Pending') || (wrapper.oppItem.StageName == 'Available') 
                                                         || (wrapper.oppItem.StageName == 'Closed')}">
                                            <aura:if isTrue="{!(wrapper.oppItem.StageName == 'Available') || (wrapper.oppItem.StageName == 'Closed')}">
                                                <span class="slds-form-element__label slds-m-bottom--none">Dispon√≠vel</span>
                                            </aura:if>
                                            <aura:if isTrue="{!wrapper.oppItem.StageName == 'Pending'}">
                                                <span class="slds-form-element__label slds-m-bottom--none">Pendente</span>
                                            </aura:if>
                                            <div data-record="{!index}" onchange="{!c.changeCheckBox}">
                                                <ui:inputCheckBox value="{!(wrapper.oppItem.StageName == 'Available') || (wrapper.oppItem.StageName == 'Closed')}" aura:id="available" />
                                                <span class="slds-checkbox--faux" data-check-on="" data-check-off=""></span>
                                            </div>
                                        </aura:if>
                                    </label>
                                </div>
                            </div>
                        </td>
                        <aura:set attribute="else">
                            <td class ="hidden">
                            <div class="slds-form-element" >
                                <label class="slds-checkbox--toggle slds-grid slds-grid--vertical-align-center">
                                </label>
                            </div>
                            </td>
                        </aura:set>
                    </aura:if>
                    
                    <td >
                        <div class="slds-truncate slds-grid btnCollor">
                            <aura:if isTrue="{!and(wrapper.oppItem.StageName != 'Pending',wrapper.oppItem.StageName != 'Available')}">
                                <div data-record="{!index}" onclick="{!c.solicitation}" >
                                    <ui:button aura:id="updatedButton" label="Solicitar" disabled="{!wrapper.isDisabled}" /><!---->
                                </div>
                                <aura:set attribute="else">
                                    <div data-record="{!index}" onclick="{!c.updatedPriceBook}">
                                        <ui:button aura:id="updatedButton" label="Atualizar" disabled="{!wrapper.oppItem.StageName != 'Available'}"  />
                                    </div>
                                </aura:set>
                            </aura:if>
                            <div data-record="{!index}" onclick="{!c.menuOpenClose}" class=" btnCollor slds-truncate slds-grid">
                                <aura:if isTrue="{!!wrapper.checkButton}">
                                    <ui:button aura:id="menuButton">
                                        <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/icons/utility/arrowdown_60.png'}" class="buttons-left"/>
                                    </ui:button>
                                    <aura:set attribute="else">
                                        <!--<div data-record="{!index}" onclick="{!c.menuOpenClose}" class=" btnCollor slds-truncate slds-grid">-->
                                            <ui:button aura:id="menuButton">
                                                <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/icons/utility/arrowup_60.png'}" class="buttons-left"/>
                                            </ui:button>
                                        <!--</div>-->
                                    </aura:set>
                                </aura:if>
                            </div>
                        </div>
                    </td>
                </tr >
                <aura:iteration var="inventory" items="{!v.inventoryList}" indexVar="index">
                    <tr>
                        <aura:renderIf isTrue="{!wrapper.checkButton}">
                            <td>
                                <img  src="{!$Resource.ICB_SLDS202_CSS +'/assets/images/'+inventory.invetoryItem.ICB_Product__r.Product_Image__c}" class="Image" />
                            </td>
                            <td>
                                <ui:outputText value="{!inventory.invetoryItem.ICB_Product__r.Name}" />
                            </td>
                            <td class="colum-padding BorderWhite">
                            </td>
                            <td class="colum-padding BorderWhite"></td>
                            
                            <td>
                                <div class="slds-grid slds-grid--pull-padded Align" >
                                    <aura:renderIf isTrue="{!wrapper.oppItem.StageName == 'Available' || wrapper.oppItem == null}">
                                        <div  class="slds-truncate ButtonInventory" data-record="{!index}" onclick="{!c.decrementValue}">
                                            <ui:button >
                                                <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/icons/utility/dash_60.png'}"  class="buttons-left" />
                                            </ui:button>
                                        </div>
                                    </aura:renderIf>
                                    <div> &nbsp;&nbsp;</div>
                                    <div align="center"  data-label="{!$Label.c.ICB_ENTRY}">
                                        <aura:renderIf isTrue="{!wrapper.oppItem.StageName == 'Available' || wrapper.oppItem == null}">
                                            <ui:inputNumber class="input-size" aura:id="QuantityUnitIn" 
                                                            value="{!inventory.quantity}" />
                                            <aura:set attribute="else">
                                            	<ui:outputNumber class="input-size" aura:id="QuantityUnitOut" 
                                                            value="{!inventory.quantity}" />
                                            </aura:set>
                                        </aura:renderIf>
                                        
                                    </div>
                                    <aura:renderIf isTrue="{!wrapper.oppItem.StageName == 'Available' || wrapper.oppItem == null}">
                                        <div  class="slds-truncate ButtonInventory" data-record="{!index}" onclick="{!c.incrementValue}">
                                            <ui:button aura:id="pos" >
                                                <img src="{!$Resource.ICB_SLDS202_CSS +'/assets/icons/utility/add_60.png'}"  class="buttons-left" />
                                            </ui:button>
                                        </div>
                                    </aura:renderIf>
                                </div>
                            </td>
                        </aura:renderIf>
                    </tr>
                </aura:iteration> 
            </aura:iteration> 
        </tbody>
    </table>
</aura:component>