@IsTest
public class FS_ContactDetail_Test_v2 {
    
    public  String clientId =Label.FS_PIIClientId; 
    public  String clientSecret=Label.FS_ClientSecretKey;
    //String jsonresponse = '{    "SiteLead": {      "Email": "firstlast@example.com","Phone": "89270087098",      "LandlinePhone": "89345673245",   "Username": "first",      "Firstname": "first",      "Middlename": "middle",      "Surname": "last",      "Age": 28,      "BirthDate": "1987-01-12Z",      "Country": "Russia",      "Address": "address-1, 4 - 33",      "City": "city1",      "PersonalDataAgree": true,      "Gender": "Male",      "BusinessName": "OOO MTC",      "BusinessPostalCode": "449543",     "FacebookId": "897384",      "VkId": "789347503",      "OkId": "0294485",      "MaritalStatus": "Married",      "SocialStatus": "socialStatus",      "PropertyStatus": "propertyStatus",      "Profession": "Developer",      "Income": "70000",      "PassportNumber": "1234567890",    "ExtraParameters": [     {          "Name": "Number of pets",          "Value": "2"        },        {          "Name": "Job",          "Value": "Developer"        }]    }}';
    Public Static Final String varResonseResult='{"AddSiteLeadResult": {     "ErrorCode": 0,     "Message": "???????? ?????????",     "SiteLead": {       "Address": "address-1, 4 - 33",       "Age": 28,       "BirthDate": "1987-01-12",       "BusinessAddress": "",       "BusinessName": "OOO MTC",       "BusinessPostalCode": "449543",       "City": "city1",       "Country": "Russia",       "Email": "tolmachev@example.com",       "ExtraParameters": [         {           "Name": "Number of pets",           "Value": "2"         },         {           "Name": "Job",           "Value": "Developer"         }       ],       "FacebookId": "897384",       "Firstname": "Tol",       "Gender": "Male",       "Id": "feff7eae-f646-4ba5-987f-ecd265e498f0",       "Income": 70000,       "JobTitle": "",       "LandlinePhone": "89345673245",       "MaritalStatus": "Married",       "Middlename": "middleName",       "OkId": "0294485",       "PassportNumber": "3606789654",       "PersonalDataAgree": true,       "Phone": "89270087098",       "PropertyStatus": "propertyStatus",       "SocialStatus": "socialStatus",       "Surname": "Machev",       "Username": "Tolmachev",       "VkId": "789347503"     },     "Success": true,     "Warnings": []   } }';
   // Public static final string jsonresponse = '{  "GetSiteLeadResult": {      "ErrorCode": 0,         "Message": "Операция выполнена",        "SiteLead": {           "Address": "RC+zeoM52poOZD+XF3uwCcBX8uVnenk8eQDoaxlZaAw=",          "BirthDate": "0001-01-01",          "BusinessAddress": "",          "BusinessName": "",             "BusinessPostalCode": "cKXP289jvWAshOMykKlZorspTrHDdE9K36k4T0t9pZU=",           "City": "ekjLj7nqrkL41hgx8YE0hwd0xeshqRgFaVJcFvBggHk=",             "Country": "0qPmUVxbYAmsKTW9vQ2sSun3KwoxwDa85f8iaZZ3/iM=",          "Email": "3KpZiQdyaUNnNLK4FDYhlqiTtvDVFTHcyQO+vuVfE1wFTCRG5LabXYSQFfxEygE1",            "ExtraParameters": [            {               "Value": "sdBHfC0/OJmwmp9QqFq9FfQQeTPnreW4txwx4GoP5gk=",                "Name": "w0qkZtUENT8pOkrwY8w61abdYRpw+PlT9odVPX11eQw="          },          {               "Value": "yQj4sTUSWmb/DnGvS2GnhOBbgXLHBOOePvkrtfmIP30=",                "Name": "7OXp291PdN7gxAbHY4Im/txQA5QN8n1MpaROKDmDwrY="          },          {               "Value": "n4CMTuSHlNxxy385pwUsYXQKCJ38KPIa69hFcDi4GJU=",                "Name": "lYYwkvdoVf3S+mpD9umqoOk4A+dMMK/7N+3pyhOtiCk="          },          {               "Value": "v4j2ryV/RB6VsxcXWlnG9CdqRK5ntGtA1ApcdtmE8kdssqc2uxz409dRYWhJzSht",                "Name": "45bLT7gdfrQDypj9taArUbSaypbBn0BYJ5h8+La/uQA="          },          {               "Value": "wmrz6zv/BLrU308dRSZFUrcMZybZA+8vJbHM7PTZ4TekfdCITh/teeWvG04Frl6n",                "Name": "tfoMBfT5AT9tHB5aJ4IMzQvTL+Tl9+t3peD3Mtkyf/4="          },          {               "Value": "WPmeHxHfWUBheMa+jwcC1HfcGTeZao86ml00oyrwK680gvzyohHFnkW66HDwxh4Z",                "Name": "TRIJB+rxrfS1rF2IZNxfX9VyueBe4zr0iRm4CoZyMYY="          },          {               "Value": "6pXZipSk/cRJlLU0TRZZ+ODZ3UxFY662p0jPJQH6nbo=",                "Name": "llcpevG7k1SUPDmo+fzp1slc/B6SlQ/yW0URE0liE8A="          }       ],          "FacebookId": "",           "Firstname": "0rHAaR0pNh0g1jXczNO9TjlTIqccsnziBu8tA6uAOPM=",            "Gender": "",           "Id": "df352690-a4c0-4296-ae93-e0bfd56eff3f",           "JobTitle": "",             "LandlinePhone": "",            "MaritalStatus": "",            "Middlename": "",           "OkId": "",             "PassportNumber": "",           "PersonalDataAgree": true,          "Phone": "v6EQfRGjvIzuy+YA2GpT+9iQD0mCXLoEme6ayhKFpj4=",            "PropertyStatus": "",           "SocialStatus": "",             "Surname": "gEFl7Ae14Mg3fembLL9xRdP9Sduw8Q52HQaEzYaNPzU=",          "Username": "",             "VkId": ""      },      "Success": true,        "Warnings": []  } }';
   // Public static final string jsonresponse = '{    "GetSiteLeadResult": {      "ErrorCode": 0,         "Message": "Операция выполнена",        "SiteLead": {           "Address": "XA0YwGv7kenfhXflrSiI48LsDIRPd2ybqbwCp8L8MQ0=",          "BirthDate": "0001-01-01",          "BusinessAddress": "",          "BusinessName": "",             "BusinessPostalCode": "JHD3qjpWcj1khpoQO+KYF2yyybatSeh9j6B+tm0BL8o=",           "City": "IEAj8OKVGEICBDdUEDyP0Ruz6NhQgRyRSSjMU5Zxaek=",             "Country": "/ULLG+pCdlRd4v9sIFCkrEHGFpZ8gP9YRDtQOYxipM8=",          "Email": "ipnghBn2ln5dXlMzn3WzlldejQmyadwnZH6XH0t1xdA=",            "ExtraParameters": [                {                   "Value": "lXXDll6UXsxUHzYuPRTdMdynd0XAr6+R/dD0vEk028o=",                    "Name": "KA0uhZUNDVAiBGrXfDUAyysbVxlzytEA+0jISSux0VU="              },              {                   "Value": "o8f79SlVa77Fde1JJcJK/p1YV3o09a7yaP4Pi6mYFNc=",                    "Name": "EtaNVj4q+fAcSmkJtLAShefrpn1+LQdmDBHiKIJN8fw="              },              {                   "Value": "EVc4owmOy/DBkCKHU98SEvSERV8F5JJVIWkSaChmLEA=",                    "Name": "fwJzimc1PN+1aLRkf1A2If2eSBCyYUaJSZ5k7FZMY7Y="              },              {                   "Value": "/jK9nEZ8pLmdUa9lDKz/UnAgd+PGT0Zyb9p2aAP1X1GvM5/5JTiiPzZg312NtKyl",                    "Name": "alzUkJthURP051F4vbUWcuBu6wnrwq+yFY/l9hIFnkc="              },              {                   "Value": "VTXRTDVaI5tEju8w38wfMhYatEnu8AhjAG0gq857xTGxilpqMwV02icbMEQvkaya",                    "Name": "Q35QIoKwEB0OXBgBCvIkbpX0eM+SiPNYYxoroMd1u7Q="              },              {                   "Value": "wdB4aaWeSnbKKwQq3bv96INXFREoO1pJ3JoUc+SmHKAwh7GtQ08SI39icBxTCdwH",                    "Name": "TvVCz5vTgcYQ7yxGvns5sOhvgFwxKgXrUxelwWkyclk="              },              {                   "Value": "e6qLzSE5tHg1b/A0a3cnctDYPBgBc4WK2BkmT8RG4yo=",                    "Name": "naK3edhKLsOIOtmhsWeyMv218m3vasUx9FC/XbbYiT0="              }           ],          "FacebookId": "",           "Firstname": "K2yytRw0BzBRgNEFB4WqAZNPCHheJE59iIfIBS4ifqw=",            "Gender": "",           "Id": "86fda35a-3d3f-4e49-a6aa-bcc5779f1e17",           "JobTitle": "",             "LandlinePhone": "",            "MaritalStatus": "",            "Middlename": "",           "OkId": "",             "PassportNumber": "",           "PersonalDataAgree": true,          "Phone": "GedU/BlrBLJKlY3Ne7DPw8UT/6L6bt5syJGSjibD/vw=",            "PropertyStatus": "",           "SocialStatus": "",             "Surname": "j+uzsfiEbJ7mbtKE/KuhxV5qoZeXsycl34ng2rrvp98=",          "Username": "",             "VkId": ""      },      "Success": true,        "Warnings": []  } }';
    Public static final string jsonresponse = '{    "GetSiteLeadResult": {      "ErrorCode": 0,         "Message": "Операция выполнена",        "SiteLead": {           "Address": "XA0YwGv7kenfhXflrSiI48LsDIRPd2ybqbwCp8L8MQ0=",          "BirthDate": "0001-01-01",          "BusinessAddress": "",          "BusinessName": "",             "BusinessPostalCode": "JHD3qjpWcj1khpoQO+KYF2yyybatSeh9j6B+tm0BL8o=",           "City": "IEAj8OKVGEICBDdUEDyP0Ruz6NhQgRyRSSjMU5Zxaek=",             "Country": "/ULLG+pCdlRd4v9sIFCkrEHGFpZ8gP9YRDtQOYxipM8=",          "Email": "test.gmail.com",            "ExtraParameters": [                {                   "Value": "lXXDll6UXsxUHzYuPRTdMdynd0XAr6+R/dD0vEk028o=",                    "Name": "KA0uhZUNDVAiBGrXfDUAyysbVxlzytEA+0jISSux0VU="              },              {                   "Value": "o8f79SlVa77Fde1JJcJK/p1YV3o09a7yaP4Pi6mYFNc=",                    "Name": "EtaNVj4q+fAcSmkJtLAShefrpn1+LQdmDBHiKIJN8fw="              },              {                   "Value": "EVc4owmOy/DBkCKHU98SEvSERV8F5JJVIWkSaChmLEA=",                    "Name": "fwJzimc1PN+1aLRkf1A2If2eSBCyYUaJSZ5k7FZMY7Y="              },              {                   "Value": "/jK9nEZ8pLmdUa9lDKz/UnAgd+PGT0Zyb9p2aAP1X1GvM5/5JTiiPzZg312NtKyl",                    "Name": "alzUkJthURP051F4vbUWcuBu6wnrwq+yFY/l9hIFnkc="              },              {                   "Value": "VTXRTDVaI5tEju8w38wfMhYatEnu8AhjAG0gq857xTGxilpqMwV02icbMEQvkaya",                    "Name": "Q35QIoKwEB0OXBgBCvIkbpX0eM+SiPNYYxoroMd1u7Q="              },              {                   "Value": "wdB4aaWeSnbKKwQq3bv96INXFREoO1pJ3JoUc+SmHKAwh7GtQ08SI39icBxTCdwH",                    "Name": "TvVCz5vTgcYQ7yxGvns5sOhvgFwxKgXrUxelwWkyclk="              },              {                   "Value": "e6qLzSE5tHg1b/A0a3cnctDYPBgBc4WK2BkmT8RG4yo=",                    "Name": "naK3edhKLsOIOtmhsWeyMv218m3vasUx9FC/XbbYiT0="              }           ],          "FacebookId": "",           "Firstname": "K2yytRw0BzBRgNEFB4WqAZNPCHheJE59iIfIBS4ifqw=",            "Gender": "",           "Id": "86fda35a-3d3f-4e49-a6aa-bcc5779f1e17",           "JobTitle": "",             "LandlinePhone": "",            "MaritalStatus": "",            "Middlename": "",           "OkId": "",             "PassportNumber": "",           "PersonalDataAgree": true,          "Phone": "90876543217",            "PropertyStatus": "",           "SocialStatus": "",             "Surname": "j+uzsfiEbJ7mbtKE/KuhxV5qoZeXsycl34ng2rrvp98=",          "Username": "",             "VkId": ""      },      "Success": true,        "Warnings": []  } }';
    public static testMethod void FS_CreateContact_CC_TestMethod() {
        Account varAccount =new Account();
        varAccount.name='Account name';
        varAccount.CurrencyIsoCode='USD';
        insert varAccount; 
      
        Http http = new Http();
        HTTPResponse res = new HTTPResponse();
        res.setBody(varResonseResult);
        res.setStatusCode(200);
        res.setStatus('Ok');
        
        Test.setCurrentPageReference(new PageReference('Page.FS_CreateContact')); 
        System.currentPageReference().getParameters().put('id', varAccount.id);
        
        contact con = new contact();
        con.FirstName = 'test';
        con.LastName = 'Last';
        con.AccountId = varAccount.id;
        con.FS_RefId__c = '86fda35a-3d3f-4e49-a6aa-bcc5779f1e17';
        con.FS_PIEncryptKey__c = 'Kx6nJNIC3mEFbiIGNG+YELANLyA7Qj45uY5F1SqX264=';
        insert con;
       
        Test.setCurrentPageReference(new PageReference('Page.FS_ContactDetailPage')); 
        System.currentPageReference().getParameters().put('id',  con.FS_RefId__c);
        
        FS_ContactDetail_CC tempdetail = new FS_ContactDetail_CC();
    }
    
}